<schema xmlns="http://purl.oclc.org/dsdl/schematron">
  <ns prefix="sch" uri="http://purl.oclc.org/dsdl/schematron"/>
  <ns prefix="cda" uri="urn:hl7-org:v3"/>
  <ns prefix="xsi" uri="http://www.w3.org/2001/XMLSchema-instance"/>
  <ns prefix="sdtc" uri="urn:hl7-org:sdtc"/>
  <phase id="errors">
    <active pattern="ActivitiesSection-errors"/>
    <active pattern="AdmissionDiagnosisSection-errors"/>
    <active pattern="AdmissionMedication-errors"/>
    <active pattern="AdmissionMedicationsSectionEntriesOptional-errors"/>
    <active pattern="AdvanceDirectiveObservation-errors"/>
    <active pattern="AdvanceDirectiveOrganizer-errors"/>
    <active pattern="AdvanceDirectivesSection-errors"/>
    <active pattern="AgeObservation-errors"/>
    <active pattern="AllergiesAndIntolerancesSection-errors"/>
    <active pattern="AllergyConcernAct-errors"/>
    <active pattern="AllergyIntoleranceObservation-errors"/>
    <active pattern="AllergyStatusObservation-errors"/>
    <active pattern="AnesthesiaSection-errors"/>
    <active pattern="AssessmentScaleObservation-errors"/>
    <active pattern="AssessmentScaleSupportingObservation-errors"/>
    <active pattern="AssessmentSection-errors"/>
    <active pattern="AssessmentandPlanSection-errors"/>
    <active pattern="AuthorParticipation-errors"/>
    <active pattern="AuthorizationActivity-errors"/>
    <active pattern="AverageBloodPressureOrganizer-errors"/>
    <active pattern="BasicIndustryObservation-errors"/>
    <active pattern="BasicOccupationObservation-errors"/>
    <active pattern="BirthSexObservation-errors"/>
    <active pattern="BrandNameObservation-errors"/>
    <active pattern="CareExperiencePreference-errors"/>
    <active pattern="CarePlan-errors"/>
    <active pattern="CareTeamMemberAct-errors"/>
    <active pattern="CareTeamMemberScheduleObservation-errors"/>
    <active pattern="CareTeamOrganizer-errors"/>
    <active pattern="CareTeamTypeObservation-errors"/>
    <active pattern="CareTeamsSection-errors"/>
    <active pattern="CaregiverCharacteristics-errors"/>
    <active pattern="CatalogNumberObservation-errors"/>
    <active pattern="CharacteristicsofHomeEnvironment-errors"/>
    <active pattern="ChiefComplaintSection-errors"/>
    <active pattern="ChiefComplaintandReasonforVisitSection-errors"/>
    <active pattern="CommentActivity-errors"/>
    <active pattern="CompanyNameObservation-errors"/>
    <active pattern="ComplicationsSection-errors"/>
    <active pattern="ConsultationNote-errors"/>
    <active pattern="ContinuityofCareDocumentCCD-errors"/>
    <active pattern="CourseofCareSection-errors"/>
    <active pattern="CoverageActivity-errors"/>
    <active pattern="CriticalityObservation-errors"/>
    <active pattern="CulturalandReligiousObservation-errors"/>
    <active pattern="DateOfDiagnosisAct-errors"/>
    <active pattern="DeceasedObservation-errors"/>
    <active pattern="DeviceIdentifierObservation-errors"/>
    <active pattern="DisabilityStatusObservation-errors"/>
    <active pattern="DischargeDiagnosisSection-errors"/>
    <active pattern="DischargeMedication-errors"/>
    <active pattern="DischargeMedicationsSection-errors"/>
    <active pattern="DischargeSummary-errors"/>
    <active pattern="DistinctIdentificationCodeObservation-errors"/>
    <active pattern="DrugMonitoringAct-errors"/>
    <active pattern="DrugVehicle-errors"/>
    <active pattern="EncounterActivity-errors"/>
    <active pattern="EncounterDiagnosis-errors"/>
    <active pattern="EncountersSection-errors"/>
    <active pattern="EntryReference-errors"/>
    <active pattern="EstimatedDateofDelivery-errors"/>
    <active pattern="ExpirationDateObservation-errors"/>
    <active pattern="ExternalDocumentReference-errors"/>
    <active pattern="FamilyHistoryDeathObservation-errors"/>
    <active pattern="FamilyHistoryObservation-errors"/>
    <active pattern="FamilyHistoryOrganizer-errors"/>
    <active pattern="FamilyHistorySection-errors"/>
    <active pattern="FunctionalStatusObservation-errors"/>
    <active pattern="FunctionalStatusOrganizer-errors"/>
    <active pattern="FunctionalStatusSection-errors"/>
    <active pattern="GenderIdentityObservation-errors"/>
    <active pattern="GeneralStatusSection-errors"/>
    <active pattern="GoalObservation-errors"/>
    <active pattern="GoalsSection-errors"/>
    <active pattern="HandoffCommunicationParticipants-errors"/>
    <active pattern="HealthConcernAct-errors"/>
    <active pattern="HealthConcernsSection-errors"/>
    <active pattern="HealthStatusEvaluationsandOutcomesSection-errors"/>
    <active pattern="HealthStatusObservation-errors"/>
    <active pattern="HighestPressureUlcerStage-errors"/>
    <active pattern="HistoryandPhysical-errors"/>
    <active pattern="HistoryofPresentIllnessSection-errors"/>
    <active pattern="HospitalAdmissionDiagnosis-errors"/>
    <active pattern="HospitalConsultationsSection-errors"/>
    <active pattern="HospitalCourseSection-errors"/>
    <active pattern="HospitalDischargeDiagnosis-errors"/>
    <active pattern="HospitalDischargeInstructionsSection-errors"/>
    <active pattern="HospitalDischargePhysicalSection-errors"/>
    <active pattern="HospitalDischargeStudiesSummarySection-errors"/>
    <active pattern="ImmunizationActivity-errors"/>
    <active pattern="ImmunizationMedicationInformation-errors"/>
    <active pattern="ImmunizationNotGivenReason-errors"/>
    <active pattern="ImmunizationsSection-errors"/>
    <active pattern="ImplantableDeviceStatusObservation-errors"/>
    <active pattern="Indication-errors"/>
    <active pattern="Instruction-errors"/>
    <active pattern="InstructionsSection-errors"/>
    <active pattern="InterventionAct-errors"/>
    <active pattern="LatexSafetyObservation-errors"/>
    <active pattern="LongitudinalCareWoundObservation-errors"/>
    <active pattern="LotOrBatchNumberObservation-errors"/>
    <active pattern="MRISafetyObservation-errors"/>
    <active pattern="ManufacturingDateObservation-errors"/>
    <active pattern="MedicalEquipmentOrganizer-errors"/>
    <active pattern="MedicalEquipmentSection-errors"/>
    <active pattern="MedicalGeneralHistorySection-errors"/>
    <active pattern="MedicationActivity-errors"/>
    <active pattern="MedicationAdherence-errors"/>
    <active pattern="MedicationDispense-errors"/>
    <active pattern="MedicationFreeTextSig-errors"/>
    <active pattern="MedicationInformation-errors"/>
    <active pattern="MedicationSupplyOrder-errors"/>
    <active pattern="MedicationsAdministeredSection-errors"/>
    <active pattern="MedicationsSection-errors"/>
    <active pattern="MentalStatusObservation-errors"/>
    <active pattern="MentalStatusOrganizer-errors"/>
    <active pattern="MentalStatusSection-errors"/>
    <active pattern="ModelNumberObservation-errors"/>
    <active pattern="NonMedicinalSupplyActivity-errors"/>
    <active pattern="NoteActivity-errors"/>
    <active pattern="NotesSection-errors"/>
    <active pattern="NumberofPressureUlcersObservation-errors"/>
    <active pattern="NutritionAssessment-errors"/>
    <active pattern="NutritionRecommendation-errors"/>
    <active pattern="NutritionSection-errors"/>
    <active pattern="NutritionalStatusObservation-errors"/>
    <active pattern="ObjectiveSection-errors"/>
    <active pattern="OperativeNote-errors"/>
    <active pattern="OperativeNoteFluidsSection-errors"/>
    <active pattern="OperativeNoteSurgicalProcedureSection-errors"/>
    <active pattern="OutcomeObservation-errors"/>
    <active pattern="PastMedicalHistory-errors"/>
    <active pattern="PatientReferralAct-errors"/>
    <active pattern="PayersSection-errors"/>
    <active pattern="PhysicalExamSection-errors"/>
    <active pattern="PlannedCoverage-errors"/>
    <active pattern="PlannedEncounter-errors"/>
    <active pattern="PlannedImmunizationActivity-errors"/>
    <active pattern="PlannedInterventionAct-errors"/>
    <active pattern="PlannedMedicationActivity-errors"/>
    <active pattern="PlannedProcedure-errors"/>
    <active pattern="PlannedProcedureSection-errors"/>
    <active pattern="PlannedSupply-errors"/>
    <active pattern="PlanofTreatmentSection-errors"/>
    <active pattern="PolicyActivity-errors"/>
    <active pattern="PostoperativeDiagnosisSection-errors"/>
    <active pattern="PostprocedureDiagnosis-errors"/>
    <active pattern="PostprocedureDiagnosisSection-errors"/>
    <active pattern="PreconditionforSubstanceAdministration-errors"/>
    <active pattern="PregnancyIntentionInNextYear-errors"/>
    <active pattern="PregnancyObservation-errors"/>
    <active pattern="PreoperativeDiagnosis-errors"/>
    <active pattern="PreoperativeDiagnosisSection-errors"/>
    <active pattern="PriorityPreference-errors"/>
    <active pattern="ProblemConcernAct-errors"/>
    <active pattern="ProblemObservation-errors"/>
    <active pattern="ProblemSection-errors"/>
    <active pattern="ProblemStatus-errors"/>
    <active pattern="ProcedureActivityProcedure-errors"/>
    <active pattern="ProcedureDescriptionSection-errors"/>
    <active pattern="ProcedureDispositionSection-errors"/>
    <active pattern="ProcedureEstimatedBloodLossSection-errors"/>
    <active pattern="ProcedureFindingsSection-errors"/>
    <active pattern="ProcedureImplantsSection-errors"/>
    <active pattern="ProcedureIndicationsSection-errors"/>
    <active pattern="ProcedureNote-errors"/>
    <active pattern="ProcedureSpecimensTakenSection-errors"/>
    <active pattern="ProceduresSection-errors"/>
    <active pattern="ProductInstance-errors"/>
    <active pattern="PrognosisObservation-errors"/>
    <active pattern="ProgressNote-errors"/>
    <active pattern="ProgressTowardGoalObservation-errors"/>
    <active pattern="ProvenanceAssemblerParticipation-errors"/>
    <active pattern="ProvenanceAuthorParticipation-errors"/>
    <active pattern="ReactionObservation-errors"/>
    <active pattern="Reason-errors"/>
    <active pattern="ReasonforReferralSection-errors"/>
    <active pattern="ReasonforVisitSection-errors"/>
    <active pattern="ReferralNote-errors"/>
    <active pattern="RelatedPersonRelationshipAndNameParticipant-errors"/>
    <active pattern="ResultObservation-errors"/>
    <active pattern="ResultOrganizer-errors"/>
    <active pattern="ResultsSection-errors"/>
    <active pattern="ReviewofSystemsSection-errors"/>
    <active pattern="RiskConcernAct-errors"/>
    <active pattern="SectionTimeRangeObservation-errors"/>
    <active pattern="SelfCareActivitiesADLandIADL-errors"/>
    <active pattern="SensoryStatus-errors"/>
    <active pattern="SerialNumberObservation-errors"/>
    <active pattern="ServiceDeliveryLocation-errors"/>
    <active pattern="SeverityObservation-errors"/>
    <active pattern="SexObservation-errors"/>
    <active pattern="SexualOrientationObservation-errors"/>
    <active pattern="SmokingStatus-errors"/>
    <active pattern="SmokingStatusMeaningfulUse-errors"/>
    <active pattern="SocialHistoryObservation-errors"/>
    <active pattern="SocialHistorySection-errors"/>
    <active pattern="SpecimenCollectionProcedure-errors"/>
    <active pattern="SpecimenConditionObservation-errors"/>
    <active pattern="SubjectiveSection-errors"/>
    <active pattern="SubstanceAdministeredAct-errors"/>
    <active pattern="SubstanceOrDeviceAllergyIntoleranceObservation-errors"/>
    <active pattern="SurgicalDrainsSection-errors"/>
    <active pattern="TobaccoUse-errors"/>
    <active pattern="TransferSummary-errors"/>
    <active pattern="TreatmentInterventionPreference-errors"/>
    <active pattern="TribalAffiliationObservation-errors"/>
    <active pattern="UDIOrganizer-errors"/>
    <active pattern="USRealmHeader-errors"/>
    <active pattern="USRealmHeaderforPatientGeneratedDocument-errors"/>
    <active pattern="UnstructuredDocument-errors"/>
    <active pattern="VitalSignObservation-errors"/>
    <active pattern="VitalSignsOrganizer-errors"/>
    <active pattern="VitalSignsSection-errors"/>
    <active pattern="WoundCharacteristic-errors"/>
    <active pattern="WoundMeasurementObservation-errors"/>
    <active pattern="USRealmAddress-errors"/>
    <active pattern="USRealmDateTime-errors"/>
    <active pattern="USRealmDateTimeInterval-errors"/>
    <active pattern="USRealmPatientNamePTNUSFIELDED-errors"/>
    <active pattern="USRealmPersonNamePNUSFIELDED-errors"/>
  </phase>
  <phase id="warnings">
    <active pattern="ActivitiesSection-warnings"/>
    <active pattern="AdmissionDiagnosisSection-warnings"/>
    <active pattern="AdmissionMedication-warnings"/>
    <active pattern="AdmissionMedicationsSectionEntriesOptional-warnings"/>
    <active pattern="AdvanceDirectiveObservation-warnings"/>
    <active pattern="AdvanceDirectiveOrganizer-warnings"/>
    <active pattern="AdvanceDirectivesSection-warnings"/>
    <active pattern="AgeObservation-warnings"/>
    <active pattern="AllergiesAndIntolerancesSection-warnings"/>
    <active pattern="AllergyConcernAct-warnings"/>
    <active pattern="AllergyStatusObservation-warnings"/>
    <active pattern="AnesthesiaSection-warnings"/>
    <active pattern="AssessmentScaleObservation-warnings"/>
    <active pattern="AssessmentScaleSupportingObservation-warnings"/>
    <active pattern="AssessmentandPlanSection-warnings"/>
    <active pattern="AuthorParticipation-warnings"/>
    <active pattern="AuthorizationActivity-warnings"/>
    <active pattern="AverageBloodPressureOrganizer-warnings"/>
    <active pattern="BasicIndustryObservation-warnings"/>
    <active pattern="BasicOccupationObservation-warnings"/>
    <active pattern="BirthSexObservation-warnings"/>
    <active pattern="BrandNameObservation-warnings"/>
    <active pattern="CareExperiencePreference-warnings"/>
    <active pattern="CarePlan-warnings"/>
    <active pattern="CareTeamMemberAct-warnings"/>
    <active pattern="CareTeamMemberScheduleObservation-warnings"/>
    <active pattern="CareTeamOrganizer-warnings"/>
    <active pattern="CareTeamTypeObservation-warnings"/>
    <active pattern="CareTeamsSection-warnings"/>
    <active pattern="CaregiverCharacteristics-warnings"/>
    <active pattern="CatalogNumberObservation-warnings"/>
    <active pattern="CharacteristicsofHomeEnvironment-warnings"/>
    <active pattern="CommentActivity-warnings"/>
    <active pattern="CompanyNameObservation-warnings"/>
    <active pattern="ComplicationsSection-warnings"/>
    <active pattern="ConsultationNote-warnings"/>
    <active pattern="ContinuityofCareDocumentCCD-warnings"/>
    <active pattern="CoverageActivity-warnings"/>
    <active pattern="CriticalityObservation-warnings"/>
    <active pattern="CulturalandReligiousObservation-warnings"/>
    <active pattern="DateOfDiagnosisAct-warnings"/>
    <active pattern="DeceasedObservation-warnings"/>
    <active pattern="DeviceIdentifierObservation-warnings"/>
    <active pattern="DisabilityStatusObservation-warnings"/>
    <active pattern="DischargeDiagnosisSection-warnings"/>
    <active pattern="DischargeMedication-warnings"/>
    <active pattern="DischargeMedicationsSection-warnings"/>
    <active pattern="DischargeSummary-warnings"/>
    <active pattern="DistinctIdentificationCodeObservation-warnings"/>
    <active pattern="DrugMonitoringAct-warnings"/>
    <active pattern="EncounterActivity-warnings"/>
    <active pattern="EncounterDiagnosis-warnings"/>
    <active pattern="EncountersSection-warnings"/>
    <active pattern="EntryReference-warnings"/>
    <active pattern="EstimatedDateofDelivery-warnings"/>
    <active pattern="ExpirationDateObservation-warnings"/>
    <active pattern="ExternalDocumentReference-warnings"/>
    <active pattern="FamilyHistoryDeathObservation-warnings"/>
    <active pattern="FamilyHistoryObservation-warnings"/>
    <active pattern="FamilyHistoryOrganizer-warnings"/>
    <active pattern="FamilyHistorySection-warnings"/>
    <active pattern="FunctionalStatusObservation-warnings"/>
    <active pattern="FunctionalStatusOrganizer-warnings"/>
    <active pattern="FunctionalStatusSection-warnings"/>
    <active pattern="GenderIdentityObservation-warnings"/>
    <active pattern="GoalObservation-warnings"/>
    <active pattern="GoalsSection-warnings"/>
    <active pattern="HandoffCommunicationParticipants-warnings"/>
    <active pattern="HealthConcernAct-warnings"/>
    <active pattern="HealthConcernsSection-warnings"/>
    <active pattern="HealthStatusEvaluationsandOutcomesSection-warnings"/>
    <active pattern="HealthStatusObservation-warnings"/>
    <active pattern="HighestPressureUlcerStage-warnings"/>
    <active pattern="HistoryandPhysical-warnings"/>
    <active pattern="HospitalAdmissionDiagnosis-warnings"/>
    <active pattern="HospitalDischargeDiagnosis-warnings"/>
    <active pattern="ImmunizationActivity-warnings"/>
    <active pattern="ImmunizationMedicationInformation-warnings"/>
    <active pattern="ImmunizationNotGivenReason-warnings"/>
    <active pattern="ImmunizationsSection-warnings"/>
    <active pattern="ImplantableDeviceStatusObservation-warnings"/>
    <active pattern="Indication-warnings"/>
    <active pattern="Instruction-warnings"/>
    <active pattern="InstructionsSection-warnings"/>
    <active pattern="InterventionAct-warnings"/>
    <active pattern="LatexSafetyObservation-warnings"/>
    <active pattern="LongitudinalCareWoundObservation-warnings"/>
    <active pattern="LotOrBatchNumberObservation-warnings"/>
    <active pattern="MRISafetyObservation-warnings"/>
    <active pattern="ManufacturingDateObservation-warnings"/>
    <active pattern="MedicalEquipmentOrganizer-warnings"/>
    <active pattern="MedicalEquipmentSection-warnings"/>
    <active pattern="MedicationActivity-warnings"/>
    <active pattern="MedicationAdherence-warnings"/>
    <active pattern="MedicationDispense-warnings"/>
    <active pattern="MedicationFreeTextSig-warnings"/>
    <active pattern="MedicationSupplyOrder-warnings"/>
    <active pattern="MedicationsAdministeredSection-warnings"/>
    <active pattern="MedicationsSection-warnings"/>
    <active pattern="MentalStatusObservation-warnings"/>
    <active pattern="MentalStatusOrganizer-warnings"/>
    <active pattern="MentalStatusSection-warnings"/>
    <active pattern="ModelNumberObservation-warnings"/>
    <active pattern="NonMedicinalSupplyActivity-warnings"/>
    <active pattern="NoteActivity-warnings"/>
    <active pattern="NotesSection-warnings"/>
    <active pattern="NumberofPressureUlcersObservation-warnings"/>
    <active pattern="NutritionAssessment-warnings"/>
    <active pattern="NutritionRecommendation-warnings"/>
    <active pattern="NutritionSection-warnings"/>
    <active pattern="NutritionalStatusObservation-warnings"/>
    <active pattern="OperativeNote-warnings"/>
    <active pattern="OutcomeObservation-warnings"/>
    <active pattern="PastMedicalHistory-warnings"/>
    <active pattern="PatientReferralAct-warnings"/>
    <active pattern="PayersSection-warnings"/>
    <active pattern="PhysicalExamSection-warnings"/>
    <active pattern="PlannedCoverage-warnings"/>
    <active pattern="PlannedEncounter-warnings"/>
    <active pattern="PlannedImmunizationActivity-warnings"/>
    <active pattern="PlannedInterventionAct-warnings"/>
    <active pattern="PlannedMedicationActivity-warnings"/>
    <active pattern="PlannedProcedure-warnings"/>
    <active pattern="PlannedProcedureSection-warnings"/>
    <active pattern="PlannedSupply-warnings"/>
    <active pattern="PlanofTreatmentSection-warnings"/>
    <active pattern="PolicyActivity-warnings"/>
    <active pattern="PostprocedureDiagnosis-warnings"/>
    <active pattern="PostprocedureDiagnosisSection-warnings"/>
    <active pattern="PregnancyIntentionInNextYear-warnings"/>
    <active pattern="PregnancyObservation-warnings"/>
    <active pattern="PreoperativeDiagnosis-warnings"/>
    <active pattern="PreoperativeDiagnosisSection-warnings"/>
    <active pattern="PriorityPreference-warnings"/>
    <active pattern="ProblemConcernAct-warnings"/>
    <active pattern="ProblemObservation-warnings"/>
    <active pattern="ProblemSection-warnings"/>
    <active pattern="ProblemStatus-warnings"/>
    <active pattern="ProcedureActivityProcedure-warnings"/>
    <active pattern="ProcedureFindingsSection-warnings"/>
    <active pattern="ProcedureIndicationsSection-warnings"/>
    <active pattern="ProcedureNote-warnings"/>
    <active pattern="ProceduresSection-warnings"/>
    <active pattern="ProductInstance-warnings"/>
    <active pattern="PrognosisObservation-warnings"/>
    <active pattern="ProgressNote-warnings"/>
    <active pattern="ProgressTowardGoalObservation-warnings"/>
    <active pattern="ProvenanceAssemblerParticipation-warnings"/>
    <active pattern="ProvenanceAuthorParticipation-warnings"/>
    <active pattern="ReactionObservation-warnings"/>
    <active pattern="Reason-warnings"/>
    <active pattern="ReasonforReferralSection-warnings"/>
    <active pattern="ReferralNote-warnings"/>
    <active pattern="RelatedPersonRelationshipAndNameParticipant-warnings"/>
    <active pattern="ResultObservation-warnings"/>
    <active pattern="ResultOrganizer-warnings"/>
    <active pattern="ResultsSection-warnings"/>
    <active pattern="RiskConcernAct-warnings"/>
    <active pattern="SectionTimeRangeObservation-warnings"/>
    <active pattern="SelfCareActivitiesADLandIADL-warnings"/>
    <active pattern="SensoryStatus-warnings"/>
    <active pattern="SerialNumberObservation-warnings"/>
    <active pattern="ServiceDeliveryLocation-warnings"/>
    <active pattern="SeverityObservation-warnings"/>
    <active pattern="SexObservation-warnings"/>
    <active pattern="SexualOrientationObservation-warnings"/>
    <active pattern="SmokingStatus-warnings"/>
    <active pattern="SmokingStatusMeaningfulUse-warnings"/>
    <active pattern="SocialHistoryObservation-warnings"/>
    <active pattern="SocialHistorySection-warnings"/>
    <active pattern="SpecimenCollectionProcedure-warnings"/>
    <active pattern="SpecimenConditionObservation-warnings"/>
    <active pattern="SubstanceAdministeredAct-warnings"/>
    <active pattern="SubstanceOrDeviceAllergyIntoleranceObservation-warnings"/>
    <active pattern="TobaccoUse-warnings"/>
    <active pattern="TransferSummary-warnings"/>
    <active pattern="TreatmentInterventionPreference-warnings"/>
    <active pattern="TribalAffiliationObservation-warnings"/>
    <active pattern="UDIOrganizer-warnings"/>
    <active pattern="USRealmHeader-warnings"/>
    <active pattern="USRealmHeaderforPatientGeneratedDocument-warnings"/>
    <active pattern="UnstructuredDocument-warnings"/>
    <active pattern="VitalSignObservation-warnings"/>
    <active pattern="VitalSignsOrganizer-warnings"/>
    <active pattern="VitalSignsSection-warnings"/>
    <active pattern="WoundCharacteristic-warnings"/>
    <active pattern="WoundMeasurementObservation-warnings"/>
    <active pattern="USRealmAddress-warnings"/>
    <active pattern="USRealmDateTime-warnings"/>
    <active pattern="USRealmDateTimeInterval-warnings"/>
  </phase>
  <pattern id="ActivitiesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.21.2.3:2015-08-01-->
    <rule id="ActivitiesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.21.2.3') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ActivitiesSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.21.2.3') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.21.2.3'">@root SHALL = '2.16.840.1.113883.10.20.21.2.3'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="ActivitiesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '62387-6'">@code SHALL = '62387-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-intervention" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-intervention.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])">act SHALL conform to InterventionAct</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-plannedIntervention" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-plannedIntervention.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])">act SHALL conform to PlannedInterventionAct</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-handoffCommParticipants" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ActivitiesSection-errors-entry-handoffCommParticipants.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])">act SHALL conform to HandoffCommunicationParticipants</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.43:2015-08-01-->
    <rule id="AdmissionDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.43') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry) &lt;= 1">Cardinality of entry is 0..1</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.43') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.43'">@root SHALL = '2.16.840.1.113883.10.20.22.2.43'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '46241-6'">@code SHALL = '46241-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@code = '42347-5') and (@codeSystem = '2.16.840.1.113883.6.1')])=1">Cardinality of translation:admissionDiag is 1..1</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-code.translation-admissionDiag" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:code/cda:translation[(@code = '42347-5') and (@codeSystem = '2.16.840.1.113883.6.1')]">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '42347-5'">@code SHALL = '42347-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-entry" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:entry">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-errors-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])">act SHALL conform to HospitalAdmissionDiagnosis</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedication-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.36:2014-06-09-->
    <rule id="AdmissionMedication-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.36') and (@extension = '2014-06-09')])=1">Cardinality of templateId:admission-med is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]])&gt;=1">Cardinality of entryRelationship:medicationActivity is 1..*</assert>
    </rule>
    <rule id="AdmissionMedication-errors-templateId-admission-med" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.36') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.36'">@root SHALL = '2.16.840.1.113883.10.20.22.4.36'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="AdmissionMedication-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="AdmissionMedication-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="AdmissionMedication-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '42346-7'">@code SHALL = '42346-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdmissionMedication-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AdmissionMedication-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AdmissionMedication-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="AdmissionMedication-errors-entryRelationship-medicationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="AdmissionMedication-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedicationsSectionEntriesOptional-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.44:2015-08-01-->
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.44') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.44') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.44'">@root SHALL = '2.16.840.1.113883.10.20.22.2.44'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '42346-7'">@code SHALL = '42346-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-entry-admissionMedication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-errors-entry-admissionMedication.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09'])">act SHALL conform to AdmissionMedication</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.48:2022-02-14-->
    <rule id="AdvanceDirectiveObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.48') and (@extension = '2022-02-14')])=1">Cardinality of templateId:advance-directive-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:reference)&gt;=1">Cardinality of reference is 1..*</assert>
      <assert test="count(cda:reference[(@typeCode = 'REFR')])&gt;=1">Cardinality of reference:reference1 is 1..*</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-templateId-advance-directive-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.48') and (@extension = '2022-02-14')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.48'">@root SHALL = '2.16.840.1.113883.10.20.22.4.48'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-02-14'">@extension SHALL = '2022-02-14'</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75320-2'">@code SHALL = '75320-2'</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-effectiveTime.high" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:effectiveTime/cda:high">
      <assert test="@value or @nullFlavor = 'NA'">If the Advance Directive does not have a specified ending time, the &lt;high&gt; element **SHALL** have the nullFlavor attribute set to *NA* (CONF:1198-32449).</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:value">
      <assert test="@nullFlavor or contains($AdvanceDirectivesContentType, @code)">SHALL be selected from ValueSet AdvanceDirectivesContentType</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.1.58')])=1">Cardinality of templateId:primary is 1..1</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'VRF'">@typeCode SHALL = 'VRF'</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.templateId-primary" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:templateId[(@root = '2.16.840.1.113883.10.20.1.58')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.1.58'">@root SHALL = '2.16.840.1.113883.10.20.1.58'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.time" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:time">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-verifier.participantRole.playingEntity.name" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:playingEntity/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CST'">@typeCode SHALL = 'CST'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'AGNT'">@classCode SHALL = 'AGNT'</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-participant-custodian.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-reference-reference1" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-reference-reference1.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipExternalReference, .)">SHALL be selected from ValueSet XActRelationshipExternalReference</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-reference-reference1.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]/cda:externalDocument">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-errors-reference-reference1.externalDocument.text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]/cda:externalDocument/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.108:2022-02-14-->
    <rule id="AdvanceDirectiveOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.108') and (@extension = '2022-02-14')])=1">Cardinality of templateId:advance-directive-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])]])&gt;=1">Cardinality of component:advDirObs is 1..*</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-templateId-advance-directive-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.108') and (@extension = '2022-02-14')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.108'">@root SHALL = '2.16.840.1.113883.10.20.22.4.108'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-02-14'">@extension SHALL = '2022-02-14'</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '45473-6'">@code SHALL = '45473-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-component-advDirObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-errors-component-advDirObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])">observation SHALL conform to AdvanceDirectiveObservation</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectivesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.21.1:2022-02-14-->
    <rule id="AdvanceDirectivesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.21.1') and (@extension = '2022-02-14')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.21.1') and (@extension = '2022-02-14')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.21.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.21.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-02-14'">@extension SHALL = '2022-02-14'</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '42348-3'">@code SHALL = '42348-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-entry-observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:organizer)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-entry-observation.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])">observation SHALL conform to AdvanceDirectiveObservation</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-entry-organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-errors-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14'])">organizer SHALL conform to AdvanceDirectiveOrganizer</assert>
    </rule>
  </pattern>
  <pattern id="AgeObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.31-->
    <rule id="AgeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.31')])=1">Cardinality of templateId:age-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="AgeObservation-errors-templateId-age-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.31')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.31'">@root SHALL = '2.16.840.1.113883.10.20.22.4.31'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="AgeObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="AgeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '445518008'">@code SHALL = '445518008'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="AgeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AgeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AgeObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AgeObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:value">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="AgeObservation-errors-value.unit" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]/cda:value/@unit">
      <assert test="contains($AgePQ_UCUM, .)">SHALL be selected from ValueSet AgePQ_UCUM</assert>
    </rule>
  </pattern>
  <pattern id="AllergiesAndIntolerancesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.6.1:2015-08-01-->
    <rule id="AllergiesAndIntolerancesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.6.1') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AllergiesAndIntolerancesSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.6.1') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.6.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.6.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="AllergiesAndIntolerancesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '48765-2'">@code SHALL = '48765-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AllergiesAndIntolerancesSection-errors-entry-allergyConcern" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="AllergiesAndIntolerancesSection-errors-entry-allergyConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01'])]]/cda:act">
      <assert test="not((cda:statusCode/@code = 'completed')) or cda:effectiveTime/cda:high">If statusCode/@code="completed" Completed, then effectiveTime **SHALL** contain [1..1] high (CONF:1198-10085).</assert>
      <assert test="not((cda:statusCode/@code = 'active')) or cda:effectiveTime/cda:low">If statusCode/@code="active" Active, then effectiveTime **SHALL** contain [1..1] low (CONF:1198-7504).</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01'])">act SHALL conform to AllergyConcernAct</assert>
    </rule>
  </pattern>
  <pattern id="AllergyConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.30:2015-08-01-->
    <rule id="AllergyConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]">
      <assert test="not((cda:statusCode/@code = 'completed')) or cda:effectiveTime/cda:high">If statusCode/@code="completed" Completed, then effectiveTime **SHALL** contain [1..1] high (CONF:1198-10085).</assert>
      <assert test="not((cda:statusCode/@code = 'active')) or cda:effectiveTime/cda:low">If statusCode/@code="active" Active, then effectiveTime **SHALL** contain [1..1] low (CONF:1198-7504).</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.30') and (@extension = '2015-08-01')])=1">Cardinality of templateId:allergy-concern-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]])=1">Cardinality of entryRelationship:allergyObs is 1..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-templateId-allergy-concern-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.30') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.30'">@root SHALL = '2.16.840.1.113883.10.20.22.4.30'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'CONC'">@code SHALL = 'CONC'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.6'">@codeSystem SHALL = '2.16.840.1.113883.5.6'</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:effectiveTime">
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-entryRelationship-allergyObs" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-entryRelationship-allergyObs.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="AllergyConcernAct-errors-entryRelationship-allergyObs.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])">observation SHALL conform to AllergyIntoleranceObservation</assert>
    </rule>
  </pattern>
  <pattern id="AllergyIntoleranceObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.7:2014-06-09-->
    <rule id="AllergyIntoleranceObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.7') and (@extension = '2014-06-09')])=1">Cardinality of templateId:allergy is 1..1</assert>
      <assert test="count(@negationInd) &lt;= 1">Cardinality of @negationInd is 0..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="AllergyIntoleranceObservation-errors-templateId-allergy" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.7') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.7'">@root SHALL = '2.16.840.1.113883.10.20.22.4.7'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="AllergyIntoleranceObservation-errors-participant-consumable.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="AllergyStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.28:2019-06-20-->
    <rule id="AllergyStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.28') and (@extension = '2019-06-20')])=1">Cardinality of templateId:allergy-status-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-templateId-allergy-status-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.28') and (@extension = '2019-06-20')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.28'">@root SHALL = '2.16.840.1.113883.10.20.22.4.28'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-20'">@extension SHALL = '2019-06-20'</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '33999-4'">@code SHALL = '33999-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AllergyStatusObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]/cda:value">
      <assert test="@nullFlavor or contains($AllergyClinicalStatus, @code)">SHALL be selected from ValueSet AllergyClinicalStatus</assert>
    </rule>
  </pattern>
  <pattern id="AnesthesiaSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.25:2014-06-09-->
    <rule id="AnesthesiaSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.25') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.25') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.25'">@root SHALL = '2.16.840.1.113883.10.20.22.2.25'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59774-0'">@code SHALL = '59774-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-entry-procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration)]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-entry-procedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration)]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])">procedure SHALL conform to ProcedureActivityProcedure</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-entry-medication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="AnesthesiaSection-errors-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.69:2022-06-01-->
    <rule id="AssessmentScaleObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.69') and (@extension = '2022-06-01')])=1">Cardinality of templateId:assessment-scale-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:derivationExpr) &lt;= 1">Cardinality of derivationExpr is 0..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-templateId-assessment-scale-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.69') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.69'">@root SHALL = '2.16.840.1.113883.10.20.22.4.69'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-entryRelationship-supportingObs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-entryRelationship-supportingObs.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-entryRelationship-supportingObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleSupportingObservation</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange">
      <assert test="count(cda:observationRange)=1">Cardinality of observationRange is 1..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange.observationRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange">
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange.observationRange.text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleObservation-errors-referenceRange.observationRange.text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleSupportingObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.86:2022-06-01-->
    <rule id="AssessmentScaleSupportingObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.86') and (@extension = '2022-06-01')])=1">Cardinality of templateId:assessment-scale-supporting-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)&gt;=1">Cardinality of value is 1..*</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-templateId-assessment-scale-supporting-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.86') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.86'">@root SHALL = '2.16.840.1.113883.10.20.22.4.86'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AssessmentScaleSupportingObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.8-->
    <rule id="AssessmentSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.8')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AssessmentSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.8')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.8'">@root SHALL = '2.16.840.1.113883.10.20.22.2.8'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="AssessmentSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '51848-0'">@code SHALL = '51848-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentandPlanSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.9:2014-06-09-->
    <rule id="AssessmentandPlanSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.9') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="AssessmentandPlanSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.9') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.9'">@root SHALL = '2.16.840.1.113883.10.20.22.2.9'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="AssessmentandPlanSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '51847-2'">@code SHALL = '51847-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AssessmentandPlanSection-errors-entry-plannedProcedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="AssessmentandPlanSection-errors-entry-plannedProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])">procedure SHALL conform to PlannedProcedure</assert>
    </rule>
  </pattern>
  <pattern id="AuthorParticipation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.119-->
    <rule id="AuthorParticipation-errors-root" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.119')])=1">Cardinality of templateId:author is 1..1</assert>
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="AuthorParticipation-errors-templateId-author" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.119')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.119'">@root SHALL = '2.16.840.1.113883.10.20.22.4.119'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="AuthorParticipation-errors-assignedAuthor" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="@nullFlavor or (cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)) or (/cda:ClinicalDocument//cda:assignedAuthor[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)])">Authors require addr, telecom, and either assignedPerson/name or assignedAuthoringDevice/manufacturerModelName. These may be present on this author or on another instance of an Author Participation in the document that has an id that matches the first id of this author.</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="AuthorParticipation-errors-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="AuthorParticipation-errors-assignedAuthor.representedOrganization.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
  </pattern>
  <pattern id="AuthorizationActivity-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.1.19-->
    <rule id="AuthorizationActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.1.19')])=1">Cardinality of templateId:authorization-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(@typeCode = 'SUBJ')])&gt;=1">Cardinality of entryRelationship:target is 1..*</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-templateId-authorization-activity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.1.19')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.1.19'">@root SHALL = '2.16.840.1.113883.10.20.1.19'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-entryRelationship-target" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SUBJ')]">
      <assert test="((cda:act | cda:encounter | cda:observation | cda:observationMedia | cda:organizer | cda:procedure | cda:regionOfInterest | cda:substanceAdministration | cda:supply))[@moodCode = 'PRMS']">The target of an authorization activity with act/entryRelationship/@typeCode="SUBJ" SHALL be a clinical statement with moodCode="PRMS" Promise (CONF:81-8951).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
    </rule>
    <rule id="AuthorizationActivity-errors-entryRelationship-target.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SUBJ')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
  </pattern>
  <pattern id="AverageBloodPressureOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.512:2024-05-01-->
    <rule id="AverageBloodPressureOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.512') and (@extension = '2024-05-01')])=1">Cardinality of templateId:avg-bp-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'BATTERY'">@classCode SHALL = 'BATTERY'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:component)&gt;=2">Cardinality of component is 2..*</assert>
      <assert test="count(cda:component[(cda:observation/cda:code/@code = '96608-5')])=1">Cardinality of component:systolic is 1..1</assert>
      <assert test="count(cda:component[(cda:observation/cda:code/@code = '96609-3')])=1">Cardinality of component:diastolic is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-templateId-avg-bp-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.512') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.512'">@root SHALL = '2.16.840.1.113883.10.20.22.4.512'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '96607-7'">@code SHALL = '96607-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]/cda:observation">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic.observation.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]/cda:observation/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '96608-5'">@code SHALL = '96608-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-systolic.observation.value" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96608-5')]/cda:observation/cda:value">
      <assert test="count(@unit) &lt;= 1">Cardinality of @unit is 0..1</assert>
      <assert test="not(@unit) or @unit = 'mm[Hg]'">@unit, if present, SHALL = 'mm[Hg]'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]/cda:observation">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic.observation.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]/cda:observation/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '96609-3'">@code SHALL = '96609-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="AverageBloodPressureOrganizer-errors-component-diastolic.observation.value" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]/cda:component[(cda:observation/cda:code/@code = '96609-3')]/cda:observation/cda:value">
      <assert test="count(@unit) &lt;= 1">Cardinality of @unit is 0..1</assert>
      <assert test="not(@unit) or @unit = 'mm[Hg]'">@unit, if present, SHALL = 'mm[Hg]'</assert>
    </rule>
  </pattern>
  <pattern id="BasicIndustryObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.504:2023-05-01-->
    <rule id="BasicIndustryObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.504') and (@extension = '2023-05-01')])=1">Cardinality of templateId:basic-industry-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="BasicIndustryObservation-errors-templateId-basic-industry-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.504') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.504'">@root SHALL = '2.16.840.1.113883.10.20.22.4.504'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="BasicIndustryObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="BasicIndustryObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '86188-0'">@code SHALL = '86188-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="BasicIndustryObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="BasicOccupationObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.503:2023-05-01-->
    <rule id="BasicOccupationObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.503') and (@extension = '2023-05-01')])=1">Cardinality of templateId:basic-occupation-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
      <assert test="count(cda:subject) &lt;= 1">Cardinality of subject is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]) &lt;= 1">Cardinality of entryRelationship:basic-industry is 0..1</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-templateId-basic-occupation-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.503') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.503'">@root SHALL = '2.16.840.1.113883.10.20.22.4.503'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11341-5'">@code SHALL = '11341-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-subject" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:subject">
      <assert test="count(cda:relatedSubject)=1">Cardinality of relatedSubject is 1..1</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-entryRelationship-basic-industry" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-entryRelationship-basic-industry.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="BasicOccupationObservation-errors-entryRelationship-basic-industry.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])">observation SHALL conform to BasicIndustryObservation</assert>
    </rule>
  </pattern>
  <pattern id="BirthSexObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.200:2024-05-01-->
    <rule id="BirthSexObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.200') and (@extension = '2024-05-01')])=1">Cardinality of templateId:birth-sex-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="BirthSexObservation-errors-templateId-birth-sex-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.200') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.200'">@root SHALL = '2.16.840.1.113883.10.20.22.4.200'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="BirthSexObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="BirthSexObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '76689-9'">@code SHALL = '76689-9'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="BirthSexObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="BirthSexObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="BirthSexObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="BirthSexObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="BirthSexObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]/cda:value">
      <assert test="@nullFlavor or contains($BirthSex, @code)">SHALL be selected from ValueSet BirthSex</assert>
    </rule>
  </pattern>
  <pattern id="BrandNameObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.301:2019-06-21-->
    <rule id="BrandNameObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.301') and (@extension = '2019-06-21')])=1">Cardinality of templateId:brand-name-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="BrandNameObservation-errors-templateId-brand-name-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.301') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.301'">@root SHALL = '2.16.840.1.113883.10.20.22.4.301'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="BrandNameObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C71898'">@code SHALL = 'C71898'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="BrandNameObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="BrandNameObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="CareExperiencePreference-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.509:2024-05-01-->
    <rule id="CareExperiencePreference-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.509') and (@extension = '2024-05-01')])=1">Cardinality of templateId:care-experience-pref is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-templateId-care-experience-pref" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.509') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.509'">@root SHALL = '2.16.840.1.113883.10.20.22.4.509'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '95541-9'">@code SHALL = '95541-9'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareExperiencePreference-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="CarePlan-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.15:2024-05-01-->
    <rule id="CarePlan-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.15') and (@extension = '2024-05-01')])=1">Cardinality of templateId:care-plan is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:setId) &lt;= 1">Cardinality of setId is 0..1</assert>
      <assert test="count(cda:versionNumber) &lt;= 1">Cardinality of versionNumber is 0..1</assert>
      <assert test="count(cda:documentationOf)&gt;=1">Cardinality of documentationOf is 1..*</assert>
      <assert test="count(cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')])=1">Cardinality of documentationOf:care-provision is 1..1</assert>
      <assert test="count(cda:componentOf) &lt;= 1">Cardinality of componentOf is 0..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-templateId-care-plan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.15') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.15'">@root SHALL = '2.16.840.1.113883.10.20.22.1.15'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="CarePlan-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($CarePlanDocumentType, @code)">SHALL be selected from ValueSet CarePlanDocumentType</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:informationRecipient) &lt;= 1">Cardinality of informationRecipient is 0..1</assert>
      <assert test="count(cda:receivedOrganization) &lt;= 1">Cardinality of receivedOrganization is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.informationRecipient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="CarePlan-errors-informationRecipient.intendedRecipient.receivedOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:receivedOrganization">
      <assert test="count(cda:standardIndustryClassCode) &lt;= 1">Cardinality of standardIndustryClassCode is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:signatureCode)=1">Cardinality of signatureCode is 1..1</assert>
      <assert test="count(sdtc:signatureText) &lt;= 1">Cardinality of signatureText is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-authenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ONESELF'">@code SHALL = 'ONESELF'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.111'">@codeSystem SHALL = '2.16.840.1.113883.5.111'</assert>
    </rule>
    <rule id="CarePlan-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'VRF'">@typeCode SHALL = 'VRF'</assert>
      <assert test="count(cda:functionCode)=1">Cardinality of functionCode is 1..1</assert>
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:functionCode">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '425268008'">@code SHALL = '425268008'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-verifier.associatedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:associatedEntity/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect.associatedEntity.classCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/@classCode">
      <assert test="contains($INDRoleclassCodes, .)">SHALL be selected from ValueSet INDRoleclassCodes</assert>
    </rule>
    <rule id="CarePlan-errors-participant-indirect.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-documentationOf-care-provision.serviceEvent.performer.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="CarePlan-errors-relatedDocument-relatedDocument1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:relatedDocument[(cda:parentDocument)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:parentDocument)=1">Cardinality of parentDocument is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-relatedDocument-relatedDocument1.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:relatedDocument[(cda:parentDocument)]/@typeCode">
      <assert test="contains($X_ActRelationshipDocument, .)">SHALL be selected from ValueSet X_ActRelationshipDocument</assert>
    </rule>
    <rule id="CarePlan-errors-relatedDocument-relatedDocument1.parentDocument" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:relatedDocument[(cda:parentDocument)]/cda:parentDocument">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:setId)=1">Cardinality of setId is 1..1</assert>
      <assert test="count(cda:versionNumber)=1">Cardinality of versionNumber is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="CarePlan-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain a Plan of Treatment Section (identifier: urn:hl7ii:2.16.840.1.113883.10.20.22.2.10:2014-06-09) (CONF:1198-31044).</assert>
      <assert test="count(cda:component)&gt;=2">Cardinality of component is 2..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]])=1">Cardinality of component:healthConcerns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)])]])=1">Cardinality of component:goals is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:activities is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)])]]) &lt;= 1">Cardinality of component:healthStatusEvalOutcm is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthConcerns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthConcerns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Health Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])">section SHALL conform to HealthConcernsSection</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-goals" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-goals.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Goal Observation</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)])">section SHALL conform to GoalsSection</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-activities" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-activities.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])">section SHALL conform to ActivitiesSection</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthStatusEvalOutcm" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-healthStatusEvalOutcm.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]]">If section/@nullFlavor is not present, SHALL contain at least one Outcome Observation</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)])">section SHALL conform to HealthStatusEvaluationsandOutcomesSection</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="CarePlan-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.1:2024-05-01-->
    <rule id="CareTeamMemberAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500.1') and (@extension = '2024-05-01')])=1">Cardinality of templateId:care-team-member-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)=1">Cardinality of performer is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:schedule is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-templateId-care-team-member-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500.1') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.500.1'">@root SHALL = '2.16.840.1.113883.10.20.22.4.500.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '92707-9'">@code SHALL = '92707-9'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer">
      <assert test="count(sdtc:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:assignedPerson or (/cda:ClinicalDocument//cda:performer[cda:assignedEntity/cda:assignedPerson and cda:assignedEntity/cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2]])">If the assignedEntity/id is not referencing a Performer elsewhere in the document with an assignedPerson populated, this assignedEntity SHALL contain exactly one [1..1] assignedPerson (CONF:4515-180).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.id" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.assignedPerson" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.assignedPerson.name" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.representedOrganization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization">
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-performer.assignedEntity.representedOrganization.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-participant-location" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'LOC'">@typeCode SHALL = 'LOC'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-participant-addl-functions" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(sdtc:functionCode)=1">Cardinality of functionCode is 1..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-participant-addl-functions.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:participantRole">
      <assert test="count(@nullFlavor)=1">Cardinality of @nullFlavor is 1..1</assert>
      <assert test="@nullFlavor = 'NA'">@nullFlavor SHALL = 'NA'</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and not(cda:act) and (cda:encounter) and not(cda:observation) and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-encounter.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and not(cda:act) and (cda:encounter) and not(cda:observation) and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-encounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and not(cda:act) and (cda:encounter) and not(cda:observation) and not(cda:act)]/cda:encounter">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:id[1]/@nullFlavor = 'NA' or (/cda:ClinicalDocument//cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']] and cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2])">If the first id does not match an encounter/id from an encounter elsewhere within the same document and the id does not contain @nullFlavor="NA", then this entry SHALL conform to the Encounter Activity (identifier: urn:hl7ii:2.16.840.1.113883.10.20.22.4.49:2015-08-01) (CONF:4515-90).</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-note" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:encounter) and not(cda:observation) and (cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-note.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:encounter) and not(cda:observation) and (cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-note.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:encounter) and not(cda:observation) and (cda:act)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])">act SHALL conform to NoteActivity</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-schedule" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-schedule.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="CareTeamMemberAct-errors-entryRelationship-schedule.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])">observation SHALL conform to CareTeamMemberScheduleObservation</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberScheduleObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.3:2022-06-01-->
    <rule id="CareTeamMemberScheduleObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500.3') and (@extension = '2022-06-01')])=1">Cardinality of templateId:care-team-member-schedule-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-templateId-care-team-member-schedule-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500.3') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.500.3'">@root SHALL = '2.16.840.1.113883.10.20.22.4.500.3'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '57203-2'">@code SHALL = '57203-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:value">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500:2022-06-01-->
    <rule id="CareTeamOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500') and (@extension = '2022-06-01')])=1">Cardinality of templateId:care-team-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:observation) and not(cda:encounter)]) &lt;= 1">Cardinality of component:note is 0..1</assert>
      <assert test="count(cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])] and not(cda:observation) and not(cda:encounter)])&gt;=1">Cardinality of component:member is 1..*</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-templateId-care-team-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.500'">@root SHALL = '2.16.840.1.113883.10.20.22.4.500'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '86744-0'">@code SHALL = '86744-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:originalText) &lt;= 1">Cardinality of originalText is 0..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-code.originalText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:code/cda:originalText">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-code.originalText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:code/cda:originalText/cda:reference">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-statusCode.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-effectiveTime" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-lead" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'PPRF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PPRF'">@typeCode SHALL = 'PPRF'</assert>
      <assert test="count(sdtc:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-lead.participantRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'PPRF')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'LOC'">@typeCode SHALL = 'LOC'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location.participantRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location.participantRole.addr" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location.participantRole.playingEntity" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:playingEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PLC'">@classCode SHALL = 'PLC'</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-participant-location.participantRole.playingEntity.classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:playingEntity/@classCode">
      <assert test="contains($EntityClassRoot, .)">SHALL be selected from ValueSet EntityClassRoot</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-type" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01'])] and not(cda:encounter)]">
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-type.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01'])] and not(cda:encounter)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01'])">observation SHALL conform to CareTeamTypeObservation</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-entryReference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:encounter)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-entryReference.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-encounter" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and not(cda:observation) and (cda:encounter)]">
      <assert test="count(cda:act)=0">Cardinality of act is 0..0</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-encounter.encounter" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and not(cda:observation) and (cda:encounter)]/cda:encounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-note" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:observation) and not(cda:encounter)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-note.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])">act SHALL conform to NoteActivity</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-member" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])] and not(cda:observation) and not(cda:encounter)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=0">Cardinality of observation is 0..0</assert>
    </rule>
    <rule id="CareTeamOrganizer-errors-component-member.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])">act SHALL conform to CareTeamMemberAct</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamTypeObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.2:2019-07-01-->
    <rule id="CareTeamTypeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500.2') and (@extension = '2019-07-01')])=1">Cardinality of templateId:care-team-type-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-templateId-care-team-type-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.500.2') and (@extension = '2019-07-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.500.2'">@root SHALL = '2.16.840.1.113883.10.20.22.4.500.2'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-07-01'">@extension SHALL = '2019-07-01'</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '86744-0'">@code SHALL = '86744-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="CareTeamTypeObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]/cda:value/@code">
      <assert test="contains($CareTeamCategory, .)">SHALL be selected from ValueSet CareTeamCategory</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.500:2022-06-01-->
    <rule id="CareTeamsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.500') and (@extension = '2022-06-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="CareTeamsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.500') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.500'">@root SHALL = '2.16.840.1.113883.10.20.22.2.500'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="CareTeamsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '85847-2'">@code SHALL = '85847-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CareTeamsSection-errors-entry-primary" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="CareTeamsSection-errors-entry-primary.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01'])">organizer SHALL conform to CareTeamOrganizer</assert>
    </rule>
  </pattern>
  <pattern id="CaregiverCharacteristics-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.72-->
    <rule id="CaregiverCharacteristics-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.72')])=1">Cardinality of templateId:caregiver-characteristics is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-templateId-caregiver-characteristics" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.72')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.72'">@root SHALL = '2.16.840.1.113883.10.20.22.4.72'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:value">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or @codeSystem = '2.16.840.1.113883.6.96'">The code **SHALL** be selected from LOINC (codeSystem: 2.16.840.1.113883.6.1) or SNOMED CT (CodeSystem: 2.16.840.1.113883.6.96) (CONF:81-14600).</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-participant" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:participant">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-participant.time" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:participant/cda:time">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="CaregiverCharacteristics-errors-participant.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]/cda:participant/cda:participantRole">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CAREGIVER'">@classCode SHALL = 'CAREGIVER'</assert>
    </rule>
  </pattern>
  <pattern id="CatalogNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.302:2019-06-21-->
    <rule id="CatalogNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.302') and (@extension = '2019-06-21')])=1">Cardinality of templateId:catalog-num-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CatalogNumberObservation-errors-templateId-catalog-num-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.302') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.302'">@root SHALL = '2.16.840.1.113883.10.20.22.4.302'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="CatalogNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C99286'">@code SHALL = 'C99286'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="CatalogNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CatalogNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="CharacteristicsofHomeEnvironment-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.109-->
    <rule id="CharacteristicsofHomeEnvironment-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.109')])=1">Cardinality of templateId:characteristics-home-env is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-templateId-characteristics-home-env" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.109')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.109'">@root SHALL = '2.16.840.1.113883.10.20.22.4.109'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75274-1'">@code SHALL = '75274-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CharacteristicsofHomeEnvironment-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="ChiefComplaintSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1-->
    <rule id="ChiefComplaintSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ChiefComplaintSection-errors-templateId-section" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]]/cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1'">@root SHALL = '1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ChiefComplaintSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10154-3'">@code SHALL = '10154-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ChiefComplaintandReasonforVisitSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.13-->
    <rule id="ChiefComplaintandReasonforVisitSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.13')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ChiefComplaintandReasonforVisitSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.13')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.13'">@root SHALL = '2.16.840.1.113883.10.20.22.2.13'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ChiefComplaintandReasonforVisitSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '46239-0'">@code SHALL = '46239-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="CommentActivity-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.64-->
    <rule id="CommentActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.64')])=1">Cardinality of templateId:comment-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
    </rule>
    <rule id="CommentActivity-errors-templateId-comment-activity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.64')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.64'">@root SHALL = '2.16.840.1.113883.10.20.22.4.64'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="CommentActivity-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="CommentActivity-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="CommentActivity-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '48767-8'">@code SHALL = '48767-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CommentActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="CommentActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CommentActivity-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="CompanyNameObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.303:2019-06-21-->
    <rule id="CompanyNameObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.303') and (@extension = '2019-06-21')])=1">Cardinality of templateId:company-name-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CompanyNameObservation-errors-templateId-company-name-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.303') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.303'">@root SHALL = '2.16.840.1.113883.10.20.22.4.303'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="CompanyNameObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C54131'">@code SHALL = 'C54131'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="CompanyNameObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CompanyNameObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="ComplicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.37:2015-08-01-->
    <rule id="ComplicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.37') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ComplicationsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.37') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.37'">@root SHALL = '2.16.840.1.113883.10.20.22.2.37'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="ComplicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '55109-3'">@code SHALL = '55109-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ComplicationsSection-errors-entry-problem" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ComplicationsSection-errors-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="ConsultationNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.4:2024-05-01-->
    <rule id="ConsultationNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.4') and (@extension = '2024-05-01')])=1">Cardinality of templateId:consult-note is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:inFulfillmentOf)&gt;=1">Cardinality of inFulfillmentOf is 1..*</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-templateId-consult-note" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.4') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.4'">@root SHALL = '2.16.840.1.113883.10.20.22.1.4'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CALLBCK'">@typeCode SHALL = 'CALLBCK'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
      <assert test="count(cda:scopingOrganization) &lt;= 1">Cardinality of scopingOrganization is 0..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ConsultationNote-errors-participant-callback.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ConsultationNote-errors-inFulfillmentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:inFulfillmentOf">
      <assert test="count(cda:order)=1">Cardinality of order is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-inFulfillmentOf.order" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:inFulfillmentOf/cda:order">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter.encounterParticipant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-componentOf.encompassingEncounter.encounterParticipant.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity SHALL contain an assignedPerson or a representedOrganization or both (CONF:1198-32906).</assert>
    </rule>
    <rule id="ConsultationNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]]">**SHALL** include a Reason for Referral or Reason for Visit section (CONF:1198-9504).</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="count(cda:component)&gt;=5">Cardinality of component is 5..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]])=1">Cardinality of component:hpi is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]) &lt;= 1">Cardinality of component:generalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problems is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:results is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHist is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medicalEquipment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-assessment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])">section SHALL conform to AssessmentSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])">section SHALL conform to AssessmentandPlanSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-reasonForVisit.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])">section SHALL conform to ReasonforVisitSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-hpi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-hpi.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])">section SHALL conform to HistoryofPresentIllnessSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-physicalExam.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])">section SHALL conform to PhysicalExamSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-chiefComplaint.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])">section SHALL conform to ChiefComplaintSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])">section SHALL conform to ChiefComplaintandReasonforVisitSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-familyHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])">section SHALL conform to FamilyHistorySection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-generalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])">section SHALL conform to GeneralStatusSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-pastMedicalHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])">section SHALL conform to PastMedicalHistory</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])">section SHALL conform to ImmunizationsSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])">section SHALL conform to MedicationsSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])">section SHALL conform to ProblemSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])">section SHALL conform to ProceduresSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])">section SHALL conform to ResultsSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-socialHist" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])">section SHALL conform to SocialHistorySection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])">section SHALL conform to VitalSignsSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-functionalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])">section SHALL conform to FunctionalStatusSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-reviewOfSystems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])">section SHALL conform to ReviewofSystemsSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-medicalEquipment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-medicalEquipment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])">section SHALL conform to MedicalEquipmentSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-mentalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])">section SHALL conform to MentalStatusSection</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ConsultationNote-errors-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])">section SHALL conform to NutritionSection</assert>
    </rule>
  </pattern>
  <pattern id="ContinuityofCareDocumentCCD-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.2:2024-05-01-->
    <rule id="ContinuityofCareDocumentCCD-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.2') and (@extension = '2024-05-01')])=1">Cardinality of templateId:CCD is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:documentationOf)=1">Cardinality of documentationOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-templateId-CCD" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.2') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.2'">@root SHALL = '2.16.840.1.113883.10.20.22.1.2'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '34133-9'">@code SHALL = '34133-9'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-author" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:author">
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="count(((cda:assignedPerson | cda:assignedAuthoringDevice))) = 1">There **SHALL** be exactly one assignedAuthor/assignedPerson or exactly one assignedAuthor/assignedAuthoringDevice (CONF:4537-16790).</assert>
      <assert test="cda:assignedPerson or (cda:assignedAuthoringDevice and cda:representedOrganization)">Such assignedAuthors **SHALL** contain (exactly one [1..1] assignedPerson) or (exactly one [1..1] assignedAuthoringDevice and exactly one [1..1] representedOrganization) (CONF:1198-8456).</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRF'">@typeCode SHALL = 'PRF'</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.performer.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="count(cda:component)&gt;=6">Cardinality of component is 6..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problems is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:encounters is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:famHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medEquipment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:payers is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]])=1">Cardinality of component:socialHist is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]])=1">Cardinality of component:vitalSigns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])">section SHALL conform to MedicationsSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])">section SHALL conform to ProblemSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])">section SHALL conform to ProceduresSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])">section SHALL conform to ResultsSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-encounters" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-encounters.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Encounter Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])">section SHALL conform to EncountersSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-famHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-famHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])">section SHALL conform to FamilyHistorySection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-functionalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])">section SHALL conform to FunctionalStatusSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])">section SHALL conform to ImmunizationsSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-medEquipment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-medEquipment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])">section SHALL conform to MedicalEquipmentSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-payers" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])">section SHALL conform to PayersSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-socialHist" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])">section SHALL conform to SocialHistorySection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])">section SHALL conform to VitalSignsSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-mentalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])">section SHALL conform to MentalStatusSection</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-errors-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])">section SHALL conform to NutritionSection</assert>
    </rule>
  </pattern>
  <pattern id="CourseofCareSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.64-->
    <rule id="CourseofCareSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.64')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="CourseofCareSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.64')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.64'">@root SHALL = '2.16.840.1.113883.10.20.22.2.64'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="CourseofCareSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '8648-8'">@code SHALL = '8648-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="CoverageActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.60:2024-05-01-->
    <rule id="CoverageActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.60') and (@extension = '2024-05-01')])=1">Cardinality of templateId:coverage-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')])&gt;=1">Cardinality of entryRelationship:policy is 1..*</assert>
    </rule>
    <rule id="CoverageActivity-errors-templateId-coverage-activity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.60') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.60'">@root SHALL = '2.16.840.1.113883.10.20.22.4.60'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="CoverageActivity-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="CoverageActivity-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="CoverageActivity-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '52556-8'">@code SHALL = '52556-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CoverageActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CoverageActivity-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CoverageActivity-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-entryRelationship-policy" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:sequenceNumber) &lt;= 1">Cardinality of sequenceNumber is 0..1</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-entryRelationship-policy.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="CoverageActivity-errors-entryRelationship-policy.sequenceNumber" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]/cda:sequenceNumber">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="CoverageActivity-errors-entryRelationship-policy.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]/cda:act">
      <assert test="not(cda:participant[@typeCode = 'COV']/cda:participantRole/cda:code[cda:code = 'SELF']) or not(cda:participant[@typeCode = 'HLD'])">When the Subscriber is the patient (COV participant code = 'SELF'), the participant element describing the subscriber **SHALL NOT** be present. This information will be recorded instead in the data elements used to record member information (CONF:4537-17139).</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])">act SHALL conform to PolicyActivity</assert>
    </rule>
  </pattern>
  <pattern id="CriticalityObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.145-->
    <rule id="CriticalityObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.145')])=1">Cardinality of templateId:criticality-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CriticalityObservation-errors-templateId-criticality-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.145')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.145'">@root SHALL = '2.16.840.1.113883.10.20.22.4.145'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="CriticalityObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="CriticalityObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '82606-5'">@code SHALL = '82606-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CriticalityObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CriticalityObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CriticalityObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CriticalityObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($CriticalityObservation, @code)">SHALL be selected from ValueSet CriticalityObservation</assert>
    </rule>
  </pattern>
  <pattern id="CulturalandReligiousObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.111-->
    <rule id="CulturalandReligiousObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.111')])=1">Cardinality of templateId:culturaland-religious-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-templateId-culturaland-religious-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.111')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.111'">@root SHALL = '2.16.840.1.113883.10.20.22.4.111'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75281-6'">@code SHALL = '75281-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="CulturalandReligiousObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]/cda:value">
      <assert test="not(@code) or @codeSystem = '2.16.840.1.113883.6.96'">If value contains a @code, then @codeSystem SHALL = "2.16.840.1.113883.6.96" (CodeSystem: SNOMED-CT  urn:oid:2.16.840.1.113883.6.96 STATIC) (CONF:1098-32487).</assert>
    </rule>
  </pattern>
  <pattern id="DateOfDiagnosisAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.502:2022-06-01-->
    <rule id="DateOfDiagnosisAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.502') and (@extension = '2022-06-01')])=1">Cardinality of templateId:date-of-diagnosis-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-templateId-date-of-diagnosis-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.502') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.502'">@root SHALL = '2.16.840.1.113883.10.20.22.4.502'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
      <assert test="not(@code) or @code = '77975-1'">@code, if present, SHALL = '77975-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DateOfDiagnosisAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="@nullFlavor or string-length(@value) &gt;= 4">**SHALL** be precise to at least the year</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="DeceasedObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.79:2015-08-01-->
    <rule id="DeceasedObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.79') and (@extension = '2015-08-01')])=1">Cardinality of templateId:deceased-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]) &lt;= 1">Cardinality of entryRelationship:problemObservation is 0..1</assert>
    </rule>
    <rule id="DeceasedObservation-errors-templateId-deceased-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.79') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.79'">@root SHALL = '2.16.840.1.113883.10.20.22.4.79'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="DeceasedObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="DeceasedObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="DeceasedObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DeceasedObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DeceasedObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DeceasedObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
    </rule>
    <rule id="DeceasedObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:value">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '419099009'">@code SHALL = '419099009'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="DeceasedObservation-errors-entryRelationship-problemObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CAUS'">@typeCode SHALL = 'CAUS'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="DeceasedObservation-errors-entryRelationship-problemObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="DeceasedObservation-errors-entryRelationship-problemObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="DeviceIdentifierObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.304:2022-06-01-->
    <rule id="DeviceIdentifierObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.304') and (@extension = '2022-06-01')])=1">Cardinality of templateId:device-id-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-templateId-device-id-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.304') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.304'">@root SHALL = '2.16.840.1.113883.10.20.22.4.304'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C101722'">@code SHALL = 'C101722'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:value">
      <assert test="count(@displayable)=1">Cardinality of @displayable is 1..1</assert>
      <assert test="@displayable = 'true'">@displayable SHALL = 'true'</assert>
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="count(@extension) &lt;= 1">Cardinality of @extension is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="DisabilityStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.505:2023-05-01-->
    <rule id="DisabilityStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.505') and (@extension = '2023-05-01')])=1">Cardinality of templateId:disability-status-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-templateId-disability-status-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.505') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.505'">@root SHALL = '2.16.840.1.113883.10.20.22.4.505'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '89571-4'">@code SHALL = '89571-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-entryRelationship-assessmentScaleObs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-entryRelationship-assessmentScaleObs.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="DisabilityStatusObservation-errors-entryRelationship-assessmentScaleObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
  </pattern>
  <pattern id="DischargeDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.24:2015-08-01-->
    <rule id="DischargeDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.24') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry) &lt;= 1">Cardinality of entry is 0..1</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.24') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.24'">@root SHALL = '2.16.840.1.113883.10.20.22.2.24'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11535-2'">@code SHALL = '11535-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@code = '78375-3') and (@codeSystem = '2.16.840.1.113883.6.1')])=1">Cardinality of translation:translation1 is 1..1</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-code.translation-translation1" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:code/cda:translation[(@code = '78375-3') and (@codeSystem = '2.16.840.1.113883.6.1')]">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '78375-3'">@code SHALL = '78375-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-entry" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:entry">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-errors-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01'])">act SHALL conform to HospitalDischargeDiagnosis</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedication-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.35:2016-03-01-->
    <rule id="DischargeMedication-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.35') and (@extension = '2016-03-01')])=1">Cardinality of templateId:discharge-med is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')])&gt;=1">Cardinality of entryRelationship:medicationActivity is 1..*</assert>
    </rule>
    <rule id="DischargeMedication-errors-templateId-discharge-med" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.35') and (@extension = '2016-03-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.35'">@root SHALL = '2.16.840.1.113883.10.20.22.4.35'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2016-03-01'">@extension SHALL = '2016-03-01'</assert>
    </rule>
    <rule id="DischargeMedication-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="DischargeMedication-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="DischargeMedication-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10183-2'">@code SHALL = '10183-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)=1">Cardinality of translation is 1..1</assert>
    </rule>
    <rule id="DischargeMedication-errors-code.translation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:code/cda:translation">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75311-1'">@code SHALL = '75311-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DischargeMedication-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DischargeMedication-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DischargeMedication-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="DischargeMedication-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="DischargeMedication-errors-entryRelationship-medicationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="DischargeMedication-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.11.1:2015-08-01-->
    <rule id="DischargeMedicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Discharge Medication</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.11.1') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="DischargeMedicationsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.11.1') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.11.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.11.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="DischargeMedicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10183-2'">@code SHALL = '10183-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@code = '75311-1') and (@codeSystem = '2.16.840.1.113883.6.1')])=1">Cardinality of translation:translation1 is 1..1</assert>
    </rule>
    <rule id="DischargeMedicationsSection-errors-code.translation-translation1" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:code/cda:translation[(@code = '75311-1') and (@codeSystem = '2.16.840.1.113883.6.1')]">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75311-1'">@code SHALL = '75311-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="DischargeMedicationsSection-errors-entry-dischargeMed" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="DischargeMedicationsSection-errors-entry-dischargeMed.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01'])">act SHALL conform to DischargeMedication</assert>
    </rule>
  </pattern>
  <pattern id="DischargeSummary-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.8:2024-05-01-->
    <rule id="DischargeSummary-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.8') and (@extension = '2024-05-01')])=1">Cardinality of templateId:discharge-summary is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-templateId-discharge-summary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.8') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.8'">@root SHALL = '2.16.840.1.113883.10.20.22.1.8'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="DischargeSummary-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($DischargeSummaryDocumentTypeCode, @code)">SHALL be selected from ValueSet DischargeSummaryDocumentTypeCode</assert>
    </rule>
    <rule id="DischargeSummary-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is IND, associatedEntity/@classCode **SHALL** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes STATIC 2011-09-30 (CONF:1198-8469).</assert>
    </rule>
    <rule id="DischargeSummary-errors-participant.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:dischargeDispositionCode)=1">Cardinality of dischargeDispositionCode is 1..1</assert>
      <assert test="count(cda:responsibleParty) &lt;= 1">Cardinality of responsibleParty is 0..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.responsibleParty" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.responsibleParty.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity SHALL contain an assignedPerson or a representedOrganization or both (CONF:1198-32905).</assert>
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity **SHALL** contain an assignedPerson or a representedOrganization or both (CONF:1198-32898).</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.encounterParticipant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-componentOf.encompassingEncounter.encounterParticipant.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity **SHALL** contain an assignedPerson or a representedOrganization or both (CONF:1198-32899).</assert>
    </rule>
    <rule id="DischargeSummary-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="count(cda:component)&gt;=7">Cardinality of component is 7..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)])]])=1">Cardinality of component:hospitalCourse is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]])=1">Cardinality of component:dischargeDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:dischargeMeds is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]])=1">Cardinality of component:planOfTreatment is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:hpi is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionDx is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionMeds is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)])]])=1">Cardinality of component:hospitalConsults is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)])]]) &lt;= 1">Cardinality of component:dischargeInstructions is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)])]]) &lt;= 1">Cardinality of component:dischargePhysical is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)])]]) &lt;= 1">Cardinality of component:dischargeStudies is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunization is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:problems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]])=1">Cardinality of component:procedures is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHist is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hospitalCourse" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hospitalCourse.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)])">section SHALL conform to HospitalCourseSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])">section SHALL conform to DischargeDiagnosisSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeMeds" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeMeds.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Discharge Medication</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01'])">section SHALL conform to DischargeMedicationsSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-chiefComplaint.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])">section SHALL conform to ChiefComplaintSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])">section SHALL conform to ChiefComplaintandReasonforVisitSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])">section SHALL conform to NutritionSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-familyHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])">section SHALL conform to FamilyHistorySection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-functionalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])">section SHALL conform to FunctionalStatusSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-pastMedicalHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])">section SHALL conform to PastMedicalHistory</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hpi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hpi.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])">section SHALL conform to HistoryofPresentIllnessSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-admissionDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-admissionDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])">section SHALL conform to AdmissionDiagnosisSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-admissionMeds" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-admissionMeds.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])">section SHALL conform to AdmissionMedicationsSectionEntriesOptional</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hospitalConsults" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-hospitalConsults.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)])">section SHALL conform to HospitalConsultationsSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeInstructions" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeInstructions.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)])">section SHALL conform to HospitalDischargeInstructionsSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargePhysical" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargePhysical.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)])">section SHALL conform to HospitalDischargePhysicalSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeStudies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-dischargeStudies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)])">section SHALL conform to HospitalDischargeStudiesSummarySection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-immunization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-immunization.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])">section SHALL conform to ImmunizationsSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])">section SHALL conform to ProblemSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])">section SHALL conform to ProceduresSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-reasonForVisit.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])">section SHALL conform to ReasonforVisitSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-reviewOfSystems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])">section SHALL conform to ReviewofSystemsSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-socialHist" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])">section SHALL conform to SocialHistorySection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])">section SHALL conform to VitalSignsSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])">section SHALL conform to ResultsSection</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="DischargeSummary-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
  </pattern>
  <pattern id="DistinctIdentificationCodeObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.308:2019-06-21-->
    <rule id="DistinctIdentificationCodeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.308') and (@extension = '2019-06-21')])=1">Cardinality of templateId:distinct-id-code-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="DistinctIdentificationCodeObservation-errors-templateId-distinct-id-code-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.308') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.308'">@root SHALL = '2.16.840.1.113883.10.20.22.4.308'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="DistinctIdentificationCodeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C113843'">@code SHALL = 'C113843'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="DistinctIdentificationCodeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DistinctIdentificationCodeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="DrugMonitoringAct-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.123-->
    <rule id="DrugMonitoringAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.123')])=1">Cardinality of templateId:drug-monitoring-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
      <assert test="count(cda:participant[(@typeCode = 'RESP')])&gt;=1">Cardinality of participant:responsible is 1..*</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-templateId-drug-monitoring-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.123')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.123'">@root SHALL = '2.16.840.1.113883.10.20.22.4.123'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '395170001'">@code SHALL = '395170001'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RESP'">@typeCode SHALL = 'RESP'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole/cda:playingEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PSN'">@classCode SHALL = 'PSN'</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible.participantRole.playingEntity.classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole/cda:playingEntity/@classCode">
      <assert test="contains($EntityClassRoot, .)">SHALL be selected from ValueSet EntityClassRoot</assert>
    </rule>
    <rule id="DrugMonitoringAct-errors-participant-responsible.participantRole.playingEntity.name" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole/cda:playingEntity/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
  </pattern>
  <pattern id="DrugVehicle-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.24-->
    <rule id="DrugVehicle-errors-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.24')])=1">Cardinality of templateId:drug-vehicle is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="DrugVehicle-errors-templateId-drug-vehicle" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.24')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.24'">@root SHALL = '2.16.840.1.113883.10.20.22.4.24'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="DrugVehicle-errors-code" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '412307009'">@code SHALL = '412307009'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="DrugVehicle-errors-playingEntity" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)]]/cda:playingEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:name) &lt;= 1">Cardinality of name is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="EncounterActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.49:2015-08-01-->
    <rule id="EncounterActivity-errors-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.49') and (@extension = '2015-08-01')])=1">Cardinality of templateId:encounter-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ENC'">@classCode SHALL = 'ENC'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(sdtc:dischargeDispositionCode) &lt;= 1">Cardinality of dischargeDispositionCode is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-templateId-encounter-activity" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.49') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.49'">@root SHALL = '2.16.840.1.113883.10.20.22.4.49'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="EncounterActivity-errors-moodCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentEncounterMood, .)">SHALL be selected from ValueSet XDocumentEncounterMood</assert>
    </rule>
    <rule id="EncounterActivity-errors-code" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code">
      <assert test="count(cda:originalText) &lt;= 1">Cardinality of originalText is 0..1</assert>
      <assert test="count(cda:translation) &lt;= 1">Cardinality of translation is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-code.originalText" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code/cda:originalText">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-code.originalText.reference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code/cda:originalText/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EncounterActivity-errors-text" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-text.reference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EncounterActivity-errors-performer" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-performer.assignedEntity" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:performer/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-participant-location" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:participant[cda:participantRole[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])] and (@typeCode = 'LOC')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'LOC'">@typeCode SHALL = 'LOC'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:participant[cda:participantRole[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])] and (@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])">participantRole SHALL conform to ServiceDeliveryLocation</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-indication" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-indication.typeCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-diagnosis" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="EncounterActivity-errors-entryRelationship-diagnosis.act" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])">act SHALL conform to EncounterDiagnosis</assert>
    </rule>
  </pattern>
  <pattern id="EncounterDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.80:2024-05-01-->
    <rule id="EncounterDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.80') and (@extension = '2024-05-01')])=1">Cardinality of templateId:encounter-dx is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-templateId-encounter-dx" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.80') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.80'">@root SHALL = '2.16.840.1.113883.10.20.22.4.80'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '29308-4'">@code SHALL = '29308-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-entryRelationship-problemObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="EncounterDiagnosis-errors-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="EncountersSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.22.1:2015-08-01-->
    <rule id="EncountersSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Encounter Activity</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.22.1') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="EncountersSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.22.1') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.22.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.22.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="EncountersSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '46240-8'">@code SHALL = '46240-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="EncountersSection-errors-entry-encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:entry[cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])]]">
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="EncountersSection-errors-entry-encounter.encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:entry[cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])]]/cda:encounter">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])">encounter SHALL conform to EncounterActivity</assert>
    </rule>
  </pattern>
  <pattern id="EntryReference-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.122-->
    <rule id="EntryReference-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.122')])=1">Cardinality of templateId:entry-reference is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="EntryReference-errors-templateId-entry-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.122')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.122'">@root SHALL = '2.16.840.1.113883.10.20.22.4.122'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="EntryReference-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="EntryReference-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="EntryReference-errors-id" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:id">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
    </rule>
    <rule id="EntryReference-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:code">
      <assert test="count(@nullFlavor)=1">Cardinality of @nullFlavor is 1..1</assert>
      <assert test="@nullFlavor = 'NP'">@nullFlavor SHALL = 'NP'</assert>
    </rule>
    <rule id="EntryReference-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EntryReference-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EntryReference-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="EstimatedDateofDelivery-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.1-->
    <rule id="EstimatedDateofDelivery-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]">
      <assert test="count(cda:typeId)=0">Cardinality of typeId is 0..0</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.15.3.1')])=1">Cardinality of templateId:est-date-delivery is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:derivationExpr)=0">Cardinality of derivationExpr is 0..0</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=0">Cardinality of effectiveTime is 0..0</assert>
      <assert test="count(cda:priorityCode)=0">Cardinality of priorityCode is 0..0</assert>
      <assert test="count(cda:repeatNumber)=0">Cardinality of repeatNumber is 0..0</assert>
      <assert test="count(cda:languageCode)=0">Cardinality of languageCode is 0..0</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:interpretationCode)=0">Cardinality of interpretationCode is 0..0</assert>
      <assert test="count(cda:methodCode)=0">Cardinality of methodCode is 0..0</assert>
      <assert test="count(cda:targetSiteCode)=0">Cardinality of targetSiteCode is 0..0</assert>
      <assert test="count(cda:subject)=0">Cardinality of subject is 0..0</assert>
      <assert test="count(cda:specimen)=0">Cardinality of specimen is 0..0</assert>
      <assert test="count(cda:performer)=0">Cardinality of performer is 0..0</assert>
      <assert test="count(cda:informant)=0">Cardinality of informant is 0..0</assert>
      <assert test="count(cda:participant)=0">Cardinality of participant is 0..0</assert>
      <assert test="count(cda:entryRelationship)=0">Cardinality of entryRelationship is 0..0</assert>
      <assert test="count(cda:reference)=0">Cardinality of reference is 0..0</assert>
      <assert test="count(cda:precondition)=0">Cardinality of precondition is 0..0</assert>
      <assert test="count(cda:referenceRange)=0">Cardinality of referenceRange is 0..0</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-templateId-est-date-delivery" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.15.3.1')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.15.3.1'">@root SHALL = '2.16.840.1.113883.10.20.15.3.1'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11778-8'">@code SHALL = '11778-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="EstimatedDateofDelivery-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="ExpirationDateObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.309:2019-06-21-->
    <rule id="ExpirationDateObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.309') and (@extension = '2019-06-21')])=1">Cardinality of templateId:exp-date-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-templateId-exp-date-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.309') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.309'">@root SHALL = '2.16.840.1.113883.10.20.22.4.309'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C101670'">@code SHALL = 'C101670'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ExpirationDateObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ExternalDocumentReference-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.115:2014-06-09-->
    <rule id="ExternalDocumentReference-errors-root" context="cda:externalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.115') and (@extension = '2014-06-09')])=1">Cardinality of templateId:external-doc-ref is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'DOCCLIN'">@classCode SHALL = 'DOCCLIN'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:setId) &lt;= 1">Cardinality of setId is 0..1</assert>
      <assert test="count(cda:versionNumber) &lt;= 1">Cardinality of versionNumber is 0..1</assert>
    </rule>
    <rule id="ExternalDocumentReference-errors-templateId-external-doc-ref" context="cda:externalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.115') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.115'">@root SHALL = '2.16.840.1.113883.10.20.22.4.115'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="ExternalDocumentReference-errors-classCode" context="cda:externalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($ActClassDocument, .)">SHALL be selected from ValueSet ActClassDocument</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryDeathObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.47-->
    <rule id="FamilyHistoryDeathObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.47')])=1">Cardinality of templateId:family-history-death-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-templateId-family-history-death-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.47')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.47'">@root SHALL = '2.16.840.1.113883.10.20.22.4.47'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FamilyHistoryDeathObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]/cda:value">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '419099009'">@code SHALL = '419099009'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.46:2015-08-01-->
    <rule id="FamilyHistoryObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.46') and (@extension = '2015-08-01')])=1">Cardinality of templateId:family-history-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]) &lt;= 1">Cardinality of entryRelationship:ageObservation is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]) &lt;= 1">Cardinality of entryRelationship:deathObservation is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-templateId-family-history-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.46') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.46'">@root SHALL = '2.16.840.1.113883.10.20.22.4.46'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-ageObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-ageObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-ageObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])">observation SHALL conform to AgeObservation</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-deathObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CAUS'">@typeCode SHALL = 'CAUS'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-deathObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="FamilyHistoryObservation-errors-entryRelationship-deathObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])">observation SHALL conform to FamilyHistoryDeathObservation</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.45:2015-08-01-->
    <rule id="FamilyHistoryOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.45') and (@extension = '2015-08-01')])=1">Cardinality of templateId:family-history-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:subject)=1">Cardinality of subject is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-templateId-family-history-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.45') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.45'">@root SHALL = '2.16.840.1.113883.10.20.22.4.45'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject">
      <assert test="count(cda:relatedSubject)=1">Cardinality of relatedSubject is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject.relatedSubject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PRS'">@classCode SHALL = 'PRS'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:subject) &lt;= 1">Cardinality of subject is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject.relatedSubject.subject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:subject">
      <assert test="count(sdtc:id) &lt;= 1">Cardinality of id is 0..1</assert>
      <assert test="count(cda:administrativeGenderCode)=1">Cardinality of administrativeGenderCode is 1..1</assert>
      <assert test="count(cda:birthTime) &lt;= 1">Cardinality of birthTime is 0..1</assert>
      <assert test="count(sdtc:deceasedInd) &lt;= 1">Cardinality of deceasedInd is 0..1</assert>
      <assert test="count(sdtc:deceasedTime) &lt;= 1">Cardinality of deceasedTime is 0..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-subject.relatedSubject.subject.administrativeGenderCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:subject/cda:administrativeGenderCode">
      <assert test="@nullFlavor or contains($AdministrativeGenderHL7V3, @code)">SHALL be selected from ValueSet AdministrativeGenderHL7V3</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-component" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:component">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-errors-component.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:component/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01'])">observation SHALL conform to FamilyHistoryObservation</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistorySection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.15:2015-08-01-->
    <rule id="FamilyHistorySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.15') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="FamilyHistorySection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.15') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.15'">@root SHALL = '2.16.840.1.113883.10.20.22.2.15'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="FamilyHistorySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10157-6'">@code SHALL = '10157-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="FamilyHistorySection-errors-entry-organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="FamilyHistorySection-errors-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])">organizer SHALL conform to FamilyHistoryOrganizer</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.67:2014-06-09-->
    <rule id="FunctionalStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.67') and (@extension = '2014-06-09')])=1">Cardinality of templateId:functional-status-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:nonMedSupply is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:caregiverCharacteristics is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]) &lt;= 1">Cardinality of entryRelationship:assessmentScaleObservation is 0..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-templateId-functional-status-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.67') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.67'">@root SHALL = '2.16.840.1.113883.10.20.22.4.67'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '54522-8'">@code SHALL = '54522-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-nonMedSupply" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-nonMedSupply.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-nonMedSupply.supply" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])">supply SHALL conform to NonMedicinalSupplyActivity</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-caregiverCharacteristics" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-caregiverCharacteristics.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-caregiverCharacteristics.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])">observation SHALL conform to CaregiverCharacteristics</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-assessmentScaleObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-assessmentScaleObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="FunctionalStatusObservation-errors-entryRelationship-assessmentScaleObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.66:2014-06-09-->
    <rule id="FunctionalStatusOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.66') and (@extension = '2014-06-09')])=1">Cardinality of templateId:functional-status-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:component)&gt;=2">Cardinality of component is 2..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])]])&gt;=1">Cardinality of component:functionalStatus is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])]])&gt;=1">Cardinality of component:selfCare is 1..*</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-templateId-functional-status-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.66') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.66'">@root SHALL = '2.16.840.1.113883.10.20.22.4.66'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-component-functionalStatus" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-component-functionalStatus.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])">observation SHALL conform to FunctionalStatusObservation</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-component-selfCare" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-errors-component-selfCare.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])">observation SHALL conform to SelfCareActivitiesADLandIADL</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.14:2014-06-09-->
    <rule id="FunctionalStatusSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.14') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.14') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.14'">@root SHALL = '2.16.840.1.113883.10.20.22.2.14'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '47420-5'">@code SHALL = '47420-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-funcStatusOrganizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-funcStatusOrganizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09'])">organizer SHALL conform to FunctionalStatusOrganizer</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-funcStatusObs" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-funcStatusObs.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])">observation SHALL conform to FunctionalStatusObservation</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-caregiverCharacteristics" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-caregiverCharacteristics.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])">observation SHALL conform to CaregiverCharacteristics</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-assessmentScale" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-assessmentScale.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-nonMedSupply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-nonMedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])">supply SHALL conform to NonMedicinalSupplyActivity</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-selfCareActivity" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-selfCareActivity.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])">observation SHALL conform to SelfCareActivitiesADLandIADL</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-sensoryStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="FunctionalStatusSection-errors-entry-sensoryStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])">observation SHALL conform to SensoryStatus</assert>
    </rule>
  </pattern>
  <pattern id="GenderIdentityObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.34.3.45:2023-05-01-->
    <rule id="GenderIdentityObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.34.3.45') and (@extension = '2023-05-01')])=1">Cardinality of templateId:gender-identity-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-templateId-gender-identity-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.34.3.45') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.34.3.45'">@root SHALL = '2.16.840.1.113883.10.20.34.3.45'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '76691-5'">@code SHALL = '76691-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="GenderIdentityObservation-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="@nullFlavor or contains($GenderIdentity, @code)">SHALL be selected from ValueSet GenderIdentity</assert>
    </rule>
  </pattern>
  <pattern id="GeneralStatusSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.2.5-->
    <rule id="GeneralStatusSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.2.5')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="GeneralStatusSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.2.5')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.2.5'">@root SHALL = '2.16.840.1.113883.10.20.2.5'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="GeneralStatusSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10210-3'">@code SHALL = '10210-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="GoalObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.121:2022-06-01-->
    <rule id="GoalObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.121') and (@extension = '2022-06-01')])=1">Cardinality of templateId:goal-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'GOL'">@moodCode SHALL = 'GOL'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:priorityPreference is 0..1</assert>
    </rule>
    <rule id="GoalObservation-errors-templateId-goal-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.121') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.121'">@root SHALL = '2.16.840.1.113883.10.20.22.4.121'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="GoalObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="GoalObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="GoalObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="GoalObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-statusCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="GoalObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-refersTo" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-refersTo.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-refersTo.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'REFR')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-componentEntry" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'COMP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-componentEntry.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'COMP')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-componentEntry.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'COMP')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-priorityPreference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-priorityPreference.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-priorityPreference.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-goal" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-goal.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-goal.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])">observation SHALL conform to GoalObservation</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-progressTowardGoal" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])] and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-progressTowardGoal.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])] and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="GoalObservation-errors-entryRelationship-progressTowardGoal.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])">observation SHALL conform to ProgressTowardGoalObservation</assert>
    </rule>
    <rule id="GoalObservation-errors-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:reference">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="GoalObservation-errors-reference.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:reference/@typeCode">
      <assert test="contains($XActRelationshipExternalReference, .)">SHALL be selected from ValueSet XActRelationshipExternalReference</assert>
    </rule>
    <rule id="GoalObservation-errors-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="GoalsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.60-->
    <rule id="GoalsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Goal Observation</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.60')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="GoalsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.60')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.60'">@root SHALL = '2.16.840.1.113883.10.20.22.2.60'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="GoalsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '61146-7'">@code SHALL = '61146-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="GoalsSection-errors-entry-goal" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="GoalsSection-errors-entry-goal.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])">observation SHALL conform to GoalObservation</assert>
    </rule>
  </pattern>
  <pattern id="HandoffCommunicationParticipants-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.141-->
    <rule id="HandoffCommunicationParticipants-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.141')])=1">Cardinality of templateId:handoff-comm-participants is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
      <assert test="count(cda:participant[(@typeCode = 'IRCP')])&gt;=1">Cardinality of participant:infoRecipient is 1..*</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-templateId-handoff-comm-participants" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.141')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.141'">@root SHALL = '2.16.840.1.113883.10.20.22.4.141'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '432138007'">@code SHALL = '432138007'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IRCP'">@typeCode SHALL = 'IRCP'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:playingEntity) &lt;= 1">Cardinality of playingEntity is 0..1</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-errors-participant-infoRecipient.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.132:2022-06-01-->
    <rule id="HealthConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.132') and (@extension = '2022-06-01')])=1">Cardinality of templateId:health-concern-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-templateId-health-concern-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.132') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.132'">@root SHALL = '2.16.840.1.113883.10.20.22.4.132'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="HealthConcernAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="HealthConcernAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="HealthConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75310-3'">@code SHALL = '75310-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HealthConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="HealthConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-observations" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:organizer) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-observations.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:organizer) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-observations.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:organizer) and (@typeCode = 'REFR')]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to ProblemObservation or AllergyIntoleranceObservation or AssessmentScaleObservation or SelfCareActivitiesADLandIADL or MentalStatusObservation or SmokingStatus or FunctionalStatusObservation or NutritionAssessment or PregnancyObservation or ReactionObservation or ResultObservation or SensoryStatus or SocialHistoryObservation or SubstanceOrDeviceAllergyIntoleranceObservation or VitalSignObservation or LongitudinalCareWoundObservation or ProblemObservation or CaregiverCharacteristics or CulturalandReligiousObservation or CharacteristicsofHomeEnvironment or NutritionalStatusObservation or PriorityPreference</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-acts" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-acts.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-acts.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EncounterDiagnosis or HospitalAdmissionDiagnosis or PostprocedureDiagnosis or PreoperativeDiagnosis or EntryReference</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-organizers" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])] and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-organizers.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])] and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-organizers.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])] and (@typeCode = 'REFR')]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])">organizer SHALL conform to FamilyHistoryOrganizer or ResultOrganizer</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-related-entries" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-related-entries.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-related-entries.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-component-health-concern-acts" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'COMP')]">
      <let name="r1" value="cda:act/cda:id[1]/@root"/>
      <let name="r2" value="cda:act/cda:id[1]/@extension"/>
      <assert test="/cda:ClinicalDocument//cda:act[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.132' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2]]">The Entry Reference template **SHALL** contain an id that references a Health Concern Act (CONF:4515-32745).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-component-health-concern-acts.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'COMP')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="HealthConcernAct-errors-entryRelationship-component-health-concern-acts.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'COMP')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="HealthConcernAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:reference">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="HealthConcernAct-errors-reference.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:reference/@typeCode">
      <assert test="contains($XActRelationshipExternalReference, .)">SHALL be selected from ValueSet XActRelationshipExternalReference</assert>
    </rule>
    <rule id="HealthConcernAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.58:2015-08-01-->
    <rule id="HealthConcernsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Health Concern Act</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.58') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.58') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.58'">@root SHALL = '2.16.840.1.113883.10.20.22.2.58'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75310-3'">@code SHALL = '75310-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-healthStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])] and not(cda:act)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-healthStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])">observation SHALL conform to HealthStatusObservation</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-healthConcern" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-healthConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01'])">act SHALL conform to HealthConcernAct</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-riskConcern" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="HealthConcernsSection-errors-entry-riskConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01'])">act SHALL conform to RiskConcernAct</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusEvaluationsandOutcomesSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.61-->
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]">
      <assert test="@nullFlavor or cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]]">If section/@nullFlavor is not present, SHALL contain at least one Outcome Observation</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.61')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.61')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.61'">@root SHALL = '2.16.840.1.113883.10.20.22.2.61'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11383-7'">@code SHALL = '11383-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-entry-outcome" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="HealthStatusEvaluationsandOutcomesSection-errors-entry-outcome.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)])">observation SHALL conform to OutcomeObservation</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.5:2014-06-09-->
    <rule id="HealthStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.5') and (@extension = '2014-06-09')])=1">Cardinality of templateId:health-status-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-templateId-health-status-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.5') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.5'">@root SHALL = '2.16.840.1.113883.10.20.22.4.5'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11323-3'">@code SHALL = '11323-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="HealthStatusObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]/cda:value">
      <assert test="@nullFlavor or contains($HealthStatus, @code)">SHALL be selected from ValueSet HealthStatus</assert>
    </rule>
  </pattern>
  <pattern id="HighestPressureUlcerStage-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.77-->
    <rule id="HighestPressureUlcerStage-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.77')])=1">Cardinality of templateId:highest-pressure-ulcer-stage is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-templateId-highest-pressure-ulcer-stage" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.77')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.77'">@root SHALL = '2.16.840.1.113883.10.20.22.4.77'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '420905001'">@code SHALL = '420905001'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HighestPressureUlcerStage-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="HistoryandPhysical-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.3:2024-05-01-->
    <rule id="HistoryandPhysical-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.3') and (@extension = '2024-05-01')])=1">Cardinality of templateId:history-physical is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-templateId-history-physical" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.3') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.3'">@root SHALL = '2.16.840.1.113883.10.20.22.1.3'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($HPDocumentType, @code)">SHALL be selected from ValueSet HPDocumentType</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:responsibleParty) &lt;= 1">Cardinality of responsibleParty is 0..1</assert>
      <assert test="count(cda:location) &lt;= 1">Cardinality of location is 0..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter.responsibleParty" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty">
      <assert test="cda:assignedEntity/cda:assignedPerson or cda:assignedEntity/cda:representedOrganization">The responsibleParty element, if present, **SHALL** contain an assignedEntity element, which **SHALL** contain an assignedPerson element, a representedOrganization element, or both (CONF:1198-8348).</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-componentOf.encompassingEncounter.encounterParticipant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant">
      <assert test="cda:assignedEntity/cda:assignedPerson or cda:assignedEntity/cda:representedOrganization">An encounterParticipant element, if present, SHALL contain an assignedEntity element, which SHALL contain an assignedPerson element, a representedOrganization element, or both (CONF:1198-8343).</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]] or cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]]">This structuredBody **SHALL** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) or a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12).</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="count(cda:component)&gt;=12">Cardinality of component is 12..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]])=1">Cardinality of component:familyHistory is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]])=1">Cardinality of component:generalStatus is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]])=1">Cardinality of component:pastMedicalHistory is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:historyPresentIllness is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:instructions is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]])=1">Cardinality of component:physicalExam is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:problems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]])=1">Cardinality of component:reviewOfSystems is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]])=1">Cardinality of component:socialHistory is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]])=1">Cardinality of component:vitalSigns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-assessment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])">section SHALL conform to AssessmentSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])">section SHALL conform to AssessmentandPlanSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-chiefComplaint.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])">section SHALL conform to ChiefComplaintSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])">section SHALL conform to ChiefComplaintandReasonforVisitSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-familyHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])">section SHALL conform to FamilyHistorySection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-generalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])">section SHALL conform to GeneralStatusSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-pastMedicalHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])">section SHALL conform to PastMedicalHistory</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-historyPresentIllness" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-historyPresentIllness.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])">section SHALL conform to HistoryofPresentIllnessSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])">section SHALL conform to ImmunizationsSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-instructions" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-instructions.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Instruction</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])">section SHALL conform to InstructionsSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])">section SHALL conform to MedicationsSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-physicalExam.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])">section SHALL conform to PhysicalExamSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])">section SHALL conform to ProblemSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])">section SHALL conform to ProceduresSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-reasonForVisit.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])">section SHALL conform to ReasonforVisitSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])">section SHALL conform to ResultsSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-reviewOfSystems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])">section SHALL conform to ReviewofSystemsSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])">section SHALL conform to SocialHistorySection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])">section SHALL conform to VitalSignsSection</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="HistoryandPhysical-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
  </pattern>
  <pattern id="HistoryofPresentIllnessSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.4-->
    <rule id="HistoryofPresentIllnessSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.4')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HistoryofPresentIllnessSection-errors-templateId-section" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]/cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.4')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '1.3.6.1.4.1.19376.1.5.3.1.3.4'">@root SHALL = '1.3.6.1.4.1.19376.1.5.3.1.3.4'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HistoryofPresentIllnessSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10164-2'">@code SHALL = '10164-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalAdmissionDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.34:2015-08-01-->
    <rule id="HospitalAdmissionDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.34') and (@extension = '2015-08-01')])=1">Cardinality of templateId:hospital-admission-dx is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-templateId-hospital-admission-dx" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.34') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.34'">@root SHALL = '2.16.840.1.113883.10.20.22.4.34'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '46241-6'">@code SHALL = '46241-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-entryRelationship-problemObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-errors-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="HospitalConsultationsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.42-->
    <rule id="HospitalConsultationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.42')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalConsultationsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.42')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.42'">@root SHALL = '2.16.840.1.113883.10.20.22.2.42'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HospitalConsultationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.42' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '18841-7'">@code SHALL = '18841-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalCourseSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.5-->
    <rule id="HospitalCourseSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.5')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalCourseSection-errors-templateId-section" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)]]/cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.5')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '1.3.6.1.4.1.19376.1.5.3.1.3.5'">@root SHALL = '1.3.6.1.4.1.19376.1.5.3.1.3.5'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HospitalCourseSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.5' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '8648-8'">@code SHALL = '8648-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.33:2015-08-01-->
    <rule id="HospitalDischargeDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.33') and (@extension = '2015-08-01')])=1">Cardinality of templateId:hospital-discharge-dx is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-templateId-hospital-discharge-dx" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.33') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.33'">@root SHALL = '2.16.840.1.113883.10.20.22.4.33'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11535-2'">@code SHALL = '11535-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-entryRelationship-problemObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-errors-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeInstructionsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.41-->
    <rule id="HospitalDischargeInstructionsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.41')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalDischargeInstructionsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.41')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.41'">@root SHALL = '2.16.840.1.113883.10.20.22.2.41'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HospitalDischargeInstructionsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.41' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '8653-8'">@code SHALL = '8653-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargePhysicalSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.26-->
    <rule id="HospitalDischargePhysicalSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.26')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalDischargePhysicalSection-errors-templateId-section" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)]]/cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.26')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '1.3.6.1.4.1.19376.1.5.3.1.3.26'">@root SHALL = '1.3.6.1.4.1.19376.1.5.3.1.3.26'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HospitalDischargePhysicalSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.26' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10184-0'">@code SHALL = '10184-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeStudiesSummarySection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.16-->
    <rule id="HospitalDischargeStudiesSummarySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.16')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="HospitalDischargeStudiesSummarySection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.16')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.16'">@root SHALL = '2.16.840.1.113883.10.20.22.2.16'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="HospitalDischargeStudiesSummarySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.16' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11493-4'">@code SHALL = '11493-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.52:2015-08-01-->
    <rule id="ImmunizationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.52') and (@extension = '2015-08-01')])=1">Cardinality of templateId:immunization-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(@negationInd)=1">Cardinality of @negationInd is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:approachSiteCode) &lt;= 1">Cardinality of approachSiteCode is 0..1</assert>
      <assert test="count(cda:doseQuantity) &lt;= 1">Cardinality of doseQuantity is 0..1</assert>
      <assert test="count(cda:administrationUnitCode) &lt;= 1">Cardinality of administrationUnitCode is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:performer) &lt;= 1">Cardinality of performer is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:medSupplyOrder is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]) &lt;= 1">Cardinality of entryRelationship:medDispense is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:reactionObs is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:immunizationNotGiven is 0..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-templateId-immunization-activity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.52') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.52'">@root SHALL = '2.16.840.1.113883.10.20.22.4.52'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-statusCode.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-repeatNumber" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:repeatNumber">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:doseQuantity">
      <assert test="count(@unit) &lt;= 1">Cardinality of @unit is 0..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-administrationUnitCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:administrationUnitCode">
      <assert test="@nullFlavor or contains($AdministrationUnitDoseForm, @code)">SHALL be selected from ValueSet AdministrationUnitDoseForm</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-participant-drugVehicle" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:participant[(@typeCode = 'CSM')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CSM'">@typeCode SHALL = 'CSM'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-participant-drugVehicle.participantRole" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)])">participantRole SHALL conform to DrugVehicle</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-indication.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-indication.observation.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59785-6'">@code SHALL = '59785-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-instruction.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medSupplyOrder" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medSupplyOrder.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medSupplyOrder.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])">supply SHALL conform to MedicationSupplyOrder</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medDispense" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medDispense.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-medDispense.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])">supply SHALL conform to MedicationDispense</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-reactionObs" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CAUS'">@typeCode SHALL = 'CAUS'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-reactionObs.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-reactionObs.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])">observation SHALL conform to ReactionObservation</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-immunizationNotGiven" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-immunizationNotGiven.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-immunizationNotGiven.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])">observation SHALL conform to ImmunizationNotGivenReason</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-substanceAdmin" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:observation) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:sequenceNumber) &lt;= 1">Cardinality of sequenceNumber is 0..1</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-substanceAdmin.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:observation) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-entryRelationship-substanceAdmin.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:observation) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])">act SHALL conform to SubstanceAdministeredAct</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-precondition-substanceAdmin" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:precondition[cda:criterion[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
    <rule id="ImmunizationActivity-errors-precondition-substanceAdmin.criterion" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:precondition[cda:criterion[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])]]/cda:criterion">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])">criterion SHALL conform to PreconditionforSubstanceAdministration</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationMedicationInformation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.54:2014-06-09-->
    <rule id="ImmunizationMedicationInformation-errors-root" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.54') and (@extension = '2014-06-09')])=1">Cardinality of templateId:immunization-med-info is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:manufacturedMaterial)=1">Cardinality of manufacturedMaterial is 1..1</assert>
      <assert test="count(cda:manufacturerOrganization) &lt;= 1">Cardinality of manufacturerOrganization is 0..1</assert>
    </rule>
    <rule id="ImmunizationMedicationInformation-errors-templateId-immunization-med-info" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.54') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.54'">@root SHALL = '2.16.840.1.113883.10.20.22.4.54'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="ImmunizationMedicationInformation-errors-classCode" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($RoleClassManufacturedProduct, .)">SHALL be selected from ValueSet RoleClassManufacturedProduct</assert>
    </rule>
    <rule id="ImmunizationMedicationInformation-errors-manufacturedMaterial" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]/cda:manufacturedMaterial">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:lotNumberText) &lt;= 1">Cardinality of lotNumberText is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationNotGivenReason-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.53:2024-05-01-->
    <rule id="ImmunizationNotGivenReason-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.53') and (@extension = '2024-05-01')])=1">Cardinality of templateId:imm-not-given-reason is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-templateId-imm-not-given-reason" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.53') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.53'">@root SHALL = '2.16.840.1.113883.10.20.22.4.53'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '71798-3'">@code SHALL = '71798-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ImmunizationNotGivenReason-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]/cda:value">
      <assert test="@nullFlavor or contains($NoImmunizationReason, @code)">SHALL be selected from ValueSet NoImmunizationReason</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.2.1:2015-08-01-->
    <rule id="ImmunizationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.2.1') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ImmunizationsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.2.1') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.2.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.2.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="ImmunizationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11369-6'">@code SHALL = '11369-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ImmunizationsSection-errors-entry-activity" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="ImmunizationsSection-errors-entry-activity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])">substanceAdministration SHALL conform to ImmunizationActivity</assert>
    </rule>
  </pattern>
  <pattern id="ImplantableDeviceStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.305:2019-06-21-->
    <rule id="ImplantableDeviceStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.305') and (@extension = '2019-06-21')])=1">Cardinality of templateId:implant-device-status-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-templateId-implant-device-status-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.305') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.305'">@root SHALL = '2.16.840.1.113883.10.20.22.4.305'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C160939'">@code SHALL = 'C160939'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ImplantableDeviceStatusObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]/cda:value/@code">
      <assert test="contains($ImplantableDeviceStatus, .)">SHALL be selected from ValueSet ImplantableDeviceStatus</assert>
    </rule>
  </pattern>
  <pattern id="Indication-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.19:2023-05-01-->
    <rule id="Indication-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.19') and (@extension = '2023-05-01')])=1">Cardinality of templateId:indication is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
    </rule>
    <rule id="Indication-errors-templateId-indication" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.19') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.19'">@root SHALL = '2.16.840.1.113883.10.20.22.4.19'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="Indication-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="Indication-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="Indication-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="Indication-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="Instruction-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.20:2014-06-09-->
    <rule id="Instruction-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.20') and (@extension = '2014-06-09')])=1">Cardinality of templateId:instruction is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="Instruction-errors-templateId-instruction" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.20') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.20'">@root SHALL = '2.16.840.1.113883.10.20.22.4.20'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="Instruction-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="Instruction-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="Instruction-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="Instruction-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="Instruction-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="InstructionsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.45:2014-06-09-->
    <rule id="InstructionsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Instruction</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.45') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="InstructionsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.45') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.45'">@root SHALL = '2.16.840.1.113883.10.20.22.2.45'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="InstructionsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '69730-0'">@code SHALL = '69730-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="InstructionsSection-errors-entry-instruction" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InstructionsSection-errors-entry-instruction.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
  </pattern>
  <pattern id="InterventionAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.131:2015-08-01-->
    <rule id="InterventionAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.131') and (@extension = '2015-08-01')])=1">Cardinality of templateId:intervention-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="InterventionAct-errors-templateId-intervention-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.131') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.131'">@root SHALL = '2.16.840.1.113883.10.20.22.4.131'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="InterventionAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="InterventionAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="InterventionAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '362956003'">@code SHALL = '362956003'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="InterventionAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="InterventionAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="InterventionAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="InterventionAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-advanceDirectiveObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-advanceDirectiveObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-advanceDirectiveObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])">observation SHALL conform to AdvanceDirectiveObservation</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-immunizationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-immunizationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])">substanceAdministration SHALL conform to ImmunizationActivity</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-medicationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-interventionAct" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-interventionAct.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-interventionAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])">act SHALL conform to InterventionAct</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-procedureActivityProcedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-procedureActivityProcedure.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-procedureActivityProcedure.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:encounter) and not(cda:supply)]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])">procedure SHALL conform to ProcedureActivityProcedure</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-encounterActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])] and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-encounterActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])] and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-encounterActivity.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])] and not(cda:supply)]/cda:encounter">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])">encounter SHALL conform to EncounterActivity</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-instruction" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-instruction.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-instruction.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nonMedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nonMedSupply.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nonMedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])">supply SHALL conform to NonMedicinalSupplyActivity</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nutritionRecommendation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nutritionRecommendation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-nutritionRecommendation.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])">act SHALL conform to NutritionRecommendation</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRefr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRefr.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRefr.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRson" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'RSON') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <let name="r1" value="cda:act/cda:id[1]/@root"/>
      <let name="r2" value="cda:act/cda:id[1]/@extension"/>
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.121' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRson.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'RSON') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-entryReferenceRson.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'RSON') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-handoffCommunicationParticipants" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-handoffCommunicationParticipants.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-handoffCommunicationParticipants.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])">act SHALL conform to HandoffCommunicationParticipants</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-plannedInterventionAct" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-plannedInterventionAct.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="InterventionAct-errors-entryRelationship-plannedInterventionAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])">act SHALL conform to PlannedInterventionAct</assert>
    </rule>
    <rule id="InterventionAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:reference">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="InterventionAct-errors-reference.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:reference/@typeCode">
      <assert test="contains($XActRelationshipExternalReference, .)">SHALL be selected from ValueSet XActRelationshipExternalReference</assert>
    </rule>
    <rule id="InterventionAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="LatexSafetyObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.314:2019-06-21-->
    <rule id="LatexSafetyObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.314') and (@extension = '2019-06-21')])=1">Cardinality of templateId:latex-safety-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-templateId-latex-safety-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.314') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.314'">@root SHALL = '2.16.840.1.113883.10.20.22.4.314'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C160938'">@code SHALL = 'C160938'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="LatexSafetyObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]/cda:value/@code">
      <assert test="contains($DeviceLatexSafety, .)">SHALL be selected from ValueSet DeviceLatexSafety</assert>
    </rule>
  </pattern>
  <pattern id="LongitudinalCareWoundObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.114:2015-08-01-->
    <rule id="LongitudinalCareWoundObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.114') and (@extension = '2015-08-01')])=1">Cardinality of templateId:Longitudinal-care-wound-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:targetSiteCode) &lt;= 1">Cardinality of targetSiteCode is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:highestPressureUlcerStage is 0..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-templateId-Longitudinal-care-wound-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.114') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.114'">@root SHALL = '2.16.840.1.113883.10.20.22.4.114'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-targetSiteCode.qualifier" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-targetSiteCode.qualifier.name" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier/cda:name">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '272741003'">@code SHALL = '272741003'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-targetSiteCode.qualifier.value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundMeasurementObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundMeasurementObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundMeasurementObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)])">observation SHALL conform to WoundMeasurementObservation</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundCharacteristic" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundCharacteristic.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-woundCharacteristic.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)])">observation SHALL conform to WoundCharacteristic</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-numberofPressureUlcersObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01'])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-numberofPressureUlcersObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01'])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-numberofPressureUlcersObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01'])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01'])">observation SHALL conform to NumberofPressureUlcersObservation</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-highestPressureUlcerStage" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-highestPressureUlcerStage.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-errors-entryRelationship-highestPressureUlcerStage.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])">observation SHALL conform to HighestPressureUlcerStage</assert>
    </rule>
  </pattern>
  <pattern id="LotOrBatchNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.315:2019-06-21-->
    <rule id="LotOrBatchNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.315') and (@extension = '2019-06-21')])=1">Cardinality of templateId:lot-batch-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="LotOrBatchNumberObservation-errors-templateId-lot-batch-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.315') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.315'">@root SHALL = '2.16.840.1.113883.10.20.22.4.315'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="LotOrBatchNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C101672'">@code SHALL = 'C101672'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="LotOrBatchNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="LotOrBatchNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="MRISafetyObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.318:2019-06-21-->
    <rule id="MRISafetyObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.318') and (@extension = '2019-06-21')])=1">Cardinality of templateId:mri-safety-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-templateId-mri-safety-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.318') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.318'">@root SHALL = '2.16.840.1.113883.10.20.22.4.318'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C106044'">@code SHALL = 'C106044'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MRISafetyObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]/cda:value/@code">
      <assert test="contains($DeviceMagneticResonanceMRSafety, .)">SHALL be selected from ValueSet DeviceMagneticResonanceMRSafety</assert>
    </rule>
  </pattern>
  <pattern id="ManufacturingDateObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.316:2019-06-21-->
    <rule id="ManufacturingDateObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.316') and (@extension = '2019-06-21')])=1">Cardinality of templateId:manufact-date-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-templateId-manufact-date-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.316') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.316'">@root SHALL = '2.16.840.1.113883.10.20.22.4.316'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C101669'">@code SHALL = 'C101669'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ManufacturingDateObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]/cda:value">
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentOrganizer-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.135-->
    <rule id="MedicalEquipmentOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]">
      <assert test="cda:component[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]] or cda:component[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">Either Non-Medicinal Supply Activity (templateId:2.16.840.1.113883.10.20.22.4.50:2014-06-09) **OR** Procedure Activity Procedure (templateId:2.16.840.1.113883.10.20.22.4.14:2014-06-09) **SHALL** be present (CONF:1098-32380).</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.135')])=1">Cardinality of templateId:medical-equipment-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-templateId-medical-equipment-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.135')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.135'">@root SHALL = '2.16.840.1.113883.10.20.22.4.135'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-statusCode.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:statusCode/@code">
      <assert test="contains($ResultStatus, .)">SHALL be selected from ValueSet ResultStatus</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-effectiveTime" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-component-nonMedicalSupply" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:procedure)]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-component-nonMedicalSupply.supply" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:procedure)]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])">supply SHALL conform to NonMedicinalSupplyActivity</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-component-procedureActivity" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-errors-component-procedureActivity.procedure" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])">procedure SHALL conform to ProcedureActivityProcedure</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.23:2014-06-09-->
    <rule id="MedicalEquipmentSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.23') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.23') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.23'">@root SHALL = '2.16.840.1.113883.10.20.22.2.23'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '46264-8'">@code SHALL = '46264-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-medicalEquip" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)])] and not(cda:procedure) and not(cda:supply)]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-medicalEquip.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)])] and not(cda:procedure) and not(cda:supply)]/cda:organizer">
      <assert test="cda:component[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]] or cda:component[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">Either Non-Medicinal Supply Activity (templateId:2.16.840.1.113883.10.20.22.4.50:2014-06-09) **OR** Procedure Activity Procedure (templateId:2.16.840.1.113883.10.20.22.4.14:2014-06-09) **SHALL** be present (CONF:1098-32380).</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)])">organizer SHALL conform to MedicalEquipmentOrganizer</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-nonMedSupply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:procedure) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-nonMedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:procedure) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])">supply SHALL conform to NonMedicinalSupplyActivity</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:supply)]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="MedicalEquipmentSection-errors-entry-procedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:supply)]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])">procedure SHALL conform to ProcedureActivityProcedure</assert>
    </rule>
  </pattern>
  <pattern id="MedicalGeneralHistorySection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.39-->
    <rule id="MedicalGeneralHistorySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.39')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MedicalGeneralHistorySection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.39')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.39'">@root SHALL = '2.16.840.1.113883.10.20.22.2.39'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="MedicalGeneralHistorySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11329-0'">@code SHALL = '11329-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="MedicationActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.16:2014-06-09-->
    <rule id="MedicationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.16') and (@extension = '2014-06-09')])=1">Cardinality of templateId:medication-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)&gt;=1">Cardinality of effectiveTime is 1..*</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value])=1">Cardinality of effectiveTime:duration is 1..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='EIVL_TS']) &lt;= 1">Cardinality of effectiveTime:periodicFrequency is 0..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='PIVL_TS']) &lt;= 1">Cardinality of effectiveTime:eventFrequency is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:approachSiteCode) &lt;= 1">Cardinality of approachSiteCode is 0..1</assert>
      <assert test="count(cda:doseQuantity)=1">Cardinality of doseQuantity is 1..1</assert>
      <assert test="count(cda:rateQuantity) &lt;= 1">Cardinality of rateQuantity is 0..1</assert>
      <assert test="count(cda:maxDoseQuantity) &lt;= 1">Cardinality of maxDoseQuantity is 0..1</assert>
      <assert test="count(cda:administrationUnitCode) &lt;= 1">Cardinality of administrationUnitCode is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:performer) &lt;= 1">Cardinality of performer is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:supplyOrder is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]) &lt;= 1">Cardinality of entryRelationship:drugMonitoring is 0..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-templateId-medication-activity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.16') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.16'">@root SHALL = '2.16.840.1.113883.10.20.22.4.16'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="MedicationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="MedicationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-statusCode.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:statusCode/@code">
      <assert test="contains($MedicationStatus, .)">SHALL be selected from ValueSet MedicationStatus</assert>
    </rule>
    <rule id="MedicationActivity-errors-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="(@value or cda:low) and (not((@value and cda:low)))">This effectiveTime **SHALL** contain either a low or a @value but not both (CONF:1098-32890).</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-effectiveTime-periodicFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='EIVL_TS']">
      <assert test="count(@operator)=1">Cardinality of @operator is 1..1</assert>
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="MedicationActivity-errors-effectiveTime-eventFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='PIVL_TS']">
      <assert test="count(@operator)=1">Cardinality of @operator is 1..1</assert>
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="MedicationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="MedicationActivity-errors-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:doseQuantity">
      <assert test="count(@unit) &lt;= 1">Cardinality of @unit is 0..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-rateQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:rateQuantity">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-administrationUnitCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:administrationUnitCode">
      <assert test="@nullFlavor or contains($AdministrationUnitDoseForm, @code)">SHALL be selected from ValueSet AdministrationUnitDoseForm</assert>
    </rule>
    <rule id="MedicationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation</assert>
    </rule>
    <rule id="MedicationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="MedicationActivity-errors-participant-drugVehicle" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CSM'">@typeCode SHALL = 'CSM'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-participant-drugVehicle.participantRole" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.24' and not(@extension)])">participantRole SHALL conform to DrugVehicle</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-indication.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-instruction.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-supplyOrder" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-supplyOrder.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-supplyOrder.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])">supply SHALL conform to MedicationSupplyOrder</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-medicationDispense" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-medicationDispense.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-medicationDispense.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])">supply SHALL conform to MedicationDispense</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-reaction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CAUS'">@typeCode SHALL = 'CAUS'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-reaction.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-reaction.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])">observation SHALL conform to ReactionObservation</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-drugMonitoring" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-drugMonitoring.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-drugMonitoring.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])">act SHALL conform to DrugMonitoringAct</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-substanceAdministered" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:sequenceNumber) &lt;= 1">Cardinality of sequenceNumber is 0..1</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-substanceAdministered.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-substanceAdministered.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])">act SHALL conform to SubstanceAdministeredAct</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-adherence" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-adherence.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-adherence.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01'])">observation SHALL conform to MedicationAdherence</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-signature" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)])] and not(cda:observation) and not(cda:act) and not(cda:supply)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-signature.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)])] and not(cda:observation) and not(cda:act) and not(cda:supply)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationActivity-errors-entryRelationship-signature.substanceAdministration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)])] and not(cda:observation) and not(cda:act) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)])">substanceAdministration SHALL conform to MedicationFreeTextSig</assert>
    </rule>
    <rule id="MedicationActivity-errors-precondition" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:precondition">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
    <rule id="MedicationActivity-errors-precondition.criterion" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:precondition/cda:criterion">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])">criterion SHALL conform to PreconditionforSubstanceAdministration</assert>
    </rule>
  </pattern>
  <pattern id="MedicationAdherence-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.508:2023-05-01-->
    <rule id="MedicationAdherence-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.508') and (@extension = '2023-05-01')])=1">Cardinality of templateId:med-adherence is 1..1</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-templateId-med-adherence" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.508') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.508'">@root SHALL = '2.16.840.1.113883.10.20.22.4.508'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="MedicationAdherence-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="MedicationAdherence-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '71799-1'">@code SHALL = '71799-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationAdherence-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationAdherence-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="MedicationAdherence-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-informant" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:informant">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="MedicationAdherence-errors-informant.assignedEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:informant/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicationDispense-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.18:2023-05-01-->
    <rule id="MedicationDispense-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.18') and (@extension = '2023-05-01')])=1">Cardinality of templateId:med-dispense is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:product)=1">Cardinality of product is 1..1</assert>
      <assert test="count(cda:performer) &lt;= 1">Cardinality of performer is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]) &lt;= 1">Cardinality of entryRelationship:entryRelationship1 is 0..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-templateId-med-dispense" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.18') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.18'">@root SHALL = '2.16.840.1.113883.10.20.22.4.18'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="MedicationDispense-errors-classCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/@classCode">
      <assert test="contains($ActClassSupply, .)">SHALL be selected from ValueSet ActClassSupply</assert>
    </rule>
    <rule id="MedicationDispense-errors-moodCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XDocumentSubstanceMood, .)">SHALL be selected from ValueSet XDocumentSubstanceMood</assert>
    </rule>
    <rule id="MedicationDispense-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationDispense-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="MedicationDispense-errors-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:product">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-product.manufacturedProduct" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:product/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation or ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="MedicationDispense-errors-performer" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-performer.assignedEntity" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-performer.assignedEntity.addr" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="MedicationDispense-errors-entryRelationship-entryRelationship1" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="MedicationDispense-errors-entryRelationship-entryRelationship1.typeCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationDispense-errors-entryRelationship-entryRelationship1.supply" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])">supply SHALL conform to MedicationSupplyOrder</assert>
    </rule>
  </pattern>
  <pattern id="MedicationFreeTextSig-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.147-->
    <rule id="MedicationFreeTextSig-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]">
      <assert test="count(cda:typeId)=0">Cardinality of typeId is 0..0</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.147')])=1">Cardinality of templateId:med-freeTextSig is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=0">Cardinality of statusCode is 0..0</assert>
      <assert test="count(cda:effectiveTime)=0">Cardinality of effectiveTime is 0..0</assert>
      <assert test="count(cda:priorityCode)=0">Cardinality of priorityCode is 0..0</assert>
      <assert test="count(cda:repeatNumber)=0">Cardinality of repeatNumber is 0..0</assert>
      <assert test="count(cda:routeCode)=0">Cardinality of routeCode is 0..0</assert>
      <assert test="count(cda:approachSiteCode)=0">Cardinality of approachSiteCode is 0..0</assert>
      <assert test="count(cda:doseQuantity)=0">Cardinality of doseQuantity is 0..0</assert>
      <assert test="count(cda:rateQuantity)=0">Cardinality of rateQuantity is 0..0</assert>
      <assert test="count(cda:maxDoseQuantity)=0">Cardinality of maxDoseQuantity is 0..0</assert>
      <assert test="count(cda:administrationUnitCode)=0">Cardinality of administrationUnitCode is 0..0</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:subject)=0">Cardinality of subject is 0..0</assert>
      <assert test="count(cda:specimen)=0">Cardinality of specimen is 0..0</assert>
      <assert test="count(cda:performer)=0">Cardinality of performer is 0..0</assert>
      <assert test="count(cda:informant)=0">Cardinality of informant is 0..0</assert>
      <assert test="count(cda:participant)=0">Cardinality of participant is 0..0</assert>
      <assert test="count(cda:entryRelationship)=0">Cardinality of entryRelationship is 0..0</assert>
      <assert test="count(cda:precondition)=0">Cardinality of precondition is 0..0</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-templateId-med-freeTextSig" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.147')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.147'">@root SHALL = '2.16.840.1.113883.10.20.22.4.147'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '76662-6'">@code SHALL = '76662-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(cda:manufacturedLabeledDrug)=1">Cardinality of manufacturedLabeledDrug is 1..1</assert>
    </rule>
    <rule id="MedicationFreeTextSig-errors-consumable.manufacturedProduct.manufacturedLabeledDrug" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]/cda:consumable/cda:manufacturedProduct/cda:manufacturedLabeledDrug">
      <assert test="count(@nullFlavor)=1">Cardinality of @nullFlavor is 1..1</assert>
      <assert test="@nullFlavor = 'NA'">@nullFlavor SHALL = 'NA'</assert>
    </rule>
  </pattern>
  <pattern id="MedicationInformation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.23:2014-06-09-->
    <rule id="MedicationInformation-errors-root" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.23') and (@extension = '2014-06-09')])=1">Cardinality of templateId:med-information is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:manufacturedMaterial)=1">Cardinality of manufacturedMaterial is 1..1</assert>
      <assert test="count(cda:manufacturerOrganization) &lt;= 1">Cardinality of manufacturerOrganization is 0..1</assert>
    </rule>
    <rule id="MedicationInformation-errors-templateId-med-information" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.23') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.23'">@root SHALL = '2.16.840.1.113883.10.20.22.4.23'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="MedicationInformation-errors-classCode" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($RoleClassManufacturedProduct, .)">SHALL be selected from ValueSet RoleClassManufacturedProduct</assert>
    </rule>
    <rule id="MedicationInformation-errors-manufacturedMaterial" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']]/cda:manufacturedMaterial">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="MedicationSupplyOrder-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.17:2014-06-09-->
    <rule id="MedicationSupplyOrder-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.17') and (@extension = '2014-06-09')])=1">Cardinality of templateId:med-supplyOrder is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime[(cda:high)]) &lt;= 1">Cardinality of effectiveTime:when is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:product) &lt;= 1">Cardinality of product is 0..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
      <assert test="count(cda:entryRelationship) &lt;= 1">Cardinality of entryRelationship is 0..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-templateId-med-supplyOrder" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.17') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.17'">@root SHALL = '2.16.840.1.113883.10.20.22.4.17'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-classCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($ActClassSupply, .)">SHALL be selected from ValueSet ActClassSupply</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-moodCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XDocumentSubstanceMood, .)">SHALL be selected from ValueSet XDocumentSubstanceMood</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-statusCode.code" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-effectiveTime-when" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:effectiveTime[(cda:high)]">
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:product">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-product.manufacturedProduct" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:product/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation or ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-entryRelationship" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:entryRelationship">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-entryRelationship.typeCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:entryRelationship/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MedicationSupplyOrder-errors-entryRelationship.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:entryRelationship/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsAdministeredSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.38:2014-06-09-->
    <rule id="MedicationsAdministeredSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.38') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entry:medication is 0..1</assert>
    </rule>
    <rule id="MedicationsAdministeredSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.38') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.38'">@root SHALL = '2.16.840.1.113883.10.20.22.2.38'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="MedicationsAdministeredSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '29549-3'">@code SHALL = '29549-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationsAdministeredSection-errors-entry-medication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="MedicationsAdministeredSection-errors-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.1.1:2014-06-09-->
    <rule id="MedicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.1.1') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MedicationsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.1.1') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.1.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.1.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="MedicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10160-0'">@code SHALL = '10160-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MedicationsSection-errors-entry-medActivity" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="MedicationsSection-errors-entry-medActivity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.74:2024-05-01-->
    <rule id="MentalStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.74') and (@extension = '2024-05-01')])=1">Cardinality of templateId:mental-status-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:code is 0..1</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-templateId-mental-status-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.74') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.74'">@root SHALL = '2.16.840.1.113883.10.20.22.4.74'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '8693-4'">@code SHALL = '8693-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-entryRelationship-assessmentScale" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-entryRelationship-assessmentScale.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="MentalStatusObservation-errors-entryRelationship-assessmentScale.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.75:2015-08-01-->
    <rule id="MentalStatusOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.75') and (@extension = '2015-08-01')])=1">Cardinality of templateId:mental-status-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]])&gt;=1">Cardinality of component:mentalStatus is 1..*</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-templateId-mental-status-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.75') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.75'">@root SHALL = '2.16.840.1.113883.10.20.22.4.75'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-component-mentalStatus" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MentalStatusOrganizer-errors-component-mentalStatus.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])">observation SHALL conform to MentalStatusObservation</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.56:2015-08-01-->
    <rule id="MentalStatusSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.56') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="MentalStatusSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.56') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.56'">@root SHALL = '2.16.840.1.113883.10.20.22.2.56'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="MentalStatusSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10190-7'">@code SHALL = '10190-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-mentalStatusOrganizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01'])] and not(cda:observation)]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-mentalStatusOrganizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01'])] and not(cda:observation)]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01'])">organizer SHALL conform to MentalStatusOrganizer</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-mentalStatusObs" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-mentalStatusObs.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])">observation SHALL conform to MentalStatusObservation</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-assessmentScale" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="MentalStatusSection-errors-entry-assessmentScale.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
  </pattern>
  <pattern id="ModelNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.317:2019-06-21-->
    <rule id="ModelNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.317') and (@extension = '2019-06-21')])=1">Cardinality of templateId:model-num-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ModelNumberObservation-errors-templateId-model-num-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.317') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.317'">@root SHALL = '2.16.840.1.113883.10.20.22.4.317'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="ModelNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C99285'">@code SHALL = 'C99285'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="ModelNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ModelNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="NonMedicinalSupplyActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.50:2014-06-09-->
    <rule id="NonMedicinalSupplyActivity-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.50') and (@extension = '2014-06-09')])=1">Cardinality of templateId:non-medicinal-supply-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:participant[(@typeCode = 'PRD')]) &lt;= 1">Cardinality of participant:product is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-templateId-non-medicinal-supply-activity" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.50') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.50'">@root SHALL = '2.16.840.1.113883.10.20.22.4.50'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-classCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/@classCode">
      <assert test="contains($ActClassSupply, .)">SHALL be selected from ValueSet ActClassSupply</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-moodCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($MoodCodeEvnInt, .)">SHALL be selected from ValueSet MoodCodeEvnInt</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-statusCode.code" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-participant-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'PRD')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRD'">@typeCode SHALL = 'PRD'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-participant-product.participantRole" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'PRD')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)])">participantRole SHALL conform to ProductInstance</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-entryRelationship-instruction" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-entryRelationship-instruction.typeCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-errors-entryRelationship-instruction.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
  </pattern>
  <pattern id="NoteActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.202:2016-11-01-->
    <rule id="NoteActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.202') and (@extension = '2016-11-01')])=1">Cardinality of templateId:note-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
    </rule>
    <rule id="NoteActivity-errors-templateId-note-activity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.202') and (@extension = '2016-11-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.202'">@root SHALL = '2.16.840.1.113883.10.20.22.4.202'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2016-11-01'">@extension SHALL = '2016-11-01'</assert>
    </rule>
    <rule id="NoteActivity-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="NoteActivity-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="NoteActivity-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '34109-9'">@code SHALL = '34109-9'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NoteActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:text">
      <assert test="not(@mediaType) or (@representation = 'B64' and text()[normalize-space()])">If @mediaType is present, the text SHALL contain exactly one [1..1] @representation="B64" and mixed content corresponding to the contents of the note (CONF:3250-16912).</assert>
      <assert test="count(@mediaType) &lt;= 1">Cardinality of @mediaType is 0..1</assert>
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="NoteActivity-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:effectiveTime">
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="NoteActivity-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'LA'">@typeCode SHALL = 'LA'</assert>
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:playingEntity) &lt;= 1">Cardinality of playingEntity is 0..1</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="NoteActivity-errors-participant-legalAuthenticator.participantRole.playingEntity.name" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole/cda:playingEntity/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="NoteActivity-errors-entryRelationship-encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:entryRelationship[(cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(@negationInd) &lt;= 1">Cardinality of @negationInd is 0..1</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-entryRelationship-encounter.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:entryRelationship[(cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NoteActivity-errors-entryRelationship-encounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:entryRelationship[(cda:encounter)]/cda:encounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="NoteActivity-errors-reference-externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:reference[(cda:externalDocument)]">
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="NoteActivity-errors-reference-externalDocument.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:reference[(cda:externalDocument)]/cda:externalDocument">
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="NotesSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.65:2016-11-01-->
    <rule id="NotesSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Note Activity</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.65') and (@extension = '2016-11-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="NotesSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.65') and (@extension = '2016-11-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.65'">@root SHALL = '2.16.840.1.113883.10.20.22.2.65'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2016-11-01'">@extension SHALL = '2016-11-01'</assert>
    </rule>
    <rule id="NotesSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NotesSection-errors-entry-note" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="NotesSection-errors-entry-note.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])">act SHALL conform to NoteActivity</assert>
    </rule>
  </pattern>
  <pattern id="NumberofPressureUlcersObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.76:2024-05-01-->
    <rule id="NumberofPressureUlcersObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.76') and (@extension = '2024-05-01')])=1">Cardinality of templateId:numberof-pressure-ulcers-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)])=1">Cardinality of entryRelationship:stage is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-templateId-numberof-pressure-ulcers-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.76') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.76'">@root SHALL = '2.16.840.1.113883.10.20.22.4.76'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '2264892003'">@code SHALL = '2264892003'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
      <assert test="count(cda:translation)&gt;=1">Cardinality of translation is 1..*</assert>
      <assert test="count(cda:translation[(@codeSystem = '2.16.840.1.113883.6.1') and (@code = '75277-4')])=1">Cardinality of translation:translation1 is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-code.translation-translation1" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:code/cda:translation[(@codeSystem = '2.16.840.1.113883.6.1') and (@code = '75277-4')]">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75277-4'">@code SHALL = '75277-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/cda:observation">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage.observation.moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/cda:observation/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-errors-entryRelationship-stage.observation.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/cda:observation/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '91150-3'">@code SHALL = '91150-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="NutritionAssessment-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.138-->
    <rule id="NutritionAssessment-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.138')])=1">Cardinality of templateId:nutrition-assessment is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="NutritionAssessment-errors-templateId-nutrition-assessment" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.138')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.138'">@root SHALL = '2.16.840.1.113883.10.20.22.4.138'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="NutritionAssessment-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="NutritionAssessment-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75303-8'">@code SHALL = '75303-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NutritionAssessment-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NutritionAssessment-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NutritionAssessment-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="NutritionAssessment-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="NutritionRecommendation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.130-->
    <rule id="NutritionRecommendation-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.130')])=1">Cardinality of templateId:nutrition-rec is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-templateId-nutrition-rec" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.130')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.130'">@root SHALL = '2.16.840.1.113883.10.20.22.4.130'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/@moodCode">
      <assert test="contains($PlannedMoodCodeActEncounterProcedure, .)">SHALL be selected from ValueSet PlannedMoodCodeActEncounterProcedure</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedEncounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:supply) and not(cda:procedure)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedEncounter.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:supply) and not(cda:procedure)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedEncounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:supply) and not(cda:procedure)]/cda:encounter">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])">encounter SHALL conform to PlannedEncounter</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedMedActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply) and not(cda:procedure)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedMedActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply) and not(cda:procedure)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedMedActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply) and not(cda:procedure)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])">substanceAdministration SHALL conform to PlannedMedicationActivity</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedProc" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedProc.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedProc.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])">procedure SHALL conform to PlannedProcedure</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and not(cda:procedure)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedSupply.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and not(cda:procedure)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NutritionRecommendation-errors-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and not(cda:procedure)]/cda:supply">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])">supply SHALL conform to PlannedSupply</assert>
    </rule>
  </pattern>
  <pattern id="NutritionSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.57-->
    <rule id="NutritionSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.57')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="NutritionSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.57')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.57'">@root SHALL = '2.16.840.1.113883.10.20.22.2.57'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="NutritionSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '61144-2'">@code SHALL = '61144-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NutritionSection-errors-entry-nutritionalStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="NutritionSection-errors-entry-nutritionalStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])">observation SHALL conform to NutritionalStatusObservation</assert>
    </rule>
  </pattern>
  <pattern id="NutritionalStatusObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.124-->
    <rule id="NutritionalStatusObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.124')])=1">Cardinality of templateId:nutritional-status-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]])&gt;=1">Cardinality of entryRelationship:nutritionAssessment is 1..*</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-templateId-nutritional-status-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.124')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.124'">@root SHALL = '2.16.840.1.113883.10.20.22.4.124'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75305-3'">@code SHALL = '75305-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-entryRelationship-nutritionAssessment" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-entryRelationship-nutritionAssessment.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="NutritionalStatusObservation-errors-entryRelationship-nutritionAssessment.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])">observation SHALL conform to NutritionAssessment</assert>
    </rule>
  </pattern>
  <pattern id="ObjectiveSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.21.2.1-->
    <rule id="ObjectiveSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.21.2.1')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ObjectiveSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.21.2.1')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.21.2.1'">@root SHALL = '2.16.840.1.113883.10.20.21.2.1'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ObjectiveSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '61149-1'">@code SHALL = '61149-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.7:2024-05-01-->
    <rule id="OperativeNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.7') and (@extension = '2024-05-01')])=1">Cardinality of templateId:operative-note is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:documentationOf)&gt;=1">Cardinality of documentationOf is 1..*</assert>
      <assert test="count(cda:authorization) &lt;= 1">Cardinality of authorization is 0..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-templateId-operative-note" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.7') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.7'">@root SHALL = '2.16.840.1.113883.10.20.22.1.7'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="OperativeNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($SurgicalOperationNoteDocumentTypeCode, @code)">SHALL be selected from ValueSet SurgicalOperationNoteDocumentTypeCode</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(@typeCode = 'PPRF')])&gt;=1">Cardinality of performer:primary is 1..*</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(((cda:width | cda:high))) = 1">Width and high are mutually exclusive. If width is known, high **SHALL NOT** be present. If with is not present, **SHALL** include high.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:width) &lt;= 1">Cardinality of width is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-primary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PPRF'">@typeCode SHALL = 'PPRF'</assert>
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-primary.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-secondary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRF'">@typeCode SHALL = 'SPRF'</assert>
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-secondary.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="OperativeNote-errors-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-authorization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:authorization">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'AUTH'">@typeCode SHALL = 'AUTH'</assert>
      <assert test="count(cda:consent)=1">Cardinality of consent is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-authorization.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:authorization/@typeCode">
      <assert test="contains($ActRelationshipAuthorizedBy, .)">SHALL be selected from ValueSet ActRelationshipAuthorizedBy</assert>
    </rule>
    <rule id="OperativeNote-errors-authorization.consent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:authorization/cda:consent">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CONS'">@classCode SHALL = 'CONS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-authorization.consent.statusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:authorization/cda:consent/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="OperativeNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="count(cda:component)&gt;=8">Cardinality of component is 8..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]])=1">Cardinality of component:anesthesia is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]])=1">Cardinality of component:complications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])]])=1">Cardinality of component:preopDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]])=1">Cardinality of component:estBloodLoss is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]])=1">Cardinality of component:findings is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]])=1">Cardinality of component:specimensTaken is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]])=1">Cardinality of component:procedureDescription is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)])]])=1">Cardinality of component:postopDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]) &lt;= 1">Cardinality of component:implants is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:fluids is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)])]]) &lt;= 1">Cardinality of component:surgicalProcedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:plannedProcedure is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:disposition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:indications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:surgicalDrains is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-anesthesia" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-anesthesia.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])">section SHALL conform to AnesthesiaSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-complications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-complications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])">section SHALL conform to ComplicationsSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-preopDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-preopDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])">section SHALL conform to PreoperativeDiagnosisSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-estBloodLoss" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-estBloodLoss.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])">section SHALL conform to ProcedureEstimatedBloodLossSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-findings" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-findings.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])">section SHALL conform to ProcedureFindingsSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-specimensTaken" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-specimensTaken.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])">section SHALL conform to ProcedureSpecimensTakenSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-procedureDescription" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-procedureDescription.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])">section SHALL conform to ProcedureDescriptionSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-postopDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-postopDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)])">section SHALL conform to PostoperativeDiagnosisSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-implants" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-implants.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])">section SHALL conform to ProcedureImplantsSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-fluids" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-fluids.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)])">section SHALL conform to OperativeNoteFluidsSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-surgicalProcedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-surgicalProcedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)])">section SHALL conform to OperativeNoteSurgicalProcedureSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-plannedProcedure" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-plannedProcedure.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])">section SHALL conform to PlannedProcedureSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-disposition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-disposition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])">section SHALL conform to ProcedureDispositionSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-indications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-indications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])">section SHALL conform to ProcedureIndicationsSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-surgicalDrains" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-surgicalDrains.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)])">section SHALL conform to SurgicalDrainsSection</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="OperativeNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNoteFluidsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.7.12-->
    <rule id="OperativeNoteFluidsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.7.12')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="OperativeNoteFluidsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.7.12')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.7.12'">@root SHALL = '2.16.840.1.113883.10.20.7.12'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="OperativeNoteFluidsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.12' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10216-0'">@code SHALL = '10216-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNoteSurgicalProcedureSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.7.14-->
    <rule id="OperativeNoteSurgicalProcedureSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.7.14')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="OperativeNoteSurgicalProcedureSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.7.14')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.7.14'">@root SHALL = '2.16.840.1.113883.10.20.7.14'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="OperativeNoteSurgicalProcedureSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.14' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10223-6'">@code SHALL = '10223-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="OutcomeObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.144-->
    <rule id="OutcomeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.144')])=1">Cardinality of templateId:outcome-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:progressTowardGoalObservation is 0..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-templateId-outcome-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.144')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.144'">@root SHALL = '2.16.840.1.113883.10.20.22.4.144'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="OutcomeObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="OutcomeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="OutcomeObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-goal-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'GEVL') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <let name="r1" value="cda:act/cda:id[1]/@root"/>
      <let name="r2" value="cda:act/cda:id[1]/@extension"/>
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.121' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'GEVL'">@typeCode SHALL = 'GEVL'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-goal-reference.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'GEVL') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-goal-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'GEVL') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-progressTowardGoalObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-progressTowardGoalObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-progressTowardGoalObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])">observation SHALL conform to ProgressTowardGoalObservation</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-intervention-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'RSON') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <let name="r1" value="cda:act/cda:id[1]/@root"/>
      <let name="r2" value="cda:act/cda:id[1]/@extension"/>
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.131' and self::node()/@extension = '2015-08-01'] and cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-intervention-reference.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'RSON') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="OutcomeObservation-errors-entryRelationship-intervention-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'RSON') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="OutcomeObservation-errors-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:reference">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="OutcomeObservation-errors-reference.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:reference/@typeCode">
      <assert test="contains($XActRelationshipExternalReference, .)">SHALL be selected from ValueSet XActRelationshipExternalReference</assert>
    </rule>
    <rule id="OutcomeObservation-errors-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="PastMedicalHistory-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.20:2015-08-01-->
    <rule id="PastMedicalHistory-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.20') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PastMedicalHistory-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.20') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.20'">@root SHALL = '2.16.840.1.113883.10.20.22.2.20'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PastMedicalHistory-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11348-0'">@code SHALL = '11348-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PastMedicalHistory-errors-entry-problem" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PastMedicalHistory-errors-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PatientReferralAct-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.140-->
    <rule id="PatientReferralAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.140')])=1">Cardinality of templateId:patient-referral-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:priorityCode) &lt;= 1">Cardinality of priorityCode is 0..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-templateId-patient-referral-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.140')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.140'">@root SHALL = '2.16.840.1.113883.10.20.22.4.140'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PatientReferralAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PatientReferralAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/@moodCode">
      <assert test="contains($PatientReferralActMoodCode, .)">SHALL be selected from ValueSet PatientReferralActMoodCode</assert>
    </rule>
    <rule id="PatientReferralAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PatientReferralAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:statusCode/@code">
      <assert test="contains($ActStatus_1, .)">SHALL be selected from ValueSet ActStatus_1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PatientReferralAct-errors-participant" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:participant">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-participant.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:participant/cda:participantRole">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'RQO'">@moodCode SHALL = 'RQO'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:priorityCode) &lt;= 1">Cardinality of priorityCode is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.observation.moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.observation.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-entryRelationship1.observation.statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-indication" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-indication.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PatientReferralAct-errors-entryRelationship-indication.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
  </pattern>
  <pattern id="PayersSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.18:2015-08-01-->
    <rule id="PayersSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.18') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PayersSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.18') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.18'">@root SHALL = '2.16.840.1.113883.10.20.22.2.18'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PayersSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '48768-6'">@code SHALL = '48768-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PayersSection-errors-entry-coverage" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PayersSection-errors-entry-coverage.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01'])">act SHALL conform to CoverageActivity</assert>
    </rule>
  </pattern>
  <pattern id="PhysicalExamSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.2.10:2015-08-01-->
    <rule id="PhysicalExamSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.2.10') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.2.10') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.2.10'">@root SHALL = '2.16.840.1.113883.10.20.2.10'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '29545-1'">@code SHALL = '29545-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-entry-longCareWound" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-entry-longCareWound.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])">observation SHALL conform to LongitudinalCareWoundObservation</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-component" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:component">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="PhysicalExamSection-errors-component.section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:component/cda:section">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="PlannedCoverage-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.129:2024-05-01-->
    <rule id="PlannedCoverage-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.129') and (@extension = '2024-05-01')])=1">Cardinality of templateId:planned-coverage is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[(cda:act)])=1">Cardinality of entryRelationship:entryRelationship1 is 1..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-templateId-planned-coverage" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.129') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.129'">@root SHALL = '2.16.840.1.113883.10.20.22.4.129'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="PlannedCoverage-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PlannedCoverage-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="PlannedCoverage-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '52556-8'">@code SHALL = '52556-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PlannedCoverage-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedCoverage-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedCoverage-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act.classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act.moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act/cda:code">
      <assert test="@nullFlavor or contains($PayerType, @code)">SHALL be selected from ValueSet PayerType</assert>
    </rule>
    <rule id="PlannedCoverage-errors-entryRelationship-entryRelationship1.act.statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act)]/cda:act/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
  </pattern>
  <pattern id="PlannedEncounter-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.40:2014-06-09-->
    <rule id="PlannedEncounter-errors-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.40') and (@extension = '2014-06-09')])=1">Cardinality of templateId:planned-enc is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ENC'">@classCode SHALL = 'ENC'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:priorityPreference is 0..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-templateId-planned-enc" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.40') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.40'">@root SHALL = '2.16.840.1.113883.10.20.22.4.40'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="PlannedEncounter-errors-moodCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($PlannedMoodCodeActEncounterProcedure, .)">SHALL be selected from ValueSet PlannedMoodCodeActEncounterProcedure</assert>
    </rule>
    <rule id="PlannedEncounter-errors-text" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-text.reference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedEncounter-errors-statusCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedEncounter-errors-performer" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-author" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedEncounter-errors-participant-location" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'LOC'">@typeCode SHALL = 'LOC'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])">participantRole SHALL conform to ServiceDeliveryLocation</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-priorityPreference" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-priorityPreference.typeCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-priorityPreference.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-indication" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-indication.typeCode" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedEncounter-errors-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
  </pattern>
  <pattern id="PlannedImmunizationActivity-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.120-->
    <rule id="PlannedImmunizationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.120')])=1">Cardinality of templateId:planned-immunization-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:doseQuantity) &lt;= 1">Cardinality of doseQuantity is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-templateId-planned-immunization-activity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.120')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.120'">@root SHALL = '2.16.840.1.113883.10.20.22.4.120'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/@moodCode">
      <assert test="contains($PlannedMoodCodeSubstanceAdministrationSupply, .)">SHALL be selected from ValueSet PlannedMoodCodeSubstanceAdministrationSupply</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:doseQuantity">
      <assert test="count(@unit) &lt;= 1">Cardinality of @unit is 0..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-priorityPreference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-priorityPreference.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-priorityPreference.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-indication.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act)]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-instruction.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-precondition-pronditionForSubstanceAdmin" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:precondition[cda:criterion[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-errors-precondition-pronditionForSubstanceAdmin.criterion" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:precondition[cda:criterion[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])]]/cda:criterion">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])">criterion SHALL conform to PreconditionforSubstanceAdministration</assert>
    </rule>
  </pattern>
  <pattern id="PlannedInterventionAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.146:2015-08-01-->
    <rule id="PlannedInterventionAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.146') and (@extension = '2015-08-01')])=1">Cardinality of templateId:planned-intervention-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')])&gt;=1">Cardinality of entryRelationship:reason is 1..*</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-templateId-planned-intervention-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.146') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.146'">@root SHALL = '2.16.840.1.113883.10.20.22.4.146'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($PlannedInterventionMoodCode, .)">SHALL be selected from ValueSet PlannedInterventionMoodCode</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '362956003'">@code SHALL = '362956003'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-reason" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')]">
      <let name="r1" value="cda:act/cda:id[1]/@root"/>
      <let name="r2" value="cda:act/cda:id[1]/@extension"/>
      <assert test="/cda:ClinicalDocument//cda:observation[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.4.121' and self::node()/@extension = '2022-06-01'] and cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2]]">This entryReference template **SHALL** reference an instance of a Goal Observation template.</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-reason.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-reason.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-immunizationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-immunizationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])">substanceAdministration SHALL conform to ImmunizationActivity</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-medicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-medicationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-instruction" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-instruction.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-instruction.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nonMedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nonMedSupply.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nonMedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])">supply SHALL conform to NonMedicinalSupplyActivity</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedEncounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedEncounter.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedEncounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:supply) and (@typeCode = 'REFR')]/cda:encounter">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])">encounter SHALL conform to PlannedEncounter</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedProcedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedProcedure.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedProcedure.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])">procedure SHALL conform to PlannedProcedure</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedMedicationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedMedicationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedMedicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])">substanceAdministration SHALL conform to PlannedMedicationActivity</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedSupply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedSupply.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])">supply SHALL conform to PlannedSupply</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nutritionRecommendation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nutritionRecommendation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-nutritionRecommendation.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])">act SHALL conform to NutritionRecommendation</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-entryReference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-entryReference.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-entryReference.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedImmunizationActivity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedImmunizationActivity.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-entryRelationship-plannedImmunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])">substanceAdministration SHALL conform to PlannedImmunizationActivity</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:reference">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-reference.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:reference/@typeCode">
      <assert test="contains($XActRelationshipExternalReference, .)">SHALL be selected from ValueSet XActRelationshipExternalReference</assert>
    </rule>
    <rule id="PlannedInterventionAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="PlannedMedicationActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.42:2014-06-09-->
    <rule id="PlannedMedicationActivity-errors-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.42') and (@extension = '2014-06-09')])=1">Cardinality of templateId:planned-med-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SBADM'">@classCode SHALL = 'SBADM'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)&gt;=1">Cardinality of effectiveTime is 1..*</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value])=1">Cardinality of effectiveTime:duration is 1..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='EIVL_TS']) &lt;= 1">Cardinality of effectiveTime:periodicFrequency is 0..1</assert>
      <assert test="count(cda:effectiveTime[@xsi:type='PIVL_TS']) &lt;= 1">Cardinality of effectiveTime:eventFrequency is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:routeCode) &lt;= 1">Cardinality of routeCode is 0..1</assert>
      <assert test="count(cda:doseQuantity) &lt;= 1">Cardinality of doseQuantity is 0..1</assert>
      <assert test="count(cda:rateQuantity) &lt;= 1">Cardinality of rateQuantity is 0..1</assert>
      <assert test="count(cda:maxDoseQuantity) &lt;= 1">Cardinality of maxDoseQuantity is 0..1</assert>
      <assert test="count(cda:administrationUnitCode) &lt;= 1">Cardinality of administrationUnitCode is 0..1</assert>
      <assert test="count(cda:consumable)=1">Cardinality of consumable is 1..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-templateId-planned-med-activity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.42') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.42'">@root SHALL = '2.16.840.1.113883.10.20.22.4.42'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-moodCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($PlannedMoodCodeSubstanceAdministrationSupply, .)">SHALL be selected from ValueSet PlannedMoodCodeSubstanceAdministrationSupply</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-text" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-text.reference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-statusCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="(@value or cda:low) and (not((@value and cda:low)))">This effectiveTime **SHALL** contain either a low or a @value but not both (CONF:1098-32890).</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-effectiveTime-periodicFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='EIVL_TS']">
      <assert test="count(@operator)=1">Cardinality of @operator is 1..1</assert>
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-effectiveTime-eventFrequency" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='PIVL_TS']">
      <assert test="count(@operator)=1">Cardinality of @operator is 1..1</assert>
      <assert test="@operator = 'A'">@operator SHALL = 'A'</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="@nullFlavor or contains($SPLDrugRouteOfAdministrationTerminology, @code)">SHALL be selected from ValueSet SPLDrugRouteOfAdministrationTerminology</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:doseQuantity">
      <assert test="count(@unit) &lt;= 1">Cardinality of @unit is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-rateQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:rateQuantity">
      <assert test="count(@unit) &lt;= 1">Cardinality of @unit is 0..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-administrationUnitCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:administrationUnitCode">
      <assert test="@nullFlavor or contains($AdministrationUnitDoseForm, @code)">SHALL be selected from ValueSet AdministrationUnitDoseForm</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-consumable" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:consumable">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:consumable/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-author" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-priorityPreference" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-priorityPreference.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-priorityPreference.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-indication" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-indication.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-instruction" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-instruction.typeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-precondition" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:precondition">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRCN'">@typeCode SHALL = 'PRCN'</assert>
      <assert test="count(cda:criterion)=1">Cardinality of criterion is 1..1</assert>
    </rule>
    <rule id="PlannedMedicationActivity-errors-precondition.criterion" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:precondition/cda:criterion">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09'])">criterion SHALL conform to PreconditionforSubstanceAdministration</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedure-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.41:2022-06-01-->
    <rule id="PlannedProcedure-errors-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.41') and (@extension = '2022-06-01')])=1">Cardinality of templateId:planned-proc is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PROC'">@classCode SHALL = 'PROC'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-templateId-planned-proc" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.41') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.41'">@root SHALL = '2.16.840.1.113883.10.20.22.4.41'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="PlannedProcedure-errors-classCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/@classCode">
      <assert test="contains($ActClassProcedure, .)">SHALL be selected from ValueSet ActClassProcedure</assert>
    </rule>
    <rule id="PlannedProcedure-errors-moodCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($PlannedMoodCodeActEncounterProcedure, .)">SHALL be selected from ValueSet PlannedMoodCodeActEncounterProcedure</assert>
    </rule>
    <rule id="PlannedProcedure-errors-text" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-text.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedProcedure-errors-statusCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedProcedure-errors-author" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-priorityPreference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-priorityPreference.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-priorityPreference.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-indication" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-indication.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-instruction" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-instruction.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-instruction.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-coverage" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-coverage.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-coverage.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])">act SHALL conform to PlannedCoverage</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-assessmentScale" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-assessmentScale.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-assessmentScale.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-entryReference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-entryReference.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedProcedure-errors-entryRelationship-entryReference.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedureSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.30:2014-06-09-->
    <rule id="PlannedProcedureSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.30') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PlannedProcedureSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.30') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.30'">@root SHALL = '2.16.840.1.113883.10.20.22.2.30'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="PlannedProcedureSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59772-4'">@code SHALL = '59772-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PlannedProcedureSection-errors-entry-plannedProcedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="PlannedProcedureSection-errors-entry-plannedProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])">procedure SHALL conform to PlannedProcedure</assert>
    </rule>
  </pattern>
  <pattern id="PlannedSupply-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.43:2024-05-01-->
    <rule id="PlannedSupply-errors-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.43') and (@extension = '2024-05-01')])=1">Cardinality of templateId:planned-supply is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SPLY'">@classCode SHALL = 'SPLY'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:repeatNumber) &lt;= 1">Cardinality of repeatNumber is 0..1</assert>
      <assert test="count(cda:quantity) &lt;= 1">Cardinality of quantity is 0..1</assert>
      <assert test="count(cda:product) &lt;= 1">Cardinality of product is 0..1</assert>
      <assert test="count(cda:author) &lt;= 1">Cardinality of author is 0..1</assert>
      <assert test="count(cda:participant[(@typeCode = 'DEV')]) &lt;= 1">Cardinality of participant:productInstance is 0..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-templateId-planned-supply" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.43') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.43'">@root SHALL = '2.16.840.1.113883.10.20.22.4.43'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="PlannedSupply-errors-classCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($ActClassSupply, .)">SHALL be selected from ValueSet ActClassSupply</assert>
    </rule>
    <rule id="PlannedSupply-errors-moodCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($PlannedMoodCodeSubstanceAdministrationSupply, .)">SHALL be selected from ValueSet PlannedMoodCodeSubstanceAdministrationSupply</assert>
    </rule>
    <rule id="PlannedSupply-errors-text" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-text.reference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PlannedSupply-errors-statusCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'active'">@code SHALL = 'active'</assert>
    </rule>
    <rule id="PlannedSupply-errors-product" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:product">
      <assert test="count(cda:manufacturedProduct)=1">Cardinality of manufacturedProduct is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-product.manufacturedProduct" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:product/cda:manufacturedProduct">
      <assert test="count(((cda:manufacturedLabeledDrug | cda:manufacturedMaterial))) = 1">manufacturedLabeledDrug and manufacturedMaterial are mutually exclusive (one must be present)</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.23' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09'])">manufacturedProduct SHALL conform to MedicationInformation or ImmunizationMedicationInformation</assert>
    </rule>
    <rule id="PlannedSupply-errors-author" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="PlannedSupply-errors-participant-productInstance" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'DEV'">@typeCode SHALL = 'DEV'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-participant-productInstance.participantRole" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)])">participantRole SHALL conform to ProductInstance</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-priorityPreference" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-priorityPreference.typeCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-priorityPreference.observation" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-indication" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-indication.typeCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-indication.observation" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-instruction" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-instruction.typeCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-instruction.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-plannedCoverage" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-plannedCoverage.typeCode" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PlannedSupply-errors-entryRelationship-plannedCoverage.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])">act SHALL conform to PlannedCoverage</assert>
    </rule>
  </pattern>
  <pattern id="PlanofTreatmentSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.10:2014-06-09-->
    <rule id="PlanofTreatmentSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.10') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.10') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.10'">@root SHALL = '2.16.840.1.113883.10.20.22.2.10'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '18776-5'">@code SHALL = '18776-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedEnc" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedEnc.encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:encounter">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])">encounter SHALL conform to PlannedEncounter</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedProc" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedProc.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:supply)]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])">procedure SHALL conform to PlannedProcedure</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedMed" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply)]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedMed.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])">substanceAdministration SHALL conform to PlannedMedicationActivity</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedSupply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])]]">
      <assert test="count(cda:supply)=1">Cardinality of supply is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])]]/cda:supply">
      <assert test="count(((cda:product | cda:participant[@typeCode = 'DEV']))) = 1">The supply SHALL contain either 1 product or 1 device participant (@typeCode='DEV')</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])">supply SHALL conform to PlannedSupply</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-nutrition" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-nutrition.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])">act SHALL conform to NutritionRecommendation</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedImmunization" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:supply)]">
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-plannedImmunization.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:supply)]/cda:substanceAdministration">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])">substanceAdministration SHALL conform to PlannedImmunizationActivity</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-goal" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PlanofTreatmentSection-errors-entry-goal.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])">observation SHALL conform to GoalObservation</assert>
    </rule>
  </pattern>
  <pattern id="PolicyActivity-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.61:2024-05-01-->
    <rule id="PolicyActivity-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]">
      <assert test="not(cda:participant[@typeCode = 'COV']/cda:participantRole/cda:code[cda:code = 'SELF']) or not(cda:participant[@typeCode = 'HLD'])">When the Subscriber is the patient (COV participant code = 'SELF'), the participant element describing the subscriber **SHALL NOT** be present. This information will be recorded instead in the data elements used to record member information (CONF:4537-17139).</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.61') and (@extension = '2024-05-01')])=1">Cardinality of templateId:policy-activity is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')])=1">Cardinality of performer:payer is 1..1</assert>
      <assert test="count(cda:participant)&gt;=1">Cardinality of participant is 1..*</assert>
      <assert test="count(cda:participant[(@typeCode = 'COV')])=1">Cardinality of participant:coverage-target is 1..1</assert>
      <assert test="count(cda:participant[(@typeCode = 'HLD')]) &lt;= 1">Cardinality of participant:subscriber is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-templateId-policy-activity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.61') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.61'">@root SHALL = '2.16.840.1.113883.10.20.22.4.61'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="PolicyActivity-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PolicyActivity-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="PolicyActivity-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PolicyActivity-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRF'">@typeCode SHALL = 'PRF'</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:templateId">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.87'">@root SHALL = '2.16.840.1.113883.10.20.22.4.87'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/@typeCode">
      <assert test="contains($ParticipationPhysicalPerformer, .)">SHALL be selected from ValueSet ParticipationPhysicalPerformer</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:code">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-payer.assignedEntity.representedOrganization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:representedOrganization">
      <assert test="count(cda:name) &lt;= 1">Cardinality of name is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRF'">@typeCode SHALL = 'PRF'</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:templateId">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.88'">@root SHALL = '2.16.840.1.113883.10.20.22.4.88'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/@typeCode">
      <assert test="contains($ParticipationPhysicalPerformer, .)">SHALL be selected from ValueSet ParticipationPhysicalPerformer</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.assignedEntity.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'GUAR'">@code SHALL = 'GUAR'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.110'">@codeSystem SHALL = '2.16.840.1.113883.5.110'</assert>
    </rule>
    <rule id="PolicyActivity-errors-performer-guarantor.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COV'">@typeCode SHALL = 'COV'</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:templateId">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.89'">@root SHALL = '2.16.840.1.113883.10.20.22.4.89'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:time">
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity) &lt;= 1">Cardinality of playingEntity is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.participantRole.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-coverage-target.participantRole.playingEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:playingEntity">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
      <assert test="count(sdtc:birthTime)=1">Cardinality of birthTime is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]">
      <assert test="count(cda:templateId)=1">Cardinality of templateId is 1..1</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'HLD'">@typeCode SHALL = 'HLD'</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber.templateId" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:templateId">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.90'">@root SHALL = '2.16.840.1.113883.10.20.22.4.90'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-participant-subscriber.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-authorization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-authorization.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-authorization.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)])">act SHALL conform to AuthorizationActivity</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-authorization.act.moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]/cda:act/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-plan" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'DEF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-plan.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'DEF')]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-plan.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'DEF')]/cda:act">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'DEF'">@moodCode SHALL = 'DEF'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-plan.act.classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'DEF')]/cda:act/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PolicyActivity-errors-entryRelationship-plan.act.moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'DEF')]/cda:act/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
  </pattern>
  <pattern id="PostoperativeDiagnosisSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.35-->
    <rule id="PostoperativeDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.35')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="PostoperativeDiagnosisSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.35')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.35'">@root SHALL = '2.16.840.1.113883.10.20.22.2.35'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PostoperativeDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.35' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10218-6'">@code SHALL = '10218-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.51:2015-08-01-->
    <rule id="PostprocedureDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.51') and (@extension = '2015-08-01')])=1">Cardinality of templateId:postprocedure-dx is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-templateId-postprocedure-dx" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.51') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.51'">@root SHALL = '2.16.840.1.113883.10.20.22.4.51'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59769-0'">@code SHALL = '59769-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-entryRelationship-problemObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-errors-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.36:2015-08-01-->
    <rule id="PostprocedureDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.36') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of entry:postopDiagnosis is 0..1</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.36') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.36'">@root SHALL = '2.16.840.1.113883.10.20.22.2.36'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59769-0'">@code SHALL = '59769-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-errors-entry-postopDiagnosis" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-errors-entry-postopDiagnosis.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])">act SHALL conform to PostprocedureDiagnosis</assert>
    </rule>
  </pattern>
  <pattern id="PreconditionforSubstanceAdministration-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.25:2014-06-09-->
    <rule id="PreconditionforSubstanceAdministration-errors-root" context="cda:criterion[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.25') and (@extension = '2014-06-09')])=1">Cardinality of templateId:precondition-substance-admin is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PreconditionforSubstanceAdministration-errors-templateId-precondition-substance-admin" context="cda:criterion[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.25') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.25'">@root SHALL = '2.16.840.1.113883.10.20.22.4.25'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="PreconditionforSubstanceAdministration-errors-code" context="cda:criterion[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.25' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyIntentionInNextYear-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.281:2023-05-01-->
    <rule id="PregnancyIntentionInNextYear-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.281') and (@extension = '2023-05-01')])=1">Cardinality of templateId:pregnancy-intention-next-year is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-templateId-pregnancy-intention-next-year" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.281') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.281'">@root SHALL = '2.16.840.1.113883.10.20.22.4.281'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '86645-9'">@code SHALL = '86645-9'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="PregnancyIntentionInNextYear-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]/cda:value">
      <assert test="@nullFlavor or contains($PregnancyIntention, @code)">SHALL be selected from ValueSet PregnancyIntention</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.8-->
    <rule id="PregnancyObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.15.3.8')])=1">Cardinality of templateId:pregnancy-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:estimatedDateofDelivery is 0..1</assert>
    </rule>
    <rule id="PregnancyObservation-errors-templateId-pregnancy-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.15.3.8')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.15.3.8'">@root SHALL = '2.16.840.1.113883.10.20.15.3.8'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PregnancyObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="PregnancyObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="PregnancyObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PregnancyObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PregnancyObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="PregnancyObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="PregnancyObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:value/@code">
      <assert test="contains($ExtendedPregnancyStatus, .)">SHALL be selected from ValueSet ExtendedPregnancyStatus</assert>
    </rule>
    <rule id="PregnancyObservation-errors-entryRelationship-estimatedDateofDelivery" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PregnancyObservation-errors-entryRelationship-estimatedDateofDelivery.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PregnancyObservation-errors-entryRelationship-estimatedDateofDelivery.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])">observation SHALL conform to EstimatedDateofDelivery</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosis-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.65:2015-08-01-->
    <rule id="PreoperativeDiagnosis-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.65') and (@extension = '2015-08-01')])=1">Cardinality of templateId:preoperative-dx is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])&gt;=1">Cardinality of entryRelationship:problemObservation is 1..*</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-templateId-preoperative-dx" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.65') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.65'">@root SHALL = '2.16.840.1.113883.10.20.22.4.65'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10219-4'">@code SHALL = '10219-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-entryRelationship-problemObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-entryRelationship-problemObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-errors-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosisSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.34:2015-08-01-->
    <rule id="PreoperativeDiagnosisSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.34') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of entry:preopDiagnosis is 0..1</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.34') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.34'">@root SHALL = '2.16.840.1.113883.10.20.22.2.34'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10219-4'">@code SHALL = '10219-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-errors-entry-preopDiagnosis" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-errors-entry-preopDiagnosis.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])">act SHALL conform to PreoperativeDiagnosis</assert>
    </rule>
  </pattern>
  <pattern id="PriorityPreference-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.143-->
    <rule id="PriorityPreference-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.143')])=1">Cardinality of templateId:priority-pref is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PriorityPreference-errors-templateId-priority-pref" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.143')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.143'">@root SHALL = '2.16.840.1.113883.10.20.22.4.143'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PriorityPreference-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="PriorityPreference-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '225773000'">@code SHALL = '225773000'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="PriorityPreference-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PriorityPreference-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PriorityPreference-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($PriorityLevel, @code)">SHALL be selected from ValueSet PriorityLevel</assert>
    </rule>
    <rule id="PriorityPreference-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="ProblemConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.3:2024-05-01-->
    <rule id="ProblemConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.3') and (@extension = '2024-05-01')])=1">Cardinality of templateId:problem-concern-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]])=1">Cardinality of entryRelationship:problem is 1..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-templateId-problem-concern-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.3') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.3'">@root SHALL = '2.16.840.1.113883.10.20.22.4.3'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'CONC'">@code SHALL = 'CONC'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.6'">@codeSystem SHALL = '2.16.840.1.113883.5.6'</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-problem" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-problem.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-problem.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-priority" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-priority.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemConcernAct-errors-entryRelationship-priority.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
  </pattern>
  <pattern id="ProblemObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.4:2024-05-01-->
    <rule id="ProblemObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.4') and (@extension = '2024-05-01')])=1">Cardinality of templateId:problem-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(@negationInd) &lt;= 1">Cardinality of @negationInd is 0..1</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:age is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:prognosis is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:status is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:reference is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]) &lt;= 1">Cardinality of entryRelationship:assessment is 0..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]) &lt;= 1">Cardinality of entryRelationship:dateOfDiagnosis is 0..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-templateId-problem-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.4') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.4'">@root SHALL = '2.16.840.1.113883.10.20.22.4.4'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ProblemObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="ProblemObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProblemObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ProblemObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:value">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-age" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-age.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-age.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])">observation SHALL conform to AgeObservation</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-prognosis" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-prognosis.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-prognosis.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])">observation SHALL conform to PrognosisObservation</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-priority" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-priority.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-priority.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-status" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-status.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-status.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])">observation SHALL conform to ProblemStatus</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-reference.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-assessment" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-assessment.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-assessment.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-dateOfDiagnosis" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-dateOfDiagnosis.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProblemObservation-errors-entryRelationship-dateOfDiagnosis.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])">act SHALL conform to DateOfDiagnosisAct</assert>
    </rule>
  </pattern>
  <pattern id="ProblemSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.5.1:2015-08-01-->
    <rule id="ProblemSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.5.1') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:entry[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entry:observation is 0..1</assert>
    </rule>
    <rule id="ProblemSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.5.1') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.5.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.5.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="ProblemSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11450-4'">@code SHALL = '11450-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProblemSection-errors-entry-act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:observation)]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ProblemSection-errors-entry-act.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])">act SHALL conform to ProblemConcernAct</assert>
    </rule>
    <rule id="ProblemSection-errors-entry-observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProblemSection-errors-entry-observation.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])">observation SHALL conform to HealthStatusObservation</assert>
    </rule>
  </pattern>
  <pattern id="ProblemStatus-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.6:2019-06-20-->
    <rule id="ProblemStatus-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.6') and (@extension = '2019-06-20')])=1">Cardinality of templateId:problem-status is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ProblemStatus-errors-templateId-problem-status" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.6') and (@extension = '2019-06-20')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.6'">@root SHALL = '2.16.840.1.113883.10.20.22.4.6'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-20'">@extension SHALL = '2019-06-20'</assert>
    </rule>
    <rule id="ProblemStatus-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="ProblemStatus-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '33999-4'">@code SHALL = '33999-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProblemStatus-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProblemStatus-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProblemStatus-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ProblemStatus-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]/cda:value">
      <assert test="@nullFlavor or contains($ProblemStatus, @code)">SHALL be selected from ValueSet ProblemStatus</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureActivityProcedure-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.14:2024-05-01-->
    <rule id="ProcedureActivityProcedure-errors-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.14') and (@extension = '2024-05-01')])=1">Cardinality of templateId:procedure is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PROC'">@classCode SHALL = 'PROC'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:priorityCode) &lt;= 1">Cardinality of priorityCode is 0..1</assert>
      <assert test="count(cda:methodCode) &lt;= 1">Cardinality of methodCode is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]) &lt;= 1">Cardinality of entryRelationship:instruction is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-templateId-procedure" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.14') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.14'">@root SHALL = '2.16.840.1.113883.10.20.22.4.14'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-classCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/@classCode">
      <assert test="contains($ActClassProcedure, .)">SHALL be selected from ValueSet ActClassProcedure</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-moodCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XDocumentProcedureMood, .)">SHALL be selected from ValueSet XDocumentProcedureMood</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code">
      <assert test="count(cda:originalText) &lt;= 1">Cardinality of originalText is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-code.originalText" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code/cda:originalText">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-code.originalText.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code/cda:originalText/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-text" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-text.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-statusCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-statusCode.code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($ProcedureActStatusCode, .)">SHALL be selected from ValueSet ProcedureActStatusCode</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-effectiveTime" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-effectiveTime.low" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-effectiveTime.high" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-priorityCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:priorityCode">
      <assert test="@nullFlavor or contains($ActPriority, @code)">SHALL be selected from ValueSet ActPriority</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-specimen" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:specimen">
      <assert test="count(cda:specimenRole)=1">Cardinality of specimenRole is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.assignedPerson" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.assignedPerson.name" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.representedOrganization" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization">
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-performer.assignedEntity.representedOrganization.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-author" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-productInstance" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'DEV'">@typeCode SHALL = 'DEV'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-productInstance.participantRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'DEV')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)])">participantRole SHALL conform to ProductInstance</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-serviceDeliveryLocation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'LOC'">@typeCode SHALL = 'LOC'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-participant-serviceDeliveryLocation.participantRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])">participantRole SHALL conform to ServiceDeliveryLocation</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-encounter" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and not(cda:substanceAdministration) and (cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:encounter)=1">Cardinality of encounter is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-encounter.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and not(cda:substanceAdministration) and (cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-encounter.encounter" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and not(cda:substanceAdministration) and (cda:encounter)]/cda:encounter">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ENC'">@classCode SHALL = 'ENC'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-encounter.encounter.moodCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and not(cda:substanceAdministration) and (cda:encounter)]/cda:encounter/@moodCode">
      <assert test="contains($XDocumentEncounterMood, .)">SHALL be selected from ValueSet XDocumentEncounterMood</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-instruction" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-instruction.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-instruction.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])">act SHALL conform to Instruction</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-indication" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-indication.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-medication" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-medication.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-medication.substanceAdministration" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:encounter)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-reaction" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-reaction.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-reaction.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])">observation SHALL conform to ReactionObservation</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-assessmentScaleObs" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-assessmentScaleObs.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-assessmentScaleObs.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-entryReference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
      <assert test="count(cda:encounter)=0">Cardinality of encounter is 0..0</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-entryReference.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-errors-entryRelationship-entryReference.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureDescriptionSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.27-->
    <rule id="ProcedureDescriptionSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.27')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureDescriptionSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.27')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.27'">@root SHALL = '2.16.840.1.113883.10.20.22.2.27'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProcedureDescriptionSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '29554-3'">@code SHALL = '29554-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureDispositionSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.18.2.12-->
    <rule id="ProcedureDispositionSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.18.2.12')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureDispositionSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.18.2.12')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.18.2.12'">@root SHALL = '2.16.840.1.113883.10.20.18.2.12'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProcedureDispositionSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59775-7'">@code SHALL = '59775-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureEstimatedBloodLossSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.18.2.9-->
    <rule id="ProcedureEstimatedBloodLossSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.18.2.9')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureEstimatedBloodLossSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.18.2.9')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.18.2.9'">@root SHALL = '2.16.840.1.113883.10.20.18.2.9'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProcedureEstimatedBloodLossSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59770-8'">@code SHALL = '59770-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureFindingsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.28:2015-08-01-->
    <rule id="ProcedureFindingsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.28') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureFindingsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.28') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.28'">@root SHALL = '2.16.840.1.113883.10.20.22.2.28'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="ProcedureFindingsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59776-5'">@code SHALL = '59776-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProcedureFindingsSection-errors-entry-problem" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureFindingsSection-errors-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureImplantsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.40-->
    <rule id="ProcedureImplantsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.40')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureImplantsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.40')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.40'">@root SHALL = '2.16.840.1.113883.10.20.22.2.40'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProcedureImplantsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59771-6'">@code SHALL = '59771-6'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureIndicationsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.29:2014-06-09-->
    <rule id="ProcedureIndicationsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.29') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureIndicationsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.29') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.29'">@root SHALL = '2.16.840.1.113883.10.20.22.2.29'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="ProcedureIndicationsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59768-2'">@code SHALL = '59768-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProcedureIndicationsSection-errors-entry-indication" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ProcedureIndicationsSection-errors-entry-indication.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="cda:value or (/cda:ClinicalDocument//cda:observation[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:value])">If the ID element does not reference a problem recorded elsewhere in the document, then observation/value must be populated with a coded entry.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])">observation SHALL conform to Indication</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.6:2024-05-01-->
    <rule id="ProcedureNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.6') and (@extension = '2024-05-01')])=1">Cardinality of templateId:procedure-note is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:documentationOf)&gt;=1">Cardinality of documentationOf is 1..*</assert>
      <assert test="count(cda:authorization) &lt;= 1">Cardinality of authorization is 0..1</assert>
      <assert test="count(cda:componentOf) &lt;= 1">Cardinality of componentOf is 0..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-templateId-procedure-note" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.6') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.6'">@root SHALL = '2.16.840.1.113883.10.20.22.1.6'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ProcedureNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProcedureNoteDocumentTypeCodes, @code)">SHALL be selected from ValueSet ProcedureNoteDocumentTypeCodes</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant-participant1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:functionCode)=1">Cardinality of functionCode is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant-participant1.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]/cda:functionCode">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'PCP'">@code SHALL = 'PCP'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.88'">@codeSystem SHALL = '2.16.840.1.113883.5.88'</assert>
    </rule>
    <rule id="ProcedureNote-errors-participant-participant1.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PROV'">@classCode SHALL = 'PROV'</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(@typeCode = 'PPRF')])=1">Cardinality of performer:primary is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(((cda:width | cda:high))) = 1">Width and high are mutually exclusive. If width is known, high **SHALL NOT** be present. If with is not present, **SHALL** include high.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:width) &lt;= 1">Cardinality of width is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-primary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PPRF'">@typeCode SHALL = 'PPRF'</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-primary.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-secondary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRF'">@typeCode SHALL = 'SPRF'</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-secondary.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="ProcedureNote-errors-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-authorization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:authorization">
      <assert test="count(cda:consent)=1">Cardinality of consent is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-authorization.consent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:authorization/cda:consent">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CONS'">@classCode SHALL = 'CONS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-authorization.consent.statusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:authorization/cda:consent/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:encounterParticipant[(@typeCode = 'REF')]) &lt;= 1">Cardinality of encounterParticipant:referrer is 0..1</assert>
      <assert test="count(cda:location)=1">Cardinality of location is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter.encounterParticipant-referrer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant[(@typeCode = 'REF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REF'">@typeCode SHALL = 'REF'</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter.encounterParticipant-referrer.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:encounterParticipant[(@typeCode = 'REF')]/@typeCode">
      <assert test="contains($XEncounterParticipant, .)">SHALL be selected from ValueSet XEncounterParticipant</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter.location" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location">
      <assert test="count(cda:healthCareFacility)=1">Cardinality of healthCareFacility is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-componentOf.encompassingEncounter.location.healthCareFacility" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location/cda:healthCareFacility">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="ProcedureNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)]]]) or not(cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">This structuredBody **SHALL NOT** contain a Chief Complaint and Reason for Visit Section (2.16.840.1.113883.10.20.22.2.13) when either a Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1) or a Reason for Visit Section (2.16.840.1.113883.10.20.22.2.12) is present.</assert>
      <assert test="count(cda:component)&gt;=5">Cardinality of component is 5..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]])=1">Cardinality of component:complications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]])=1">Cardinality of component:procedureDescription is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]])=1">Cardinality of component:indications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])]])=1">Cardinality of component:postProcedureDx is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:allergies is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:anesthesia is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaintRFV is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:historyPresentIllness is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)])]]) &lt;= 1">Cardinality of component:medicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medsAdministered is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:plannedProcedure is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:procedureDisposition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]) &lt;= 1">Cardinality of component:estBloodLoss is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:findings is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]) &lt;= 1">Cardinality of component:implants is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]) &lt;= 1">Cardinality of component:specimensTaken is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]) &lt;= 1">Cardinality of component:reasonForVisit is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-complications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-complications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01'])">section SHALL conform to ComplicationsSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedureDescription" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedureDescription.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.27' and not(@extension)])">section SHALL conform to ProcedureDescriptionSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-indications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-indications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09'])">section SHALL conform to ProcedureIndicationsSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-postProcedureDx" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-postProcedureDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])">section SHALL conform to PostprocedureDiagnosisSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-assessment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])">section SHALL conform to AssessmentSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])">section SHALL conform to AssessmentandPlanSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-anesthesia" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-anesthesia.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09'])">section SHALL conform to AnesthesiaSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-chiefComplaint.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])">section SHALL conform to ChiefComplaintSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-chiefComplaintRFV" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-chiefComplaintRFV.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]])">When using this section, the Chief Complaint Section and the Reason for Visit Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.13' and not(@extension)])">section SHALL conform to ChiefComplaintandReasonforVisitSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-familyHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])">section SHALL conform to FamilyHistorySection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-pastMedicalHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])">section SHALL conform to PastMedicalHistory</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-historyPresentIllness" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-historyPresentIllness.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])">section SHALL conform to HistoryofPresentIllnessSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medicalHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.39' and not(@extension)])">section SHALL conform to MedicalGeneralHistorySection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])">section SHALL conform to MedicationsSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medsAdministered" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-medsAdministered.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09'])">section SHALL conform to MedicationsAdministeredSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-physicalExam.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])">section SHALL conform to PhysicalExamSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-plannedProcedure" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-plannedProcedure.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09'])">section SHALL conform to PlannedProcedureSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedureDisposition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedureDisposition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.12' and not(@extension)])">section SHALL conform to ProcedureDispositionSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-estBloodLoss" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-estBloodLoss.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.18.2.9' and not(@extension)])">section SHALL conform to ProcedureEstimatedBloodLossSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-findings" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-findings.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01'])">section SHALL conform to ProcedureFindingsSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-implants" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-implants.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.40' and not(@extension)])">section SHALL conform to ProcedureImplantsSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-specimensTaken" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-specimensTaken.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)])">section SHALL conform to ProcedureSpecimensTakenSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])">section SHALL conform to ProceduresSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-reasonForVisit" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-reasonForVisit.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)])">section SHALL conform to ReasonforVisitSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-reviewOfSystems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])">section SHALL conform to ReviewofSystemsSection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])">section SHALL conform to SocialHistorySection</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProcedureNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureSpecimensTakenSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.31-->
    <rule id="ProcedureSpecimensTakenSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.31')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProcedureSpecimensTakenSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.31')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.31'">@root SHALL = '2.16.840.1.113883.10.20.22.2.31'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProcedureSpecimensTakenSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.31' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '59773-2'">@code SHALL = '59773-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ProceduresSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.7.1:2014-06-09-->
    <rule id="ProceduresSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.7.1') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ProceduresSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.7.1') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.7.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.7.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="ProceduresSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '47519-4'">@code SHALL = '47519-4'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ProceduresSection-errors-entry-entryProcedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="ProceduresSection-errors-entry-entryProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])">procedure SHALL conform to ProcedureActivityProcedure</assert>
    </rule>
  </pattern>
  <pattern id="ProductInstance-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.37-->
    <rule id="ProductInstance-errors-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.37')])=1">Cardinality of templateId:product-instance is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:playingDevice)=1">Cardinality of playingDevice is 1..1</assert>
      <assert test="count(cda:scopingEntity)=1">Cardinality of scopingEntity is 1..1</assert>
    </rule>
    <rule id="ProductInstance-errors-templateId-product-instance" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.37')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.37'">@root SHALL = '2.16.840.1.113883.10.20.22.4.37'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProductInstance-errors-playingDevice" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]/cda:playingDevice">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="ProductInstance-errors-scopingEntity" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]/cda:scopingEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
  </pattern>
  <pattern id="PrognosisObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.113-->
    <rule id="PrognosisObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.113')])=1">Cardinality of templateId:prognosis-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="PrognosisObservation-errors-templateId-prognosis-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.113')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.113'">@root SHALL = '2.16.840.1.113883.10.20.22.4.113'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="PrognosisObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="PrognosisObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75328-5'">@code SHALL = '75328-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="PrognosisObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="PrognosisObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="PrognosisObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="ProgressNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.9:2024-05-01-->
    <rule id="ProgressNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.9') and (@extension = '2024-05-01')])=1">Cardinality of templateId:progress-note is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:documentationOf) &lt;= 1">Cardinality of documentationOf is 0..1</assert>
      <assert test="count(cda:componentOf)=1">Cardinality of componentOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-templateId-progress-note" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.9') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.9'">@root SHALL = '2.16.840.1.113883.10.20.22.1.9'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ProgressNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProgressNoteDocumentTypeCode, @code)">SHALL be selected from ValueSet ProgressNoteDocumentTypeCode</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.21.3.1')])=1">Cardinality of templateId:secondary is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf.serviceEvent.templateId-secondary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:templateId[(@root = '2.16.840.1.113883.10.20.21.3.1')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.21.3.1'">@root SHALL = '2.16.840.1.113883.10.20.21.3.1'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProgressNote-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="not(not(cda:width)) or cda:high">If a width element is not present, the serviceEvent **SHALL** include effectiveTime/high (CONF:1198-10066).</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:location)=1">Cardinality of location is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.location" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location">
      <assert test="count(cda:healthCareFacility)=1">Cardinality of healthCareFacility is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-componentOf.encompassingEncounter.location.healthCareFacility" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:location/cda:healthCareFacility">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="ProgressNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:allergies is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:chiefComplaint is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:activities is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:instructions is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)])]]) &lt;= 1">Cardinality of component:objective is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:problems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:results is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)])]]) &lt;= 1">Cardinality of component:subjective is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advDirectives is 0..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-assessment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])">section SHALL conform to AssessmentSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])">section SHALL conform to AssessmentandPlanSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-chiefComplaint" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-chiefComplaint.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1' and not(@extension)])">section SHALL conform to ChiefComplaintSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-activities" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-activities.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])">section SHALL conform to ActivitiesSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-instructions" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-instructions.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Instruction</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09'])">section SHALL conform to InstructionsSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])">section SHALL conform to MedicationsSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-objective" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-objective.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.1' and not(@extension)])">section SHALL conform to ObjectiveSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-physicalExam.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])">section SHALL conform to PhysicalExamSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-problems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-problems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])">section SHALL conform to ProblemSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])">section SHALL conform to ResultsSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-reviewOfSystems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])">section SHALL conform to ReviewofSystemsSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-subjective" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-subjective.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)])">section SHALL conform to SubjectiveSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])">section SHALL conform to VitalSignsSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])">section SHALL conform to NutritionSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-mentalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])">section SHALL conform to MentalStatusSection</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-advDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ProgressNote-errors-component.structuredBody.component-advDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
  </pattern>
  <pattern id="ProgressTowardGoalObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.110-->
    <rule id="ProgressTowardGoalObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.110')])=1">Cardinality of templateId:progress-toward-goal-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-templateId-progress-toward-goal-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.110')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.110'">@root SHALL = '2.16.840.1.113883.10.20.22.4.110'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="ProgressTowardGoalObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($GoalAchievement, @code)">SHALL be selected from ValueSet GoalAchievement</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAssemblerParticipation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.7:2020-05-19-->
    <rule id="ProvenanceAssemblerParticipation-errors-root" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.5.7') and (@extension = '2020-05-19')])=1">Cardinality of templateId:provenance-assembler is 1..1</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'DEV'">@typeCode SHALL = 'DEV'</assert>
      <assert test="count(cda:functionCode)=1">Cardinality of functionCode is 1..1</assert>
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-templateId-provenance-assembler" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.5.7') and (@extension = '2020-05-19')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.5.7'">@root SHALL = '2.16.840.1.113883.10.20.22.5.7'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2020-05-19'">@extension SHALL = '2020-05-19'</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-functionCode" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:functionCode">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'assembler'">@code SHALL = 'assembler'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.4.642.4.1131'">@codeSystem SHALL = '2.16.840.1.113883.4.642.4.1131'</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-associatedEntity" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OWN'">@classCode SHALL = 'OWN'</assert>
      <assert test="count(cda:scopingOrganization)=1">Cardinality of scopingOrganization is 1..1</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-associatedEntity.scopingOrganization" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-errors-associatedEntity.scopingOrganization.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAuthorParticipation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.6:2019-10-01-->
    <rule id="ProvenanceAuthorParticipation-errors-root" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.5.6') and (@extension = '2019-10-01')])=1">Cardinality of templateId:provenance-author is 1..1</assert>
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-templateId-provenance-author" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.5.6') and (@extension = '2019-10-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.5.6'">@root SHALL = '2.16.840.1.113883.10.20.22.5.6'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-10-01'">@extension SHALL = '2019-10-01'</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor">
      <let name="r1" value="cda:id[1]/@root"/>
      <let name="r2" value="cda:id[1]/@extension"/>
      <assert test="@nullFlavor or (cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)) or (/cda:ClinicalDocument//cda:assignedAuthor[cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2] and cda:addr and cda:telecom and (cda:assignedPerson/cda:name or cda:assignedAuthoringDevice/cda:manufacturerModelName)])">Authors require addr, telecom, and either assignedPerson/name or assignedAuthoringDevice/manufacturerModelName. These may be present on this author or on another instance of an Author Participation in the document that has an id that matches the first id of this author.</assert>
      <assert test="cda:representedOrganization or (/cda:ClinicalDocument//cda:author[cda:templateId[self::node()/@root = '2.16.840.1.113883.10.20.22.5.6' and self::node()/@extension = '2019-10-01'] and cda:assignedAuthor/cda:representedOrganization and cda:assignedAuthor/cda:id[self::node()/@root = $r1 and (not(self::node()/@extension) and not($r2)) or self::node()/@extension = $r2]])">If the assignedAuthor/id is not referencing a Provenance Author described elsewhere in the document with a representedOrganization populated, this assignedAuthor SHALL contain exactly one [1..1] representedOrganization (CONF:4515-64).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.6')])=1">Cardinality of id:npi is 1..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:assignedAuthoringDevice) &lt;= 1">Cardinality of assignedAuthoringDevice is 0..1</assert>
      <assert test="count(cda:representedOrganization) &lt;= 1">Cardinality of representedOrganization is 0..1</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.id-npi" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:id[(@root = '2.16.840.1.113883.4.6')]">
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.4.6'">@root SHALL = '2.16.840.1.113883.4.6'</assert>
      <assert test="count(@extension) &lt;= 1">Cardinality of @extension is 0..1</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.assignedPerson" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.assignedPerson.name" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:assignedPerson/cda:name">
      <assert test="@nullFlavor or count(cda:family) = 1">SHALL contain exactly one [1..1] family (CONF:81-7159).</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.representedOrganization" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:representedOrganization">
      <assert test="@nullFlavor = 'NA' or (cda:id[@root = '2.16.840.1.113883.4.2'] and cda:id[@root = '2.16.840.1.113883.4.6'] and cda:name)">If the author is not a clinician, set nullFlavor='NA'. Otherwise, the taxId, npi, and name are required.</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.2')]) &lt;= 1">Cardinality of id:taxId is 0..1</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.6')]) &lt;= 1">Cardinality of id:npi is 0..1</assert>
      <assert test="count(cda:name) &lt;= 1">Cardinality of name is 0..1</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.representedOrganization.id-taxId" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:representedOrganization/cda:id[(@root = '2.16.840.1.113883.4.2')]">
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.4.2'">@root SHALL = '2.16.840.1.113883.4.2'</assert>
      <assert test="count(@extension) &lt;= 1">Cardinality of @extension is 0..1</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-errors-assignedAuthor.representedOrganization.id-npi" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:representedOrganization/cda:id[(@root = '2.16.840.1.113883.4.6')]">
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.4.6'">@root SHALL = '2.16.840.1.113883.4.6'</assert>
      <assert test="count(@extension) &lt;= 1">Cardinality of @extension is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="ReactionObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.9:2014-06-09-->
    <rule id="ReactionObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.9') and (@extension = '2014-06-09')])=1">Cardinality of templateId:reaction-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:severity is 0..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-templateId-reaction-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.9') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.9'">@root SHALL = '2.16.840.1.113883.10.20.22.4.9'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="ReactionObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="ReactionObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="ReactionObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ReactionObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="ReactionObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-procedure" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration) and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-procedure.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration) and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-procedure.procedure" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration) and not(cda:observation)]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])">procedure SHALL conform to ProcedureActivityProcedure</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-medication" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'RSON'">@typeCode SHALL = 'RSON'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:substanceAdministration)=1">Cardinality of substanceAdministration is 1..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-medication.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-medication.substanceAdministration" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:observation)]/cda:substanceAdministration">
      <assert test="not(cda:doseQuantity/@unit) or not(cda:administrationUnitCode)">If doseQuantity/@unit is present, then administrationUnitCode SHALL NOT be present.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])">substanceAdministration SHALL conform to MedicationActivity</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-severity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-severity.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="ReactionObservation-errors-entryRelationship-severity.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])">observation SHALL conform to SeverityObservation</assert>
    </rule>
  </pattern>
  <pattern id="Reason-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.88:2023-05-01-->
    <rule id="Reason-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.24.3.88') and (@extension = '2023-05-01')])=1">Cardinality of templateId:reason is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="Reason-errors-templateId-reason" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.24.3.88') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.24.3.88'">@root SHALL = '2.16.840.1.113883.10.20.24.3.88'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="Reason-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="Reason-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '77301-0'">@code SHALL = '77301-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="Reason-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="Reason-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="Reason-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="Reason-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="ReasonforReferralSection-errors">
    <!--urn:hl7ii:1.3.6.1.4.1.19376.1.5.3.1.3.1:2014-06-09-->
    <rule id="ReasonforReferralSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.1') and (@extension = '2014-06-09')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ReasonforReferralSection-errors-templateId-section" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.1') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '1.3.6.1.4.1.19376.1.5.3.1.3.1'">@root SHALL = '1.3.6.1.4.1.19376.1.5.3.1.3.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="ReasonforReferralSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '42349-1'">@code SHALL = '42349-1'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ReasonforReferralSection-errors-entry-patientReferral" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)])]]">
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="ReasonforReferralSection-errors-entry-patientReferral.act" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)])]]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)])">act SHALL conform to PatientReferralAct</assert>
    </rule>
  </pattern>
  <pattern id="ReasonforVisitSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.12-->
    <rule id="ReasonforVisitSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.12')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ReasonforVisitSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.12')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.12'">@root SHALL = '2.16.840.1.113883.10.20.22.2.12'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ReasonforVisitSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.12' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '29299-5'">@code SHALL = '29299-5'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="ReferralNote-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.14:2024-05-01-->
    <rule id="ReferralNote-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.14') and (@extension = '2024-05-01')])=1">Cardinality of templateId:referral-note is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:informationRecipient)=1">Cardinality of informationRecipient is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-templateId-referral-note" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.14') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.14'">@root SHALL = '2.16.840.1.113883.10.20.22.1.14'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="ReferralNote-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ReferralDocumentType, @code)">SHALL be selected from ValueSet ReferralDocumentType</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="count(cda:informationRecipient)=1">Cardinality of informationRecipient is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient.informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ReferralNote-errors-informationRecipient.intendedRecipient.informationRecipient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="ReferralNote-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity.classCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/@classCode">
      <assert test="contains($INDRoleclassCodes, .)">SHALL be selected from ValueSet INDRoleclassCodes</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-indirect.associatedEntity.associatedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CALLBCK'">@typeCode SHALL = 'CALLBCK'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
      <assert test="count(cda:scopingOrganization) &lt;= 1">Cardinality of scopingOrganization is 0..1</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ReferralNote-errors-participant-callback.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="ReferralNote-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="count(cda:component)&gt;=4">Cardinality of component is 4..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advanceDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:hpi is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problem is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:results is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:vitalSigns is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medicalEquip is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergies is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:medicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]) &lt;= 1">Cardinality of component:generalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]])=1">Cardinality of component:reasonForReferral is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:payers is 0..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-advanceDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-advanceDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-hpi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-hpi.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])">section SHALL conform to HistoryofPresentIllnessSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-familyHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])">section SHALL conform to FamilyHistorySection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])">section SHALL conform to ImmunizationsSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-problem" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-problem.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])">section SHALL conform to ProblemSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])">section SHALL conform to ProceduresSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])">section SHALL conform to ResultsSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-reviewOfSystems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])">section SHALL conform to ReviewofSystemsSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])">section SHALL conform to SocialHistorySection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])">section SHALL conform to VitalSignsSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-functionalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])">section SHALL conform to FunctionalStatusSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-physicalExam.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])">section SHALL conform to PhysicalExamSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])">section SHALL conform to NutritionSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-mentalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])">section SHALL conform to MentalStatusSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medicalEquip" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medicalEquip.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])">section SHALL conform to MedicalEquipmentSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-allergies" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-allergies.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-assessment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])">section SHALL conform to AssessmentSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])">section SHALL conform to AssessmentandPlanSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medicalHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])">section SHALL conform to PastMedicalHistory</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-generalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])">section SHALL conform to GeneralStatusSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])">section SHALL conform to MedicationsSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-reasonForReferral" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-reasonForReferral.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])">section SHALL conform to ReasonforReferralSection</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-payers" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="ReferralNote-errors-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])">section SHALL conform to PayersSection</assert>
    </rule>
  </pattern>
  <pattern id="RelatedPersonRelationshipAndNameParticipant-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.8:2023-05-01-->
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-root" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.5.8') and (@extension = '2023-05-01')])=1">Cardinality of templateId:related-person is 1..1</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-templateId-related-person" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.5.8') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.5.8'">@root SHALL = '2.16.840.1.113883.10.20.22.5.8'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.code" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHALL be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.associatedPerson" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-errors-associatedEntity.associatedPerson.name" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:associatedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
  </pattern>
  <pattern id="ResultObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.2:2023-05-01-->
    <rule id="ResultObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.2') and (@extension = '2023-05-01')])=1">Cardinality of templateId:result-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ']) &lt;= 1">Cardinality of value:physical-quantity is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
      <assert test="count(cda:methodCode) &lt;= 1">Cardinality of methodCode is 0..1</assert>
      <assert test="count(cda:targetSiteCode) &lt;= 1">Cardinality of targetSiteCode is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-templateId-result-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.2') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.2'">@root SHALL = '2.16.840.1.113883.10.20.22.4.2'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="ResultObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="ResultObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:code">
      <assert test="count(((@code | @nullFlavor))) = 1">SHALL contain either a @code attribute or a @nullFlavor attribute, but not both.</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ResultObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ResultObservation-errors-statusCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:statusCode/@code">
      <assert test="contains($ResultStatus, .)">SHALL be selected from ValueSet ResultStatus</assert>
    </rule>
    <rule id="ResultObservation-errors-value-physical-quantity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:value[@xsi:type='PQ']">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
      <assert test="count(cda:translation) &lt;= 1">Cardinality of translation is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="count(cda:translation) &lt;= 1">Cardinality of translation is 0..1</assert>
    </rule>
    <rule id="ResultObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ResultObservation-errors-referenceRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:referenceRange">
      <assert test="count(cda:observationRange)=1">Cardinality of observationRange is 1..1</assert>
    </rule>
    <rule id="ResultObservation-errors-referenceRange.observationRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:referenceRange/cda:observationRange">
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="ResultOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.1:2023-05-01-->
    <rule id="ResultOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.1') and (@extension = '2023-05-01')])=1">Cardinality of templateId:result-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:procedure)])&gt;=1">Cardinality of component:resultObs is 1..*</assert>
      <assert test="count(cda:component[not(cda:observation) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])]]) &lt;= 1">Cardinality of component:specimenProc is 0..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-templateId-result-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.1') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.1'">@root SHALL = '2.16.840.1.113883.10.20.22.4.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="ResultOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="ResultOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="ResultOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-statusCode.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:statusCode/@code">
      <assert test="contains($ResultStatus, .)">SHALL be selected from ValueSet ResultStatus</assert>
    </rule>
    <rule id="ResultOrganizer-errors-effectiveTime" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-specimen" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:specimen">
      <assert test="count(cda:specimenRole)=1">Cardinality of specimenRole is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-specimen.specimenRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:specimen/cda:specimenRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:specimenPlayingEntity)=1">Cardinality of specimenPlayingEntity is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-specimen.specimenRole.specimenPlayingEntity" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:specimen/cda:specimenRole/cda:specimenPlayingEntity">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="ResultOrganizer-errors-component-resultObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:procedure)]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-component-resultObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:procedure)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])">observation SHALL conform to ResultObservation</assert>
    </rule>
    <rule id="ResultOrganizer-errors-component-specimenProc" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[not(cda:observation) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])]]">
      <assert test="count(cda:procedure)=1">Cardinality of procedure is 1..1</assert>
    </rule>
    <rule id="ResultOrganizer-errors-component-specimenProc.procedure" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[not(cda:observation) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])]]/cda:procedure">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])">procedure SHALL conform to SpecimenCollectionProcedure</assert>
    </rule>
  </pattern>
  <pattern id="ResultsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.3.1:2015-08-01-->
    <rule id="ResultsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.3.1') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ResultsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.3.1') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.3.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.3.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="ResultsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '30954-2'">@code SHALL = '30954-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="ResultsSection-errors-entry-organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="ResultsSection-errors-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])">organizer SHALL conform to ResultOrganizer</assert>
    </rule>
  </pattern>
  <pattern id="ReviewofSystemsSection-errors">
    <!--urn:oid:1.3.6.1.4.1.19376.1.5.3.1.3.18-->
    <rule id="ReviewofSystemsSection-errors-root" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.18')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="ReviewofSystemsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)]]/cda:templateId[(@root = '1.3.6.1.4.1.19376.1.5.3.1.3.18')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '1.3.6.1.4.1.19376.1.5.3.1.3.18'">@root SHALL = '1.3.6.1.4.1.19376.1.5.3.1.3.18'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ReviewofSystemsSection-errors-code" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '10187-3'">@code SHALL = '10187-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="RiskConcernAct-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.136:2015-08-01-->
    <rule id="RiskConcernAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.136') and (@extension = '2015-08-01')])=1">Cardinality of templateId:risk-concern-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-templateId-risk-concern-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.136') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.136'">@root SHALL = '2.16.840.1.113883.10.20.22.4.136'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="RiskConcernAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="RiskConcernAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="RiskConcernAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '281694009'">@code SHALL = '281694009'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="RiskConcernAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="RiskConcernAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-statusCode.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:statusCode/@code">
      <assert test="contains($ProblemActStatusCode, .)">SHALL be selected from ValueSet ProblemActStatusCode</assert>
    </rule>
    <rule id="RiskConcernAct-errors-author" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation1" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation1.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation1.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-allergy-IntoleranceObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-allergy-IntoleranceObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-allergy-IntoleranceObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])">observation SHALL conform to AllergyIntoleranceObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceRefr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceRefr.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceRefr.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceComp" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'COMP') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceComp.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'COMP') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryReferenceComp.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'COMP') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-assessmentScaleObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-assessmentScaleObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-assessmentScaleObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-mentalStatusObservation2" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-mentalStatusObservation2.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-mentalStatusObservation2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])">observation SHALL conform to MentalStatusObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-self-CareActivitiesADLandIADL" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-self-CareActivitiesADLandIADL.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-self-CareActivitiesADLandIADL.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])">observation SHALL conform to SelfCareActivitiesADLandIADL</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-smokingStatus" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-smokingStatus.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-smokingStatus.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="not((cda:code/@code = '72166-2' or cda:code/@code = '11367-0')) or cda:value/@code">When code is Smoking Status (72166-2) or Tobacco Use (11367-0), the value SHALL be coded</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])">observation SHALL conform to SmokingStatus</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-encounterDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-encounterDiagnosis.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-encounterDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:organizer)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])">act SHALL conform to EncounterDiagnosis</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryRelationship11" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryRelationship11.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-entryRelationship11.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])">organizer SHALL conform to FamilyHistoryOrganizer</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-functionalStatusObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-functionalStatusObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-functionalStatusObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])">observation SHALL conform to FunctionalStatusObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-hospitalAdmissionDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])] and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-hospitalAdmissionDiagnosis.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])] and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-hospitalAdmissionDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])">act SHALL conform to HospitalAdmissionDiagnosis</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionAssessment" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionAssessment.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionAssessment.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])">observation SHALL conform to NutritionAssessment</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-postprocedureDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])] and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-postprocedureDiagnosis.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])] and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-postprocedureDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])">act SHALL conform to PostprocedureDiagnosis</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-pregnancyObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-pregnancyObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-pregnancyObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])">observation SHALL conform to PregnancyObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-preoperativeDiagnosis" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])] and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-preoperativeDiagnosis.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])] and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-preoperativeDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])">act SHALL conform to PreoperativeDiagnosis</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-reactionObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-reactionObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-reactionObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])">observation SHALL conform to ReactionObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])">observation SHALL conform to ResultObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-sensoryStatus" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-sensoryStatus.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-sensoryStatus.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])">observation SHALL conform to SensoryStatus</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-socialHistoryObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-socialHistoryObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-socialHistoryObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])">observation SHALL conform to SocialHistoryObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-substanceorDeviceAllergy-IntoleranceObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-substanceorDeviceAllergy-IntoleranceObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-substanceorDeviceAllergy-IntoleranceObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09'])">observation SHALL conform to SubstanceOrDeviceAllergyIntoleranceObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-vitalSignObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-vitalSignObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-vitalSignObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])">observation SHALL conform to VitalSignObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-longitudinalCareWoundObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-longitudinalCareWoundObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-longitudinalCareWoundObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])">observation SHALL conform to LongitudinalCareWoundObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation2" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'SPRT') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation2.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'SPRT') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemObservation2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'SPRT') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])">observation SHALL conform to ProblemObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-caregiverCharacteristics" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-caregiverCharacteristics.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-caregiverCharacteristics.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])">observation SHALL conform to CaregiverCharacteristics</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-culturalandReligiousObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-culturalandReligiousObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-culturalandReligiousObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])">observation SHALL conform to CulturalandReligiousObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-characteristicsofHomeEnvironment" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-characteristicsofHomeEnvironment.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-characteristicsofHomeEnvironment.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])">observation SHALL conform to CharacteristicsofHomeEnvironment</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionalStatusObservation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionalStatusObservation.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-nutritionalStatusObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])">observation SHALL conform to NutritionalStatusObservation</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultOrganizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultOrganizer.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-resultOrganizer.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])">organizer SHALL conform to ResultOrganizer</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-priorityPreference2" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act) and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-priorityPreference2.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-priorityPreference2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])">observation SHALL conform to PriorityPreference</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemConcernAct" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:organizer)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemConcernAct.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:organizer)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="RiskConcernAct-errors-entryRelationship-problemConcernAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:organizer)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])">act SHALL conform to ProblemConcernAct</assert>
    </rule>
    <rule id="RiskConcernAct-errors-reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:reference">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'REFR'">@typeCode SHALL = 'REFR'</assert>
      <assert test="count(cda:externalDocument)=1">Cardinality of externalDocument is 1..1</assert>
    </rule>
    <rule id="RiskConcernAct-errors-reference.typeCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:reference/@typeCode">
      <assert test="contains($XActRelationshipExternalReference, .)">SHALL be selected from ValueSet XActRelationshipExternalReference</assert>
    </rule>
    <rule id="RiskConcernAct-errors-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09'])">externalDocument SHALL conform to ExternalDocumentReference</assert>
    </rule>
  </pattern>
  <pattern id="SectionTimeRangeObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.201:2016-06-01-->
    <rule id="SectionTimeRangeObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.201') and (@extension = '2016-06-01')])=1">Cardinality of templateId:section-time-range-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-templateId-section-time-range-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.201') and (@extension = '2016-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.201'">@root SHALL = '2.16.840.1.113883.10.20.22.4.201'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2016-06-01'">@extension SHALL = '2016-06-01'</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '82607-3'">@code SHALL = '82607-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:text">
      <assert test="count(cda:reference)=1">Cardinality of reference is 1..1</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
      <assert test="count(@value)=1">Cardinality of @value is 1..1</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SectionTimeRangeObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]/cda:value">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high)=1">Cardinality of high is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SelfCareActivitiesADLandIADL-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.128-->
    <rule id="SelfCareActivitiesADLandIADL-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.128')])=1">Cardinality of templateId:self-care-activities is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-templateId-self-care-activities" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.128')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.128'">@root SHALL = '2.16.840.1.113883.10.20.22.4.128'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="SensoryStatus-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.127-->
    <rule id="SensoryStatus-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.127')])=1">Cardinality of templateId:sensory-status is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SensoryStatus-errors-templateId-sensory-status" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.127')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.127'">@root SHALL = '2.16.840.1.113883.10.20.22.4.127'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="SensoryStatus-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SensoryStatus-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SensoryStatus-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SensoryStatus-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SensoryStatus-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SensoryStatus-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="SensoryStatus-errors-entryRelationship-assessmentScaleObservation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SensoryStatus-errors-entryRelationship-assessmentScaleObservation.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SensoryStatus-errors-entryRelationship-assessmentScaleObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
  </pattern>
  <pattern id="SerialNumberObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.319:2019-06-21-->
    <rule id="SerialNumberObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.319') and (@extension = '2019-06-21')])=1">Cardinality of templateId:serial-num-obs is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SerialNumberObservation-errors-templateId-serial-num-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.319') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.319'">@root SHALL = '2.16.840.1.113883.10.20.22.4.319'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="SerialNumberObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'C101671'">@code SHALL = 'C101671'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.3.26.1.1'">@codeSystem SHALL = '2.16.840.1.113883.3.26.1.1'</assert>
      <assert test="count(@codeSystemName) &lt;= 1">Cardinality of @codeSystemName is 0..1</assert>
      <assert test="count(@displayName) &lt;= 1">Cardinality of @displayName is 0..1</assert>
    </rule>
    <rule id="SerialNumberObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SerialNumberObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="ServiceDeliveryLocation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.32-->
    <rule id="ServiceDeliveryLocation-errors-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]">
      <assert test="count(((cda:playingDevice | cda:playingEntity))) &lt;= 1">playingDevice and playingEntity are mutually exclusive</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.32')])=1">Cardinality of templateId:service-delivery-loc is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'SDLOC'">@classCode SHALL = 'SDLOC'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:addr) &lt;= 1">Cardinality of addr is 0..1</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-templateId-service-delivery-loc" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.32')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.32'">@root SHALL = '2.16.840.1.113883.10.20.22.4.32'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-id-NPI" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:id[(@root = '2.16.840.1.113883.4.6')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.4.6'">@root SHALL = '2.16.840.1.113883.4.6'</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-id-CLIA" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:id[(@root = '2.16.840.1.113883.4.7')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.4.7'">@root SHALL = '2.16.840.1.113883.4.7'</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-id-NAIC" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:id[(@root = '2.16.840.1.113883.6.300')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.6.300'">@root SHALL = '2.16.840.1.113883.6.300'</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-addr" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-playingEntity" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:playingEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PLC'">@classCode SHALL = 'PLC'</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-errors-playingEntity.classCode" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:playingEntity/@classCode">
      <assert test="contains($EntityClassRoot, .)">SHALL be selected from ValueSet EntityClassRoot</assert>
    </rule>
  </pattern>
  <pattern id="SeverityObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.8:2014-06-09-->
    <rule id="SeverityObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.8') and (@extension = '2014-06-09')])=1">Cardinality of templateId:severity-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SeverityObservation-errors-templateId-severity-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.8') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.8'">@root SHALL = '2.16.840.1.113883.10.20.22.4.8'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="SeverityObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SeverityObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'SEV'">@code SHALL = 'SEV'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="SeverityObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SeverityObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SeverityObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="SexObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.507:2023-07-01-->
    <rule id="SexObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.507') and (@extension = '2023-07-01')])=1">Cardinality of templateId:sex-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SexObservation-errors-templateId-sex-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.507') and (@extension = '2023-07-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.507'">@root SHALL = '2.16.840.1.113883.10.20.22.4.507'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-07-01'">@extension SHALL = '2023-07-01'</assert>
    </rule>
    <rule id="SexObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SexObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '46098-0'">@code SHALL = '46098-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SexObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SexObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SexObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SexObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="SexObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SexualOrientationObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.501:2023-05-01-->
    <rule id="SexualOrientationObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.501') and (@extension = '2023-05-01')])=1">Cardinality of templateId:sexual-orientation-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-templateId-sexual-orientation-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.501') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.501'">@root SHALL = '2.16.840.1.113883.10.20.22.4.501'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '76690-7'">@code SHALL = '76690-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SexualOrientationObservation-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="@nullFlavor or contains($SexualOrientationIncludingNullsAndDataAbsentReason, @code)">SHALL be selected from ValueSet SexualOrientationIncludingNullsAndDataAbsentReason</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatus-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.511:2024-05-01-->
    <rule id="SmokingStatus-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]">
      <assert test="not((cda:code/@code = '72166-2' or cda:code/@code = '11367-0')) or cda:value/@code">When code is Smoking Status (72166-2) or Tobacco Use (11367-0), the value SHALL be coded</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.511') and (@extension = '2024-05-01')])=1">Cardinality of templateId:tobacco-use is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='REAL']) &lt;= 1">Cardinality of value:packYears is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-templateId-tobacco-use" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.511') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.511'">@root SHALL = '2.16.840.1.113883.10.20.22.4.511'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="SmokingStatus-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SmokingStatus-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SmokingStatus-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SmokingStatus-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SmokingStatus-errors-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatusMeaningfulUse-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.78:2024-05-01-->
    <rule id="SmokingStatusMeaningfulUse-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.78') and (@extension = '2024-05-01')])=1">Cardinality of templateId:smoking-status is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-templateId-smoking-status" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.78') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.78'">@root SHALL = '2.16.840.1.113883.10.20.22.4.78'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '72166-2'">@code SHALL = '72166-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-statusCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:statusCode/@code">
      <assert test="contains($CompletedOrNullifiedActStatus, .)">SHALL be selected from ValueSet CompletedOrNullifiedActStatus</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:value">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistoryObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.38:2022-06-01-->
    <rule id="SocialHistoryObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.38') and (@extension = '2022-06-01')])=1">Cardinality of templateId:social-history-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value) &lt;= 1">Cardinality of value is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ']) &lt;= 1">Cardinality of value:physical-quantity is 0..1</assert>
      <assert test="count(cda:value[@xsi:type='CD']) &lt;= 1">Cardinality of value:coded is 0..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-templateId-social-history-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.38') and (@extension = '2022-06-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.38'">@root SHALL = '2.16.840.1.113883.10.20.22.4.38'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2022-06-01'">@extension SHALL = '2022-06-01'</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-value-physical-quantity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:value[@xsi:type='PQ']">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-supportingObs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-supportingObs.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-supportingObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])">observation SHALL conform to AssessmentScaleObservation</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-entryReference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SPRT'">@typeCode SHALL = 'SPRT'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-entryReference.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SocialHistoryObservation-errors-entryRelationship-entryReference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistorySection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.17:2015-08-01-->
    <rule id="SocialHistorySection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.17') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.17') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.17'">@root SHALL = '2.16.840.1.113883.10.20.22.2.17'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="SocialHistorySection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '29762-2'">@code SHALL = '29762-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-socialHistory" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-socialHistory.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])">observation SHALL conform to SocialHistoryObservation</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-pregnancyPregnancy" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-pregnancyPregnancy.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])">observation SHALL conform to PregnancyObservation</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-smokingStatus" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-smokingStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="not((cda:code/@code = '72166-2' or cda:code/@code = '11367-0')) or cda:value/@code">When code is Smoking Status (72166-2) or Tobacco Use (11367-0), the value SHALL be coded</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])">observation SHALL conform to SmokingStatus</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-caregiver" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-caregiver.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])">observation SHALL conform to CaregiverCharacteristics</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-culteralReligious" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-culteralReligious.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])">observation SHALL conform to CulturalandReligiousObservation</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-homeCharacteristics" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SocialHistorySection-errors-entry-homeCharacteristics.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])">observation SHALL conform to CharacteristicsofHomeEnvironment</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenCollectionProcedure-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.415:2018-09-01-->
    <rule id="SpecimenCollectionProcedure-errors-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.415') and (@extension = '2018-09-01')])=1">Cardinality of templateId:specimen-collection-proc is 1..1</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:entryRelationship)&gt;=1">Cardinality of entryRelationship is 1..*</assert>
      <assert test="count(cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)])=1">Cardinality of entryRelationship:specimenRef is 1..1</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-templateId-specimen-collection-proc" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.415') and (@extension = '2018-09-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.415'">@root SHALL = '2.16.840.1.113883.10.20.22.4.415'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2018-09-01'">@extension SHALL = '2018-09-01'</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-moodCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/@moodCode">
      <assert test="contains($XDocumentProcedureMood, .)">SHALL be selected from ValueSet XDocumentProcedureMood</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '17636008'">@code SHALL = '17636008'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-text" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-text.reference" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-specimenRef" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(cda:act)=1">Cardinality of act is 1..1</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-specimenRef.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-specimenRef.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])">act SHALL conform to EntryReference</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-condition" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'COMP'">@typeCode SHALL = 'COMP'</assert>
      <assert test="count(cda:observation) &lt;= 1">Cardinality of observation is 0..1</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-condition.typeCode" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-errors-entryRelationship-condition.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12'])">observation SHALL conform to SpecimenConditionObservation</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenConditionObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.421:2018-06-12-->
    <rule id="SpecimenConditionObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.421') and (@extension = '2018-06-12')])=1">Cardinality of templateId:specimen-condition-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-templateId-specimen-condition-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.421') and (@extension = '2018-06-12')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.421'">@root SHALL = '2.16.840.1.113883.10.20.22.4.421'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2018-06-12'">@extension SHALL = '2018-06-12'</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '93047-7'">@code SHALL = '93047-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SpecimenConditionObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
  </pattern>
  <pattern id="SubjectiveSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.21.2.2-->
    <rule id="SubjectiveSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.21.2.2')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="SubjectiveSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.21.2.2')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.21.2.2'">@root SHALL = '2.16.840.1.113883.10.20.21.2.2'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="SubjectiveSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.2' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '61150-9'">@code SHALL = '61150-9'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceAdministeredAct-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.118-->
    <rule id="SubstanceAdministeredAct-errors-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.118')])=1">Cardinality of templateId:substance-administered-act is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ACT'">@classCode SHALL = 'ACT'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime) &lt;= 1">Cardinality of effectiveTime is 0..1</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-templateId-substance-administered-act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.118')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.118'">@root SHALL = '2.16.840.1.113883.10.20.22.4.118'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-classCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/@classCode">
      <assert test="contains($XActClassDocumentEntryAct, .)">SHALL be selected from ValueSet XActClassDocumentEntryAct</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-moodCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/@moodCode">
      <assert test="contains($XDocumentActMood, .)">SHALL be selected from ValueSet XDocumentActMood</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '416118004'">@code SHALL = '416118004'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.96'">@codeSystem SHALL = '2.16.840.1.113883.6.96'</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-text" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-text.reference" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SubstanceAdministeredAct-errors-statusCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceOrDeviceAllergyIntoleranceObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.90:2014-06-09-->
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.24.3.90') and (@extension = '2014-06-09')])=1">Cardinality of templateId:substance-device-allergy-intolerance-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]) &lt;= 1">Cardinality of entryRelationship:status is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of entryRelationship:severity is 0..1</assert>
      <assert test="count(cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]) &lt;= 1">Cardinality of entryRelationship:criticality is 0..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-templateId-substance-device-allergy-intolerance-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.24.3.90') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.24.3.90'">@root SHALL = '2.16.840.1.113883.10.20.24.3.90'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:value/@code">
      <assert test="contains($AllergyAndIntoleranceType, .)">SHALL be selected from ValueSet AllergyAndIntoleranceType</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-participant-consumable" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CSM'">@typeCode SHALL = 'CSM'</assert>
      <assert test="count(cda:participantRole)=1">Cardinality of participantRole is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-participant-consumable.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'MANU'">@classCode SHALL = 'MANU'</assert>
      <assert test="count(cda:playingEntity)=1">Cardinality of playingEntity is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-participant-consumable.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole/cda:playingEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'MMAT'">@classCode SHALL = 'MMAT'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-participant-consumable.participantRole.playingEntity.classCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'CSM')]/cda:participantRole/cda:playingEntity/@classCode">
      <assert test="contains($EntityClassRoot, .)">SHALL be selected from ValueSet EntityClassRoot</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-status" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-status.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-status.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])">observation SHALL conform to AllergyStatusObservation</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-reaction" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'MFST'">@typeCode SHALL = 'MFST'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-reaction.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-reaction.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])">observation SHALL conform to ReactionObservation</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-severity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-severity.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-severity.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])">observation SHALL conform to SeverityObservation</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-criticality" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'SUBJ'">@typeCode SHALL = 'SUBJ'</assert>
      <assert test="count(@inversionInd)=1">Cardinality of @inversionInd is 1..1</assert>
      <assert test="@inversionInd = 'true'">@inversionInd SHALL = 'true'</assert>
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-criticality.typeCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]/@typeCode">
      <assert test="contains($XActRelationshipEntryRelationship, .)">SHALL be selected from ValueSet XActRelationshipEntryRelationship</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-errors-entryRelationship-criticality.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])">observation SHALL conform to CriticalityObservation</assert>
    </rule>
  </pattern>
  <pattern id="SurgicalDrainsSection-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.7.13-->
    <rule id="SurgicalDrainsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.7.13')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="SurgicalDrainsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.7.13')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.7.13'">@root SHALL = '2.16.840.1.113883.10.20.7.13'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="SurgicalDrainsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.7.13' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11537-8'">@code SHALL = '11537-8'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
  </pattern>
  <pattern id="TobaccoUse-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.85:2014-06-09-->
    <rule id="TobaccoUse-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.85') and (@extension = '2014-06-09')])=1">Cardinality of templateId:tobacco-use is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-templateId-tobacco-use" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.85') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.85'">@root SHALL = '2.16.840.1.113883.10.20.22.4.85'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="TobaccoUse-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="TobaccoUse-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '11367-0'">@code SHALL = '11367-0'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="TobaccoUse-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="TobaccoUse-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="TobaccoUse-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:value">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="TobaccoUse-errors-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:value/@code">
      <assert test="contains($TobaccoUse, .)">SHALL be selected from ValueSet TobaccoUse</assert>
    </rule>
    <rule id="TobaccoUse-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="TransferSummary-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.13:2024-05-01-->
    <rule id="TransferSummary-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.13') and (@extension = '2024-05-01')])=1">Cardinality of templateId:transfer-summary is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:documentationOf)=1">Cardinality of documentationOf is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-templateId-transfer-summary" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.13') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.13'">@root SHALL = '2.16.840.1.113883.10.20.22.1.13'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="TransferSummary-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($TransferDocumentType, @code)">SHALL be selected from ValueSet TransferDocumentType</assert>
    </rule>
    <rule id="TransferSummary-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'IND'">@typeCode SHALL = 'IND'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect.associatedEntity.classCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/@classCode">
      <assert test="contains($INDRoleclassCodes, .)">SHALL be selected from ValueSet INDRoleclassCodes</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-indirect.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'CALLBCK'">@typeCode SHALL = 'CALLBCK'</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'ASSIGNED'">@classCode SHALL = 'ASSIGNED'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:associatedPerson)=1">Cardinality of associatedPerson is 1..1</assert>
      <assert test="count(cda:scopingOrganization) &lt;= 1">Cardinality of scopingOrganization is 0..1</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="TransferSummary-errors-participant-callback.associatedEntity.associatedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:associatedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="TransferSummary-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'PCPR'">@classCode SHALL = 'PCPR'</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:performer)&gt;=1">Cardinality of performer is 1..*</assert>
      <assert test="count(cda:performer[(@typeCode = 'PRF')])&gt;=1">Cardinality of performer:performer1 is 1..*</assert>
    </rule>
    <rule id="TransferSummary-errors-documentationOf.serviceEvent.performer-performer1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PRF')]">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="@typeCode = 'PRF'">@typeCode SHALL = 'PRF'</assert>
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
    </rule>
    <rule id="TransferSummary-errors-documentationOf.serviceEvent.performer-performer1.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PRF')]/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="TransferSummary-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:structuredBody)=1">Cardinality of structuredBody is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]] or (count(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]) = 2)">**SHALL** include an Assessment and Plan Section, or both an Assessment Section and a Plan of Treatment Section.</assert>
      <assert test="not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]]) or not(cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">This structuredBody **SHALL NOT** contain an Assessment and Plan Section (2.16.840.1.113883.10.20.22.2.9:2014-06-09) when either an Assessment Section (2.16.840.1.113883.10.20.22.2.8) or a Plan of Treatment Section (2.16.840.1.113883.10.20.22.2.10:2014-06-09) is present.</assert>
      <assert test="count(cda:component)&gt;=7">Cardinality of component is 7..*</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]) &lt;= 1">Cardinality of component:advanceDirectives is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]])=1">Cardinality of component:allergiesAndIntolerances is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:physicalExam is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:encounters is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:familyHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:functionalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:dischargeDiagnosis is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:immunizations is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:medicalEquip is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]])=1">Cardinality of component:medications is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:payers is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:planOfTreatment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]])=1">Cardinality of component:problem is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:procedures is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]])=1">Cardinality of component:results is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:socialHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]])=1">Cardinality of component:vitalSigns is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:mentalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]) &lt;= 1">Cardinality of component:generalStatus is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]) &lt;= 1">Cardinality of component:reviewOfSystems is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]) &lt;= 1">Cardinality of component:nutrition is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]])=1">Cardinality of component:reasonForReferral is 1..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:pastMedicalHistory is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]) &lt;= 1">Cardinality of component:historyOfPresentIllness is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]) &lt;= 1">Cardinality of component:assessmentAndPlan is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]) &lt;= 1">Cardinality of component:assessment is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionMedications is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]) &lt;= 1">Cardinality of component:admissionDiagnosis is 0..1</assert>
      <assert test="count(cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)])]]) &lt;= 1">Cardinality of component:courseOfCare is 0..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-advanceDirectives" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-advanceDirectives.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]]">If section/@nullFlavor is not present, SHALL contain at least one Advance Directive Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14'])">section SHALL conform to AdvanceDirectivesSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-allergiesAndIntolerances" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-allergiesAndIntolerances.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Allergy Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01'])">section SHALL conform to AllergiesAndIntolerancesSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-physicalExam" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-physicalExam.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01'])">section SHALL conform to PhysicalExamSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-encounters" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-encounters.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Encounter Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01'])">section SHALL conform to EncountersSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-familyHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-familyHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01'])">section SHALL conform to FamilyHistorySection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-functionalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-functionalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09'])">section SHALL conform to FunctionalStatusSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-dischargeDiagnosis" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-dischargeDiagnosis.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])">section SHALL conform to DischargeDiagnosisSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-immunizations" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-immunizations.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Immunization Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01'])">section SHALL conform to ImmunizationsSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-medicalEquip" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-medicalEquip.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])">section SHALL conform to MedicalEquipmentSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-medications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-medications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]]">If section/@nullFlavor is not present, SHALL contain at least one Medication Activity</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09'])">section SHALL conform to MedicationsSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-payers" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])">section SHALL conform to PayersSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-planOfTreatment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-planOfTreatment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09'])">section SHALL conform to PlanofTreatmentSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-problem" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-problem.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Problem Concern Act</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01'])">section SHALL conform to ProblemSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-procedures" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-procedures.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Procedure Activity Procedure</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09'])">section SHALL conform to ProceduresSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-results" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-results.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Result Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01'])">section SHALL conform to ResultsSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-socialHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])">section SHALL conform to SocialHistorySection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-vitalSigns" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-vitalSigns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])]]/cda:section">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01'])">section SHALL conform to VitalSignsSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-mentalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-mentalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01'])">section SHALL conform to MentalStatusSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-generalStatus" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-generalStatus.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.2.5' and not(@extension)])">section SHALL conform to GeneralStatusSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-reviewOfSystems" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-reviewOfSystems.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.18' and not(@extension)])">section SHALL conform to ReviewofSystemsSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-nutrition" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])">section SHALL conform to NutritionSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-reasonForReferral" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-reasonForReferral.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09'])">section SHALL conform to ReasonforReferralSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-pastMedicalHistory" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-pastMedicalHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01'])">section SHALL conform to PastMedicalHistory</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-historyOfPresentIllness" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-historyOfPresentIllness.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)])">section SHALL conform to HistoryofPresentIllnessSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-assessmentAndPlan" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-assessmentAndPlan.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])]]/cda:section">
      <assert test="not(/cda:ClinicalDocument/cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)]] or cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]])">When using this section, the Assessment Section and the Plan of Treatment Section SHALL NOT be used.</assert>
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09'])">section SHALL conform to AssessmentandPlanSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-assessment" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-assessment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.8' and not(@extension)])">section SHALL conform to AssessmentSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-admissionMedications" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-admissionMedications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])">section SHALL conform to AdmissionMedicationsSectionEntriesOptional</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-admissionDiagnosis" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-admissionDiagnosis.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])">section SHALL conform to AdmissionDiagnosisSection</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-courseOfCare" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)])]]">
      <assert test="count(cda:section)=1">Cardinality of section is 1..1</assert>
    </rule>
    <rule id="TransferSummary-errors-component.structuredBody.component-courseOfCare.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)])]]/cda:section">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.64' and not(@extension)])">section SHALL conform to CourseofCareSection</assert>
    </rule>
  </pattern>
  <pattern id="TreatmentInterventionPreference-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.510:2024-05-01-->
    <rule id="TreatmentInterventionPreference-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.510') and (@extension = '2024-05-01')])=1">Cardinality of templateId:treatment-intervention-pref is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'INT'">@moodCode SHALL = 'INT'</assert>
      <assert test="count(@negationInd)=0">Cardinality of @negationInd is 0..0</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-templateId-treatment-intervention-pref" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.510') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.510'">@root SHALL = '2.16.840.1.113883.10.20.22.4.510'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '75773-2'">@code SHALL = '75773-2'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-errors-sdtcPrecondition2.criterion" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/sdtc:precondition2/sdtc:criterion">
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
    </rule>
  </pattern>
  <pattern id="TribalAffiliationObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.506:2023-05-01-->
    <rule id="TribalAffiliationObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]">
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.506') and (@extension = '2023-05-01')])=1">Cardinality of templateId:tribal-affiliation-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:value[@xsi:type='PQ'])=0">Cardinality of value:physical-quantity is 0..0</assert>
      <assert test="count(cda:value[@xsi:type='CD'])=1">Cardinality of value:coded is 1..1</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-templateId-tribal-affiliation-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.506') and (@extension = '2023-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.506'">@root SHALL = '2.16.840.1.113883.10.20.22.4.506'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2023-05-01'">@extension SHALL = '2023-05-01'</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '95370-3'">@code SHALL = '95370-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="TribalAffiliationObservation-errors-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:effectiveTime">
      <assert test="not(((cda:low | cda:high | cda:width | cda:center)))">Interval fields SHALL not be present</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="UDIOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.311:2019-06-21-->
    <rule id="UDIOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.311') and (@extension = '2019-06-21')])=1">Cardinality of templateId:UDI-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])]])=1">Cardinality of component:deviceObs is 1..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-templateId-UDI-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.311') and (@extension = '2019-06-21')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.311'">@root SHALL = '2.16.840.1.113883.10.20.22.4.311'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2019-06-21'">@extension SHALL = '2019-06-21'</assert>
    </rule>
    <rule id="UDIOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="UDIOrganizer-errors-id" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:id">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
      <assert test="not(@code) or @code = '74711-3'">@code, if present, SHALL = '74711-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="UDIOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="UDIOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="UDIOrganizer-errors-component-deviceObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-component-deviceObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])">observation SHALL conform to DeviceIdentifierObservation</assert>
    </rule>
    <rule id="UDIOrganizer-errors-component-otherObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="UDIOrganizer-errors-component-otherObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21'])">observation SHALL conform to LotOrBatchNumberObservation or SerialNumberObservation or ManufacturingDateObservation or ExpirationDateObservation or DistinctIdentificationCodeObservation or BrandNameObservation or ModelNumberObservation or CompanyNameObservation or CatalogNumberObservation or LatexSafetyObservation or MRISafetyObservation or ImplantableDeviceStatusObservation</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeader-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.1:2024-05-01-->
    <rule id="USRealmHeader-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:realmCode)=1">Cardinality of realmCode is 1..1</assert>
      <assert test="count(cda:typeId)=1">Cardinality of typeId is 1..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.1') and (@extension = '2024-05-01')])=1">Cardinality of templateId:us-realm is 1..1</assert>
      <assert test="count(cda:id)=1">Cardinality of id is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:languageCode)=1">Cardinality of languageCode is 1..1</assert>
      <assert test="count(cda:setId) &lt;= 1">Cardinality of setId is 0..1</assert>
      <assert test="count(cda:versionNumber) &lt;= 1">Cardinality of versionNumber is 0..1</assert>
      <assert test="count(cda:recordTarget)&gt;=1">Cardinality of recordTarget is 1..*</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:dataEnterer) &lt;= 1">Cardinality of dataEnterer is 0..1</assert>
      <assert test="count(cda:custodian)=1">Cardinality of custodian is 1..1</assert>
      <assert test="count(cda:legalAuthenticator) &lt;= 1">Cardinality of legalAuthenticator is 0..1</assert>
      <assert test="count(cda:componentOf) &lt;= 1">Cardinality of componentOf is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-realmCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:realmCode">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'US'">@code SHALL = 'US'</assert>
    </rule>
    <rule id="USRealmHeader-errors-typeId" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:typeId">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.1.3'">@root SHALL = '2.16.840.1.113883.1.3'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = 'POCD_HD000040'">@extension SHALL = 'POCD_HD000040'</assert>
    </rule>
    <rule id="USRealmHeader-errors-templateId-us-realm" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.1') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.1'">@root SHALL = '2.16.840.1.113883.10.20.22.1.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="USRealmHeader-errors-code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:code">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="USRealmHeader-errors-effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-confidentialityCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:confidentialityCode">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget">
      <assert test="count(cda:patientRole)=1">Cardinality of patientRole is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:patient)=1">Cardinality of patient is 1..1</assert>
      <assert test="count(cda:providerOrganization) &lt;= 1">Cardinality of providerOrganization is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="not(sdtc:deceasedInd[@value = 'true']) or sdtc:deceasedTime">If sdtc:deceasedInd="true", then sdtc:deceasedTime **SHALL** be present with either a @value or @nullFlavor=UNK (CONF:4537-32993).</assert>
      <assert test="not(sdtc:deceasedTime/@value) or sdtc:deceasedInd[@value = 'true']">If sdtc:deceasedTime/@value is present, then sdtc:deceasedInd SHALL be present with value=true</assert>
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
      <assert test="count(cda:administrativeGenderCode)=1">Cardinality of administrativeGenderCode is 1..1</assert>
      <assert test="count(cda:birthTime)=1">Cardinality of birthTime is 1..1</assert>
      <assert test="count(sdtc:deceasedInd) &lt;= 1">Cardinality of deceasedInd is 0..1</assert>
      <assert test="count(sdtc:deceasedTime) &lt;= 1">Cardinality of deceasedTime is 0..1</assert>
      <assert test="count(cda:maritalStatusCode) &lt;= 1">Cardinality of maritalStatusCode is 0..1</assert>
      <assert test="count(cda:religiousAffiliationCode) &lt;= 1">Cardinality of religiousAffiliationCode is 0..1</assert>
      <assert test="count(cda:raceCode)=1">Cardinality of raceCode is 1..1</assert>
      <assert test="count(cda:ethnicGroupCode)=1">Cardinality of ethnicGroupCode is 1..1</assert>
      <assert test="count(cda:birthplace) &lt;= 1">Cardinality of birthplace is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="@nullFlavor or count(cda:family) = 1">SHALL contain exactly one [1..1] family (CONF:81-7159).</assert>
      <assert test="@nullFlavor or cda:given">SHALL contain at least one [1..*] given (CONF:81-7157).</assert>
      <assert test="(not(cda:suffix) or count(cda:suffix) = 1)">There may be at most one suffix</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7278).</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.administrativeGenderCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:administrativeGenderCode">
      <assert test="@nullFlavor or contains($AdministrativeGenderHL7V3, @code)">SHALL be selected from ValueSet AdministrativeGenderHL7V3</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 4">**SHALL** be precise to at least the year</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.sdtcDeceasedTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/sdtc:deceasedTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 4">**SHALL** be precise to at least the year</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.maritalStatusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:maritalStatusCode">
      <assert test="@nullFlavor or contains($MaritalStatus, @code)">SHALL be selected from ValueSet MaritalStatus</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.religiousAffiliationCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:religiousAffiliationCode">
      <assert test="@nullFlavor or contains($ReligiousAffiliation, @code)">SHALL be selected from ValueSet ReligiousAffiliation</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.raceCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:raceCode">
      <assert test="@nullFlavor or contains($RaceCategoryExcludingNulls, @code)">SHALL be selected from ValueSet RaceCategoryExcludingNulls</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.ethnicGroupCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:ethnicGroupCode">
      <assert test="@nullFlavor or contains($Ethnicity, @code)">SHALL be selected from ValueSet Ethnicity</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.sdtcEthnicGroupCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/sdtc:ethnicGroupCode">
      <assert test="@nullFlavor or contains($DetailedEthnicity, @code)">SHALL be selected from ValueSet DetailedEthnicity</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:guardianPerson)=1">Cardinality of guardianPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHALL be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.guardianPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:guardianPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.guardian.guardianPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:guardianPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace">
      <assert test="count(cda:place)=1">Cardinality of place is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace.place" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place">
      <assert test="count(cda:addr)=1">Cardinality of addr is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace.place.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place/cda:addr">
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If country is US, this addr **SHALL** contain exactly one [1..1] state, which **SHALL** be selected from ValueSet US Core USPS State *DYNAMIC* (CONF:4537-5402).</assert>
      <assert test="count(cda:country) &lt;= 1">Cardinality of country is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.birthplace.place.addr.item.country" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place/cda:addr/cda:country">
      <assert test="count(((text()[normalize-space()] | @nullFlavor))) = 1">xmlText and nullFlavor are mutually exclusive (one must be present)</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.languageCommunication" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication">
      <assert test="count(cda:languageCode)=1">Cardinality of languageCode is 1..1</assert>
      <assert test="count(cda:modeCode) &lt;= 1">Cardinality of modeCode is 0..1</assert>
      <assert test="count(cda:proficiencyLevelCode) &lt;= 1">Cardinality of proficiencyLevelCode is 0..1</assert>
      <assert test="count(cda:preferenceInd) &lt;= 1">Cardinality of preferenceInd is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.languageCommunication.modeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication/cda:modeCode">
      <assert test="@nullFlavor or contains($LanguageAbilityMode, @code)">SHALL be selected from ValueSet LanguageAbilityMode</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.patient.languageCommunication.proficiencyLevelCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication/cda:proficiencyLevelCode">
      <assert test="@nullFlavor or contains($LanguageAbilityProficiency, @code)">SHALL be selected from ValueSet LanguageAbilityProficiency</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-recordTarget.patientRole.providerOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-author" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="count(((cda:assignedPerson | cda:assignedAuthoringDevice))) = 1">There **SHALL** be exactly one assignedAuthor/assignedPerson or exactly one assignedAuthor/assignedAuthoringDevice (CONF:4537-16790).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:id[(@root = '2.16.840.1.113883.4.6')]) &lt;= 1">Cardinality of id:npi is 0..1</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson) &lt;= 1">Cardinality of assignedPerson is 0..1</assert>
      <assert test="count(cda:assignedAuthoringDevice) &lt;= 1">Cardinality of assignedAuthoringDevice is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.id-npi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:id[(@root = '2.16.840.1.113883.4.6')]">
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.4.6'">@root SHALL = '2.16.840.1.113883.4.6'</assert>
      <assert test="count(@extension) &lt;= 1">Cardinality of @extension is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:code">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-author.assignedAuthor.assignedAuthoringDevice" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedAuthoringDevice">
      <assert test="count(cda:manufacturerModelName)=1">Cardinality of manufacturerModelName is 1..1</assert>
      <assert test="count(cda:softwareName)=1">Cardinality of softwareName is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer">
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-dataEnterer.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
      <assert test="count(cda:relatedEntity)=0">Cardinality of relatedEntity is 0..0</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-provider.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-informant-non-provider" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]">
      <assert test="count(cda:assignedEntity)=0">Cardinality of assignedEntity is 0..0</assert>
      <assert test="count(cda:relatedEntity)=1">Cardinality of relatedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian">
      <assert test="count(cda:assignedCustodian)=1">Cardinality of assignedCustodian is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian">
      <assert test="count(cda:representedCustodianOrganization)=1">Cardinality of representedCustodianOrganization is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
      <assert test="count(cda:telecom)=1">Cardinality of telecom is 1..1</assert>
      <assert test="count(cda:addr)=1">Cardinality of addr is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-custodian.assignedCustodian.representedCustodianOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="count(cda:informationRecipient) &lt;= 1">Cardinality of informationRecipient is 0..1</assert>
      <assert test="count(cda:receivedOrganization) &lt;= 1">Cardinality of receivedOrganization is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient.informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient.informationRecipient.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-informationRecipient.intendedRecipient.receivedOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:receivedOrganization">
      <assert test="count(cda:name)=1">Cardinality of name is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:signatureCode)=1">Cardinality of signatureCode is 1..1</assert>
      <assert test="count(sdtc:signatureText) &lt;= 1">Cardinality of signatureText is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:signatureCode">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'S'">@code SHALL = 'S'</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-legalAuthenticator.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator">
      <assert test="count(cda:time)=1">Cardinality of time is 1..1</assert>
      <assert test="count(cda:signatureCode)=1">Cardinality of signatureCode is 1..1</assert>
      <assert test="count(sdtc:signatureText) &lt;= 1">Cardinality of signatureText is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:signatureCode">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'S'">@code SHALL = 'S'</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:addr)&gt;=1">Cardinality of addr is 1..*</assert>
      <assert test="count(cda:telecom)&gt;=1">Cardinality of telecom is 1..*</assert>
      <assert test="count(cda:assignedPerson)=1">Cardinality of assignedPerson is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:telecom">
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.telecom.use" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:telecom/@use">
      <assert test="contains($TelecomUseUSRealmHeader, .)">SHALL be selected from ValueSet TelecomUseUSRealmHeader</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.assignedPerson" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:assignedPerson">
      <assert test="count(cda:name)&gt;=1">Cardinality of name is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-authenticator.assignedEntity.assignedPerson.name" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
    <rule id="USRealmHeader-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-participant.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="USRealmHeader-errors-inFulfillmentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:inFulfillmentOf">
      <assert test="count(cda:order)=1">Cardinality of order is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-inFulfillmentOf.order" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:inFulfillmentOf/cda:order">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(cda:low)=1">Cardinality of low is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer">
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:time) &lt;= 1">Cardinality of time is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.typeCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/@typeCode">
      <assert test="contains($X_ServiceEventPerformer, .)">SHALL be selected from ValueSet X_ServiceEventPerformer</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-documentationOf.serviceEvent.performer.assignedEntity.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authorization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authorization">
      <assert test="count(cda:consent)=1">Cardinality of consent is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authorization.consent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authorization/cda:consent">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-authorization.consent.statusCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authorization/cda:consent/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf">
      <assert test="count(cda:encompassingEncounter)=1">Cardinality of encompassingEncounter is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:responsibleParty) &lt;= 1">Cardinality of responsibleParty is 0..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter.responsibleParty" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeader-errors-componentOf.encompassingEncounter.responsibleParty.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:responsibleParty/cda:assignedEntity">
      <assert test="cda:assignedPerson or cda:representedOrganization">This assignedEntity SHALL contain an assignedPerson or a representedOrganization or both (CONF:1198-32905).</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeaderforPatientGeneratedDocument-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.29.1:2024-05-01-->
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.29.1') and (@extension = '2024-05-01')])=1">Cardinality of templateId:us-patient-gen-doc is 1..1</assert>
      <assert test="count(cda:recordTarget)=1">Cardinality of recordTarget is 1..1</assert>
      <assert test="count(cda:author)&gt;=1">Cardinality of author is 1..*</assert>
      <assert test="count(cda:dataEnterer) &lt;= 1">Cardinality of dataEnterer is 0..1</assert>
      <assert test="count(cda:custodian)=1">Cardinality of custodian is 1..1</assert>
      <assert test="count(cda:legalAuthenticator) &lt;= 1">Cardinality of legalAuthenticator is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-templateId-us-patient-gen-doc" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.29.1') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.29.1'">@root SHALL = '2.16.840.1.113883.10.20.29.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget">
      <assert test="count(cda:patientRole)=1">Cardinality of patientRole is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:patient)=1">Cardinality of patient is 1..1</assert>
      <assert test="count(cda:providerOrganization) &lt;= 1">Cardinality of providerOrganization is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="not(sdtc:deceasedInd[@value = 'true']) or sdtc:deceasedTime">If sdtc:deceasedInd="true", then sdtc:deceasedTime **SHALL** be present with either a @value or @nullFlavor=UNK (CONF:4537-32993).</assert>
      <assert test="not(sdtc:deceasedTime/@value) or sdtc:deceasedInd[@value = 'true']">If sdtc:deceasedTime/@value is present, then sdtc:deceasedInd SHALL be present with value=true</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient.guardian.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHALL be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-recordTarget.patientRole.patient.languageCommunication" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication">
      <assert test="count(cda:preferenceInd) &lt;= 1">Cardinality of preferenceInd is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-author" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author">
      <assert test="count(cda:assignedAuthor)=1">Cardinality of assignedAuthor is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="count(((cda:assignedPerson | cda:assignedAuthoringDevice))) = 1">There **SHALL** be exactly one assignedAuthor/assignedPerson or exactly one assignedAuthor/assignedAuthoringDevice (CONF:4537-16790).</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-author.assignedAuthor.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-dataEnterer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:dataEnterer">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-dataEnterer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informant-non-provider" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]">
      <assert test="count(cda:relatedEntity)=1">Cardinality of relatedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informant-non-provider.relatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]/cda:relatedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informant-non-provider.relatedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]/cda:relatedEntity/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-custodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:custodian">
      <assert test="count(cda:assignedCustodian)=1">Cardinality of assignedCustodian is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-custodian.assignedCustodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian">
      <assert test="count(cda:representedCustodianOrganization)=1">Cardinality of representedCustodianOrganization is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-custodian.assignedCustodian.representedCustodianOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informationRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informationRecipient">
      <assert test="count(cda:intendedRecipient)=1">Cardinality of intendedRecipient is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-informationRecipient.intendedRecipient.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:id">
      <assert test="count(@root) &lt;= 1">Cardinality of @root is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-legalAuthenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-legalAuthenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-legalAuthenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-authenticator" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator">
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="cda:associatedEntity/cda:associatedPerson or cda:associatedEntity/cda:scopingOrganization">**SHALL** contain associatedEntity/associatedPerson *AND/OR* associatedEntity/scopingOrganization (CONF:4537-10006).</assert>
      <assert test="count(@typeCode)=1">Cardinality of @typeCode is 1..1</assert>
      <assert test="count(cda:associatedEntity)=1">Cardinality of associatedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-participant.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-inFulfillmentOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:inFulfillmentOf">
      <assert test="count(cda:order)=1">Cardinality of order is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-inFulfillmentOf.order" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:inFulfillmentOf/cda:order">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf">
      <assert test="count(cda:serviceEvent)=1">Cardinality of serviceEvent is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent.performer" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer">
      <assert test="count(cda:functionCode) &lt;= 1">Cardinality of functionCode is 0..1</assert>
      <assert test="count(cda:assignedEntity)=1">Cardinality of assignedEntity is 1..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent.performer.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent.performer.functionCode.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode/@code">
      <assert test="contains($ParticipationFunction, .)">SHALL be selected from ValueSet ParticipationFunction</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-errors-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code) &lt;= 1">Cardinality of code is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="UnstructuredDocument-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.10:2024-05-01-->
    <rule id="UnstructuredDocument-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]">
      <assert test="not(cda:setId) or cda:versionNumber">If setId is present versionNumber **SHALL** be present (CONF:4537-6380).</assert>
      <assert test="not(cda:versionNumber) or cda:setId">If versionNumber is present setId **SHALL** be present (CONF:4537-6387).</assert>
      <assert test="count(cda:templateId)&gt;=2">Cardinality of templateId is 2..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.10') and (@extension = '2024-05-01')])=1">Cardinality of templateId:unstructured-doc is 1..1</assert>
      <assert test="count(cda:recordTarget)&gt;=1">Cardinality of recordTarget is 1..*</assert>
      <assert test="count(cda:custodian)=1">Cardinality of custodian is 1..1</assert>
      <assert test="count(cda:component)=1">Cardinality of component is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-templateId-unstructured-doc" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.1.10') and (@extension = '2024-05-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.1.10'">@root SHALL = '2.16.840.1.113883.10.20.22.1.10'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2024-05-01'">@extension SHALL = '2024-05-01'</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-recordTarget" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:recordTarget">
      <assert test="count(cda:patientRole)=1">Cardinality of patientRole is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-recordTarget.patientRole" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole">
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-custodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:custodian">
      <assert test="count(cda:assignedCustodian)=1">Cardinality of assignedCustodian is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-custodian.assignedCustodian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian">
      <assert test="count(cda:representedCustodianOrganization)=1">Cardinality of representedCustodianOrganization is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component">
      <assert test="count(cda:nonXMLBody)=1">Cardinality of nonXMLBody is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component.nonXMLBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component/cda:nonXMLBody">
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component.nonXMLBody.text" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component/cda:nonXMLBody/cda:text">
      <assert test="not(not(cda:reference/@value)) or (@representation = 'B64' and @mediaType)">If the text element does not contain a reference element with a value attribute, then it **SHALL** contain exactly one [1..1] @representation="B64" and exactly one [1..1] @mediaType (CONF:1198-7624).</assert>
      <assert test="count(@mediaType) &lt;= 1">Cardinality of @mediaType is 0..1</assert>
    </rule>
    <rule id="UnstructuredDocument-errors-component.nonXMLBody.text.mediaType" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]/cda:component/cda:nonXMLBody/cda:text/@mediaType">
      <assert test="contains($SupportedFileFormats, .)">SHALL be selected from ValueSet SupportedFileFormats</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignObservation-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.27:2014-06-09-->
    <rule id="VitalSignObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.27') and (@extension = '2014-06-09')])=1">Cardinality of templateId:vital-sign-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
      <assert test="count(cda:interpretationCode) &lt;= 1">Cardinality of interpretationCode is 0..1</assert>
      <assert test="count(cda:methodCode) &lt;= 1">Cardinality of methodCode is 0..1</assert>
      <assert test="count(cda:targetSiteCode) &lt;= 1">Cardinality of targetSiteCode is 0..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-templateId-vital-sign-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.27') and (@extension = '2014-06-09')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.27'">@root SHALL = '2.16.840.1.113883.10.20.22.4.27'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2014-06-09'">@extension SHALL = '2014-06-09'</assert>
    </rule>
    <rule id="VitalSignObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="VitalSignObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:code">
      <assert test="count(@code) &lt;= 1">Cardinality of @code is 0..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="VitalSignObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="VitalSignObservation-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:value">
      <assert test="count(@unit)=1">Cardinality of @unit is 1..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-interpretationCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:interpretationCode">
      <assert test="count(@nullFlavor)=0">Cardinality of @nullFlavor is 0..0</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
    </rule>
    <rule id="VitalSignObservation-errors-interpretationCode.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:interpretationCode/@code">
      <assert test="contains($ObservationInterpretationHL7, .)">SHALL be selected from ValueSet ObservationInterpretationHL7</assert>
    </rule>
    <rule id="VitalSignObservation-errors-author" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsOrganizer-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.26:2015-08-01-->
    <rule id="VitalSignsOrganizer-errors-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.26') and (@extension = '2015-08-01')])=1">Cardinality of templateId:vital-signs-org is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'CLUSTER'">@classCode SHALL = 'CLUSTER'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(sdtc:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:component)&gt;=1">Cardinality of component is 1..*</assert>
      <assert test="count(cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])]])&gt;=1">Cardinality of component:vitalSignObs is 1..*</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-templateId-vital-signs-org" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.26') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.26'">@root SHALL = '2.16.840.1.113883.10.20.22.4.26'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-classCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/@classCode">
      <assert test="contains($XActClassDocumentEntryOrganizer, .)">SHALL be selected from ValueSet XActClassDocumentEntryOrganizer</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '74728-7'">@code SHALL = '74728-7'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-sdtcText" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/sdtc:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-sdtcText.reference" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/sdtc:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-statusCode" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-author" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:author">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)])">author SHALL conform to AuthorParticipation</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-component-vitalSignObs" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])]]">
      <assert test="count(cda:observation)=1">Cardinality of observation is 1..1</assert>
    </rule>
    <rule id="VitalSignsOrganizer-errors-component-vitalSignObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])">observation SHALL conform to VitalSignObservation</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsSection-errors">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.4.1:2015-08-01-->
    <rule id="VitalSignsSection-errors-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]">
      <assert test="@nullFlavor or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]] or cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]]">If section/@nullFlavor is not present, SHALL contain at least one Vital Signs Organizer or Average Blood Pressure Organizer</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.4.1') and (@extension = '2015-08-01')])=1">Cardinality of templateId:section is 1..1</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:title)=1">Cardinality of title is 1..1</assert>
      <assert test="count(cda:text)=1">Cardinality of text is 1..1</assert>
    </rule>
    <rule id="VitalSignsSection-errors-templateId-section" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.2.4.1') and (@extension = '2015-08-01')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.2.4.1'">@root SHALL = '2.16.840.1.113883.10.20.22.2.4.1'</assert>
      <assert test="count(@extension)=1">Cardinality of @extension is 1..1</assert>
      <assert test="@extension = '2015-08-01'">@extension SHALL = '2015-08-01'</assert>
    </rule>
    <rule id="VitalSignsSection-errors-code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = '8716-3'">@code SHALL = '8716-3'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">@codeSystem SHALL = '2.16.840.1.113883.6.1'</assert>
    </rule>
    <rule id="VitalSignsSection-errors-entry-vitalsOrg" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="VitalSignsSection-errors-entry-vitalsOrg.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01'])">organizer SHALL conform to VitalSignsOrganizer</assert>
    </rule>
    <rule id="VitalSignsSection-errors-entry-averageBPOrg" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01'])]]">
      <assert test="count(cda:organizer)=1">Cardinality of organizer is 1..1</assert>
    </rule>
    <rule id="VitalSignsSection-errors-entry-averageBPOrg.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01'])]]/cda:organizer">
      <assert test="(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01'])">organizer SHALL conform to AverageBloodPressureOrganizer</assert>
    </rule>
  </pattern>
  <pattern id="WoundCharacteristic-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.134-->
    <rule id="WoundCharacteristic-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.134')])=1">Cardinality of templateId:wound-characteristic is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-templateId-wound-characteristic" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.134')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.134'">@root SHALL = '2.16.840.1.113883.10.20.22.4.134'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:code">
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'ASSERTION'">@code SHALL = 'ASSERTION'</assert>
      <assert test="count(@codeSystem)=1">Cardinality of @codeSystem is 1..1</assert>
      <assert test="@codeSystem = '2.16.840.1.113883.5.4'">@codeSystem SHALL = '2.16.840.1.113883.5.4'</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
    <rule id="WoundCharacteristic-errors-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($WoundCharacteristic, @code)">SHALL be selected from ValueSet WoundCharacteristic</assert>
    </rule>
  </pattern>
  <pattern id="WoundMeasurementObservation-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.133-->
    <rule id="WoundMeasurementObservation-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]">
      <assert test="count(cda:templateId)&gt;=1">Cardinality of templateId is 1..*</assert>
      <assert test="count(cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.133')])=1">Cardinality of templateId:wound-measurement-obs is 1..1</assert>
      <assert test="count(@classCode)=1">Cardinality of @classCode is 1..1</assert>
      <assert test="@classCode = 'OBS'">@classCode SHALL = 'OBS'</assert>
      <assert test="count(@moodCode)=1">Cardinality of @moodCode is 1..1</assert>
      <assert test="@moodCode = 'EVN'">@moodCode SHALL = 'EVN'</assert>
      <assert test="count(cda:id)&gt;=1">Cardinality of id is 1..*</assert>
      <assert test="count(cda:code)=1">Cardinality of code is 1..1</assert>
      <assert test="count(cda:text) &lt;= 1">Cardinality of text is 0..1</assert>
      <assert test="count(cda:statusCode)=1">Cardinality of statusCode is 1..1</assert>
      <assert test="count(cda:effectiveTime)=1">Cardinality of effectiveTime is 1..1</assert>
      <assert test="count(cda:value)=1">Cardinality of value is 1..1</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-templateId-wound-measurement-obs" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:templateId[(@root = '2.16.840.1.113883.10.20.22.4.133')]">
      <assert test="count(@root)=1">Cardinality of @root is 1..1</assert>
      <assert test="@root = '2.16.840.1.113883.10.20.22.4.133'">@root SHALL = '2.16.840.1.113883.10.20.22.4.133'</assert>
      <assert test="count(@extension)=0">Cardinality of @extension is 0..0</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-moodCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/@moodCode">
      <assert test="contains($XActMoodDocumentObservation, .)">SHALL be selected from ValueSet XActMoodDocumentObservation</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($WoundMeasurements, @code)">SHALL be selected from ValueSet WoundMeasurements</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-text" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:text">
      <assert test="count(cda:reference) &lt;= 1">Cardinality of reference is 0..1</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-text.reference" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:text/cda:reference">
      <assert test="not(@value) or @value[starts-with(., '#')]">If reference/@value is present, it SHALL begin with a '#' and SHALL point to its corresponding narrative</assert>
    </rule>
    <rule id="WoundMeasurementObservation-errors-statusCode" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]/cda:statusCode">
      <assert test="@nullFlavor or contains($ActStatus, @code)">SHALL be selected from ValueSet ActStatus</assert>
      <assert test="count(@code)=1">Cardinality of @code is 1..1</assert>
      <assert test="@code = 'completed'">@code SHALL = 'completed'</assert>
    </rule>
  </pattern>
  <pattern id="USRealmAddress-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.2-->
    <rule id="USRealmAddress-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or count(cda:city) = 1">SHALL contain exactly one [1..1] city (CONF:81-7292).</assert>
      <assert test="@nullFlavor or (count(cda:streetAddressLine) &gt;= 1 and count(cda:streetAddressLine) &lt;= 4)">SHALL contain at least one and not more than 4 streetAddressLine (CONF:81-7291).</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7296)</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:state[@nullFlavor or text()[normalize-space()][contains($UspsTwoLetterAlphabeticCodes, .)]]">If the country is US, the state element is required and SHALL be selected from ValueSet StateValueSet but SHOULD have @nullFlavor if the state is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the state MAY be present but MAY be bound to different vocabularies (CONF:81-10024).</assert>
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If the country is US, the postalCode element is required but SHOULD have @nullFlavor if the postalCode is unknown. If country is not specified, it's assumed to be US. If country is something other than US, the postalCode MAY be present but MAY be bound to different vocabularies (CONF:81-10025).</assert>
      <assert test="(not(cda:state) or count(cda:state) = 1) and (not(cda:city) or count(cda:city) = 1) and (not(cda:postalCode) or count(cda:postalCode) = 1) and (not(cda:country) or count(cda:country) = 1)">SHALL have at most one of each: state, city, postalCode, and country</assert>
      <assert test="count(@nullFlavor) &lt;= 1">Cardinality of @nullFlavor is 0..1</assert>
      <assert test="count(cda:country) &lt;= 1">Cardinality of country is 0..1</assert>
      <assert test="count(cda:state) &lt;= 1">Cardinality of state is 0..1</assert>
      <assert test="count(cda:city) &lt;= 1">Cardinality of city is 0..1</assert>
      <assert test="count(cda:postalCode) &lt;= 1">Cardinality of postalCode is 0..1</assert>
      <assert test="count(cda:streetAddressLine) &lt;= 1">Cardinality of streetAddressLine is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTime-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.4-->
    <rule id="USRealmDateTime-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHALL** be precise to at least the day</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTimeInterval-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.3-->
    <rule id="USRealmDateTimeInterval-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(cda:center) or (not(cda:low) and not(cda:high))">Center cannot co-exist with low or high</assert>
      <assert test="not(@value) or string-length(@value) &gt;= 8">If a time interval contains @value, then it shall be precise to at least the day.</assert>
      <assert test="count(@value) &lt;= 1">Cardinality of @value is 0..1</assert>
      <assert test="count(cda:low) &lt;= 1">Cardinality of low is 0..1</assert>
      <assert test="count(cda:high) &lt;= 1">Cardinality of high is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="USRealmPatientNamePTNUSFIELDED-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.1-->
    <rule id="USRealmPatientNamePTNUSFIELDED-errors-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="@nullFlavor or count(cda:family) = 1">SHALL contain exactly one [1..1] family (CONF:81-7159).</assert>
      <assert test="@nullFlavor or cda:given">SHALL contain at least one [1..*] given (CONF:81-7157).</assert>
      <assert test="(not(cda:suffix) or count(cda:suffix) = 1)">There may be at most one suffix</assert>
      <assert test="not(text()[normalize-space()])">**SHALL NOT** have mixed content except for white space (CONF:81-7278).</assert>
      <assert test="count(@use) &lt;= 1">Cardinality of @use is 0..1</assert>
      <assert test="count(cda:validTime) &lt;= 1">Cardinality of validTime is 0..1</assert>
    </rule>
  </pattern>
  <pattern id="USRealmPersonNamePNUSFIELDED-errors">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.1.1-->
    <rule id="USRealmPersonNamePNUSFIELDED-errors-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:playingEntity/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]/cda:participant[(@typeCode = 'RESP')]/cda:participantRole/cda:playingEntity/cda:name | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:participantRole/cda:playingEntity/cda:name | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]/cda:associatedEntity/cda:associatedPerson/cda:name | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:associatedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:guardianPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:informationRecipient/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:assignedPerson/cda:name | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:assignedPerson/cda:name">
      <assert test="not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix))[@qualifier[self::node() = 'LS']])">No PN name part may have a qualifier of LS.</assert>
      <assert test="not(text()[normalize-space()]) or not(((cda:delimiter | cda:family | cda:given | cda:prefix | cda:suffix)))">The string **SHALL NOT** contain name parts (CONF:81-9372).</assert>
    </rule>
  </pattern>
  <pattern id="ActivitiesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.21.2.3:2015-08-01-->
    <rule id="ActivitiesSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]]">SHOULD contain Intervention Act</assert>
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]]">SHOULD contain Planned Intervention Act</assert>
    </rule>
    <rule id="ActivitiesSection-warnings-entry-intervention.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ActivitiesSection-warnings-entry-plannedIntervention.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ActivitiesSection-warnings-entry-handoffCommParticipants.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.43:2015-08-01-->
    <rule id="AdmissionDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="AdmissionDiagnosisSection-warnings-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedication-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.36:2014-06-09-->
    <rule id="AdmissionMedication-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="AdmissionMedication-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AdmissionMedicationsSectionEntriesOptional-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.44:2015-08-01-->
    <rule id="AdmissionMedicationsSectionEntriesOptional-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]]">SHOULD contain Admission Medication</assert>
    </rule>
    <rule id="AdmissionMedicationsSectionEntriesOptional-warnings-entry-admissionMedication.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.48:2022-02-14-->
    <rule id="AdvanceDirectiveObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:code">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-code.translation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:code/cda:translation">
      <assert test="@nullFlavor or contains($AdvanceDirectivesCategories, @code)">SHOULD be selected from ValueSet AdvanceDirectivesCategories</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-verifier" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="cda:time">SHOULD contain time</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-verifier.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-verifier.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:code">
      <assert test="@nullFlavor or contains($HealthcareAgentOrProxyChoices, @code)">SHOULD be selected from ValueSet HealthcareAgentOrProxyChoices</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.addr" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.playingEntity" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:playingEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-participant-custodian.participantRole.playingEntity.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:playingEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="AdvanceDirectiveObservation-warnings-reference-reference1.externalDocument.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:reference[(@typeCode = 'REFR')]/cda:externalDocument/cda:code">
      <assert test="@nullFlavor or contains($AdvanceDirectivesCategories, @code)">SHOULD be selected from ValueSet AdvanceDirectivesCategories</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectiveOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.108:2022-02-14-->
    <rule id="AdvanceDirectiveOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
      <assert test="cda:participant">SHOULD contain participant</assert>
    </rule>
    <rule id="AdvanceDirectiveOrganizer-warnings-component-advDirObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
  </pattern>
  <pattern id="AdvanceDirectivesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.21.1:2022-02-14-->
    <rule id="AdvanceDirectivesSection-warnings-entry-observation.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="AdvanceDirectivesSection-warnings-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]/cda:entry[not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.108' and @extension='2022-02-14'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
      <assert test="cda:participant">SHOULD contain participant</assert>
    </rule>
  </pattern>
  <pattern id="AgeObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.31-->
    <rule id="AgeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AllergiesAndIntolerancesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.6.1:2015-08-01-->
    <rule id="AllergiesAndIntolerancesSection-warnings-entry-allergyConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.6.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AllergyConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.30:2015-08-01-->
    <rule id="AllergyConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="AllergyConcernAct-warnings-entryRelationship-allergyObs.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.30' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
  </pattern>
  <pattern id="AllergyStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.28:2019-06-20-->
    <rule id="AllergyStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AnesthesiaSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.25:2014-06-09-->
    <rule id="AnesthesiaSection-warnings-entry-procedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="AnesthesiaSection-warnings-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.25' and @extension='2014-06-09']]/cda:entry[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.69:2022-06-01-->
    <rule id="AssessmentScaleObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="AssessmentScaleObservation-warnings-entryRelationship-supportingObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="AssessmentScaleObservation-warnings-referenceRange.observationRange" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']]/cda:referenceRange/cda:observationRange">
      <assert test="cda:text">SHOULD contain text</assert>
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentScaleSupportingObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.86:2022-06-01-->
    <rule id="AssessmentScaleSupportingObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.86' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AssessmentandPlanSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.9:2014-06-09-->
    <rule id="AssessmentandPlanSection-warnings-entry-plannedProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.9' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="AuthorParticipation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.119-->
    <rule id="AuthorParticipation-warnings-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="AuthorParticipation-warnings-assignedAuthor.representedOrganization.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="AuthorizationActivity-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.1.19-->
    <rule id="AuthorizationActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.1.19' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="AverageBloodPressureOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.512:2024-05-01-->
    <rule id="AverageBloodPressureOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="BasicIndustryObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.504:2023-05-01-->
    <rule id="BasicIndustryObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="BasicIndustryObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="BasicOccupationObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.503:2023-05-01-->
    <rule id="BasicOccupationObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="BasicOccupationObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
    <rule id="BasicOccupationObservation-warnings-entryRelationship-basic-industry.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.503' and @extension='2023-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.504' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="BirthSexObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.200:2024-05-01-->
    <rule id="BirthSexObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.200' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="BrandNameObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.301:2019-06-21-->
    <rule id="BrandNameObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareExperiencePreference-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.509:2024-05-01-->
    <rule id="CareExperiencePreference-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="sdtcPrecondition2">SHOULD contain sdtc:Precondition2</assert>
    </rule>
    <rule id="CareExperiencePreference-warnings-sdtcPrecondition2" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.509' and @extension='2024-05-01']]/sdtc:precondition2">
      <assert test="sdtc:criterion">SHOULD contain criterion</assert>
    </rule>
  </pattern>
  <pattern id="CarePlan-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.15:2024-05-01-->
    <rule id="CarePlan-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
      <assert test="cda:informationRecipient">SHOULD contain informationRecipient</assert>
      <assert test="cda:componentOf">SHOULD contain componentOf</assert>
    </rule>
    <rule id="CarePlan-warnings-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:informationRecipient">SHOULD contain informationRecipient</assert>
      <assert test="cda:receivedOrganization">SHOULD contain receivedOrganization</assert>
    </rule>
    <rule id="CarePlan-warnings-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CarePlan-warnings-informationRecipient.intendedRecipient.receivedOrganization" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:receivedOrganization">
      <assert test="cda:id">SHOULD contain id</assert>
      <assert test="cda:standardIndustryClassCode">SHOULD contain standardIndustryClassCode</assert>
    </rule>
    <rule id="CarePlan-warnings-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="CarePlan-warnings-authenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:signatureCode">
      <assert test="not(@code) or @code != 'X'">CDA Release One represented either an intended ('X') or actual ('S') authenticator. CDA Release Two only represents an actual authenticator, so has deprecated the value of 'X'.</assert>
    </rule>
    <rule id="CarePlan-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:associatedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-verifier.associatedEntity.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:associatedEntity/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="CarePlan-warnings-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="CarePlan-warnings-documentationOf-care-provision.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="CarePlan-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="CarePlan-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="CarePlan-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]]">SHOULD contain a Health Status Evaluations and Outcomes Section</assert>
    </rule>
    <rule id="CarePlan-warnings-component.structuredBody.component-healthConcerns.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]]">SHOULD contain Health Status Observation</assert>
    </rule>
    <rule id="CarePlan-warnings-component.structuredBody.component-activities.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]]">SHOULD contain Intervention Act</assert>
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]]">SHOULD contain Planned Intervention Act</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.1:2024-05-01-->
    <rule id="CareTeamMemberAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:assignedPerson">SHOULD contain assignedPerson</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity.id.root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-performer.assignedEntity.representedOrganization.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-entryRelationship-note.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:encounter) and not(cda:observation) and (cda:act)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamMemberAct-warnings-entryRelationship-schedule.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01'])] and not(cda:act) and not(cda:encounter) and (cda:observation) and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamMemberScheduleObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.3:2022-06-01-->
    <rule id="CareTeamMemberScheduleObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamMemberScheduleObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.3' and @extension='2022-06-01']]/cda:value">
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500:2022-06-01-->
    <rule id="CareTeamOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-participant-location.participantRole" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-participant-location.participantRole.addr" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-type.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01'])] and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-entryReference.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-note.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="CareTeamOrganizer-warnings-component-member.act" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:component[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01'])] and not(cda:observation) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamTypeObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.500.2:2019-07-01-->
    <rule id="CareTeamTypeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.2' and @extension='2019-07-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CareTeamsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.500:2022-06-01-->
    <rule id="CareTeamsSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]">
      <assert test="cda:entry[cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]]">SHOULD contain Care Team Organizer</assert>
    </rule>
    <rule id="CareTeamsSection-warnings-entry-primary.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.500' and @extension='2022-06-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="CaregiverCharacteristics-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.72-->
    <rule id="CaregiverCharacteristics-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CatalogNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.302:2019-06-21-->
    <rule id="CatalogNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CharacteristicsofHomeEnvironment-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.109-->
    <rule id="CharacteristicsofHomeEnvironment-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CommentActivity-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.64-->
    <rule id="CommentActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.64' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="CompanyNameObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.303:2019-06-21-->
    <rule id="CompanyNameObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ComplicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.37:2015-08-01-->
    <rule id="ComplicationsSection-warnings-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.37' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ConsultationNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.4:2024-05-01-->
    <rule id="ConsultationNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:participant[@typeCode = 'CALLBCK']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="CALLBCK" call back contact (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="ConsultationNote-warnings-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ConsultationNote-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="ConsultationNote-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]]">SHOULD contain a Medications Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]]">SHOULD contain a Physical Exam Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]]">SHOULD contain a Results Section</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody.component-medicalEquipment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="ConsultationNote-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
  </pattern>
  <pattern id="ContinuityofCareDocumentCCD-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.2:2024-05-01-->
    <rule id="ContinuityofCareDocumentCCD-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="cda:id[@root = '2.16.840.1.113883.4.6']">SHOULD contain an id with root='2.16.840.1.113883.4.6' (NPI)</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="not(cda:assignedPerson) or cda:id[@root = '2.16.840.1.113883.4.6']">If this assignedEntity is an assignedPerson, the assignedEntity/id **SHOULD** contain zero or one [0..1] @root="2.16.840.1.113883.4.6" National Provider Identifier (CONF:1198-32466).</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]]">SHOULD contain a Procedures Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]">SHOULD contain a Plan of Treatment Section</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-medEquipment.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="ContinuityofCareDocumentCCD-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
  </pattern>
  <pattern id="CoverageActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.60:2024-05-01-->
    <rule id="CoverageActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="CoverageActivity-warnings-entryRelationship-policy.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01'])] and (@typeCode = 'COMP')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CriticalityObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.145-->
    <rule id="CriticalityObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="CulturalandReligiousObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.111-->
    <rule id="CulturalandReligiousObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DateOfDiagnosisAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.502:2022-06-01-->
    <rule id="DateOfDiagnosisAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DeceasedObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.79:2015-08-01-->
    <rule id="DeceasedObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="DeceasedObservation-warnings-entryRelationship-problemObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.79' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'CAUS')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="DeviceIdentifierObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.304:2022-06-01-->
    <rule id="DeviceIdentifierObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="DeviceIdentifierObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01']]/cda:value">
      <assert test="@extension">SHOULD contain extension</assert>
    </rule>
  </pattern>
  <pattern id="DisabilityStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.505:2023-05-01-->
    <rule id="DisabilityStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="DisabilityStatusObservation-warnings-entryRelationship-assessmentScaleObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.505' and @extension='2023-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DischargeDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.24:2015-08-01-->
    <rule id="DischargeDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="DischargeDiagnosisSection-warnings-entry.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]/cda:entry/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedication-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.35:2016-03-01-->
    <rule id="DischargeMedication-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="DischargeMedication-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and (@typeCode = 'SUBJ')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="DischargeMedicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.11.1:2015-08-01-->
    <rule id="DischargeMedicationsSection-warnings-entry-dischargeMed.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.35' and @extension='2016-03-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DischargeSummary-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.8:2024-05-01-->
    <rule id="DischargeSummary-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="DischargeSummary-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="DischargeSummary-warnings-componentOf.encompassingEncounter.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.11.1' and @extension='2015-08-01']]]">SHOULD contain a Discharge Medications Section</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-dischargeDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-admissionDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-admissionMeds.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]]">SHOULD contain Admission Medication</assert>
    </rule>
    <rule id="DischargeSummary-warnings-component.structuredBody.component-socialHist.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
  </pattern>
  <pattern id="DistinctIdentificationCodeObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.308:2019-06-21-->
    <rule id="DistinctIdentificationCodeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="DrugMonitoringAct-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.123-->
    <rule id="DrugMonitoringAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EncounterActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.49:2015-08-01-->
    <rule id="EncounterActivity-warnings-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="EncounterActivity-warnings-code" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:code">
      <assert test="cda:originalText/cda:reference/@value">SHOULD contain originalText/reference/@value</assert>
      <assert test="@nullFlavor or contains($EncounterTypeCode, @code)">SHOULD be selected from ValueSet EncounterTypeCode</assert>
    </rule>
    <rule id="EncounterActivity-warnings-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:participant[cda:participantRole[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)])] and (@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="EncounterActivity-warnings-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="EncounterActivity-warnings-entryRelationship-diagnosis.act" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EncounterDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.80:2024-05-01-->
    <rule id="EncounterDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="EncounterDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and (@typeCode = 'SUBJ')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="EncountersSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.22.1:2015-08-01-->
    <rule id="EncountersSection-warnings-entry-encounter.encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.22.1' and @extension='2015-08-01']]/cda:entry[cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])]]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EntryReference-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.122-->
    <rule id="EntryReference-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="EstimatedDateofDelivery-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.1-->
    <rule id="EstimatedDateofDelivery-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ExpirationDateObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.309:2019-06-21-->
    <rule id="ExpirationDateObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ExternalDocumentReference-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.115:2014-06-09-->
    <rule id="ExternalDocumentReference-warnings-root" context="cda:externalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.115' and @extension='2014-06-09']]">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryDeathObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.47-->
    <rule id="FamilyHistoryDeathObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.46:2015-08-01-->
    <rule id="FamilyHistoryObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="FamilyHistoryObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="FamilyHistoryObservation-warnings-entryRelationship-ageObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and (@typeCode = 'SUBJ')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FamilyHistoryObservation-warnings-entryRelationship-deathObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.46' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.47' and not(@extension)])] and (@typeCode = 'CAUS')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistoryOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.45:2015-08-01-->
    <rule id="FamilyHistoryOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-subject.relatedSubject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject">
      <assert test="cda:subject">SHOULD contain subject</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-subject.relatedSubject.code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:code">
      <assert test="@nullFlavor or contains($FamilyMemberValue, @code)">SHOULD be selected from ValueSet FamilyMemberValue</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-subject.relatedSubject.subject" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:subject/cda:relatedSubject/cda:subject">
      <assert test="cda:birthTime">SHOULD contain birthTime</assert>
      <assert test="sdtc:id">SHOULD contain sdtcId</assert>
    </rule>
    <rule id="FamilyHistoryOrganizer-warnings-component.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']]/cda:component/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="FamilyHistorySection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.15:2015-08-01-->
    <rule id="FamilyHistorySection-warnings-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.15' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.67:2014-06-09-->
    <rule id="FunctionalStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:value">
      <assert test="not(@codeSystem) or @codeSystem = '2.16.840.1.113883.6.96'">If coded, **SHOULD** contain a code from SNOMED CT (CodeSystem: 2.16.840.1.113883.6.96) (CONF:1098-14234).</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-entryRelationship-nonMedSupply.supply" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:observation) and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-entryRelationship-caregiverCharacteristics.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FunctionalStatusObservation-warnings-entryRelationship-assessmentScaleObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:supply) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.66:2014-06-09-->
    <rule id="FunctionalStatusOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-warnings-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.254' or @codeSystem = '2.16.840.1.113883.6.1'">**SHOULD** be selected from ICF (codeSystem 2.16.840.1.113883.6.254) *OR* LOINC (2.16.840.1.113883.6.1) (CONF:1098-31417).</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-warnings-component-functionalStatus.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusOrganizer-warnings-component-selfCare.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="FunctionalStatusSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.14:2014-06-09-->
    <rule id="FunctionalStatusSection-warnings-entry-funcStatusOrganizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.66' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-funcStatusObs.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-caregiverCharacteristics.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-assessmentScale.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-nonMedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-selfCareActivity.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="FunctionalStatusSection-warnings-entry-sensoryStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="GenderIdentityObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.34.3.45:2023-05-01-->
    <rule id="GenderIdentityObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GenderIdentityObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.34.3.45' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="GoalObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.121:2022-06-01-->
    <rule id="GoalObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-refersTo.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-componentEntry.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and (@typeCode = 'COMP')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-priorityPreference.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-goal.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and (@typeCode = 'COMP')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="GoalObservation-warnings-entryRelationship-progressTowardGoal.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])] and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="GoalObservation-warnings-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="GoalsSection-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.60-->
    <rule id="GoalsSection-warnings-entry-goal.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.60' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HandoffCommunicationParticipants-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.141-->
    <rule id="HandoffCommunicationParticipants-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-warnings-participant-infoRecipient.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="HandoffCommunicationParticipants-warnings-participant-infoRecipient.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.132:2022-06-01-->
    <rule id="HealthConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-observations.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:organizer) and (@typeCode = 'REFR')]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-acts.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-organizers.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])] and (@typeCode = 'REFR')]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-related-entries.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-entryRelationship-component-health-concern-acts.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:organizer) and (@typeCode = 'COMP')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="HealthConcernsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.58:2015-08-01-->
    <rule id="HealthConcernsSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]]">SHOULD contain Health Status Observation</assert>
    </rule>
    <rule id="HealthConcernsSection-warnings-entry-healthStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HealthConcernsSection-warnings-entry-healthConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.132' and @extension='2022-06-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="HealthConcernsSection-warnings-entry-riskConcern.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.58' and @extension='2015-08-01']]/cda:entry[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusEvaluationsandOutcomesSection-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.61-->
    <rule id="HealthStatusEvaluationsandOutcomesSection-warnings-entry-outcome.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.61' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HealthStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.5:2014-06-09-->
    <rule id="HealthStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="HighestPressureUlcerStage-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.77-->
    <rule id="HighestPressureUlcerStage-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="HistoryandPhysical-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.3:2024-05-01-->
    <rule id="HistoryandPhysical-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]]">SHOULD contain a History of Present Illness Section</assert>
    </rule>
    <rule id="HistoryandPhysical-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
  </pattern>
  <pattern id="HospitalAdmissionDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.34:2015-08-01-->
    <rule id="HospitalAdmissionDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HospitalAdmissionDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="HospitalDischargeDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.33:2015-08-01-->
    <rule id="HospitalDischargeDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="HospitalDischargeDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.33' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.52:2015-08-01-->
    <rule id="ImmunizationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:consumable/cda:manufacturedProduct">
      <assert test="cda:manufacturerOrganization">SHOULD contain manufacturerOrganization</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-indication.observation.code" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:supply)]/cda:observation/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-medSupplyOrder.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-medDispense.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-reactionObs.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-immunizationNotGiven.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01'])] and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ImmunizationActivity-warnings-entryRelationship-substanceAdmin.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:observation) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationMedicationInformation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.54:2014-06-09-->
    <rule id="ImmunizationMedicationInformation-warnings-root" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]">
      <assert test="cda:manufacturerOrganization">SHOULD contain manufacturerOrganization</assert>
    </rule>
    <rule id="ImmunizationMedicationInformation-warnings-manufacturedMaterial" context="cda:manufacturedProduct[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.54' and @extension='2014-06-09']]/cda:manufacturedMaterial">
      <assert test="cda:lotNumberText">SHOULD contain lotNumberText</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationNotGivenReason-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.53:2024-05-01-->
    <rule id="ImmunizationNotGivenReason-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.53' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ImmunizationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.2.1:2015-08-01-->
    <rule id="ImmunizationsSection-warnings-entry-activity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.2.1' and @extension='2015-08-01']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ImplantableDeviceStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.305:2019-06-21-->
    <rule id="ImplantableDeviceStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="Indication-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.19:2023-05-01-->
    <rule id="Indication-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="Indication-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
  </pattern>
  <pattern id="Instruction-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.20:2014-06-09-->
    <rule id="Instruction-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="InstructionsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.45:2014-06-09-->
    <rule id="InstructionsSection-warnings-entry-instruction.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.45' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="InterventionAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.131:2015-08-01-->
    <rule id="InterventionAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-advanceDirectiveObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14'])] and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-interventionAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-procedureActivityProcedure.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:encounter) and not(cda:supply)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-encounterActivity.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.49' and @extension='2015-08-01'])] and not(cda:supply)]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-instruction.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-nonMedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-nutritionRecommendation.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-entryReferenceRefr.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-entryReferenceRson.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'RSON') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-handoffCommunicationParticipants.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="InterventionAct-warnings-entryRelationship-plannedInterventionAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="InterventionAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="LatexSafetyObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.314:2019-06-21-->
    <rule id="LatexSafetyObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="LongitudinalCareWoundObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.114:2015-08-01-->
    <rule id="LongitudinalCareWoundObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:value">
      <assert test="@nullFlavor or contains($WoundType, @code)">SHOULD be selected from ValueSet WoundType</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-targetSiteCode.qualifier.value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:targetSiteCode/cda:qualifier/cda:value/@code">
      <assert test="contains($TargetSiteQualifiers, .)">SHOULD be selected from ValueSet TargetSiteQualifiers</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-woundMeasurementObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-woundCharacteristic.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-numberofPressureUlcersObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="LongitudinalCareWoundObservation-warnings-entryRelationship-highestPressureUlcerStage.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.77' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="LotOrBatchNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.315:2019-06-21-->
    <rule id="LotOrBatchNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MRISafetyObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.318:2019-06-21-->
    <rule id="MRISafetyObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ManufacturingDateObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.316:2019-06-21-->
    <rule id="ManufacturingDateObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentOrganizer-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.135-->
    <rule id="MedicalEquipmentOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-warnings-component-nonMedicalSupply.supply" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and not(cda:procedure)]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicalEquipmentOrganizer-warnings-component-procedureActivity.procedure" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)]]/cda:component[not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MedicalEquipmentSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.23:2014-06-09-->
    <rule id="MedicalEquipmentSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="MedicalEquipmentSection-warnings-entry-medicalEquip.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.135' and not(@extension)])] and not(cda:procedure) and not(cda:supply)]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicalEquipmentSection-warnings-entry-nonMedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and not(cda:procedure) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicalEquipmentSection-warnings-entry-procedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09']]/cda:entry[not(cda:organizer) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:supply)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MedicationActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.16:2014-06-09-->
    <rule id="MedicationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="MedicationActivity-warnings-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="@value">SHOULD contain @value</assert>
      <assert test="cda:low">SHOULD contain low</assert>
    </rule>
    <rule id="MedicationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="MedicationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="MedicationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-supplyOrder.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-medicationDispense.supply" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and not(cda:act) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-reaction.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-drugMonitoring.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.123' and not(@extension)])] and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-substanceAdministered.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)])] and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-adherence.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01'])] and not(cda:act) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="MedicationActivity-warnings-entryRelationship-signature.substanceAdministration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09']]/cda:entryRelationship[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)])] and not(cda:observation) and not(cda:act) and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicationAdherence-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.508:2023-05-01-->
    <rule id="MedicationAdherence-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:informant">SHOULD contain informant</assert>
    </rule>
    <rule id="MedicationAdherence-warnings-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.508' and @extension='2023-05-01']]/cda:value/@code">
      <assert test="contains($MedicationAdherence, .)">SHOULD be selected from ValueSet MedicationAdherence</assert>
    </rule>
  </pattern>
  <pattern id="MedicationDispense-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.18:2023-05-01-->
    <rule id="MedicationDispense-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationDispense-warnings-performer.assignedEntity" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="MedicationDispense-warnings-performer.assignedEntity.addr" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="MedicationDispense-warnings-entryRelationship-entryRelationship1.supply" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:entryRelationship[cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
  </pattern>
  <pattern id="MedicationFreeTextSig-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.147-->
    <rule id="MedicationFreeTextSig-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.147' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicationSupplyOrder-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.17:2014-06-09-->
    <rule id="MedicationSupplyOrder-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:repeatNumber">SHOULD contain repeatNumber</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="MedicationSupplyOrder-warnings-entryRelationship.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.17' and @extension='2014-06-09']]/cda:entryRelationship/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsAdministeredSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.38:2014-06-09-->
    <rule id="MedicationsAdministeredSection-warnings-entry-medication.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.38' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MedicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.1.1:2014-06-09-->
    <rule id="MedicationsSection-warnings-entry-medActivity.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.1.1' and @extension='2014-06-09']]/cda:entry[cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])]]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.74:2024-05-01-->
    <rule id="MentalStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="MentalStatusObservation-warnings-entryRelationship-assessmentScale.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.75:2015-08-01-->
    <rule id="MentalStatusOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MentalStatusOrganizer-warnings-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:code">
      <assert test="not(@codeSystem) or (@codeSystem = '2.16.840.1.113883.6.254' or @codeSystem = '2.16.840.1.113883.6.1')">**SHOULD** be selected from ICF (codeSystem 2.16.840.1.113883.6.254) *OR* LOINC (codeSystem 2.16.840.1.113883.6.1) (CONF:1198-14698).</assert>
    </rule>
    <rule id="MentalStatusOrganizer-warnings-component-mentalStatus.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="MentalStatusSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.56:2015-08-01-->
    <rule id="MentalStatusSection-warnings-entry-mentalStatusOrganizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.75' and @extension='2015-08-01'])] and not(cda:observation)]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="MentalStatusSection-warnings-entry-mentalStatusObs.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="MentalStatusSection-warnings-entry-assessmentScale.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]/cda:entry[not(cda:organizer) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ModelNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.317:2019-06-21-->
    <rule id="ModelNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NonMedicinalSupplyActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.50:2014-06-09-->
    <rule id="NonMedicinalSupplyActivity-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-warnings-effectiveTime" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
    <rule id="NonMedicinalSupplyActivity-warnings-entryRelationship-instruction.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NoteActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.202:2016-11-01-->
    <rule id="NoteActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="NoteActivity-warnings-code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:code">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="NoteActivity-warnings-text.mediaType" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:text/@mediaType">
      <assert test="contains($SupportedFileFormats, .)">SHOULD be selected from ValueSet SupportedFileFormats</assert>
    </rule>
    <rule id="NoteActivity-warnings-effectiveTime" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:effectiveTime">
      <assert test="@value">SHOULD contain @value</assert>
    </rule>
    <rule id="NoteActivity-warnings-participant-legalAuthenticator.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="NoteActivity-warnings-reference-externalDocument.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:reference[(cda:externalDocument)]/cda:externalDocument">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
  </pattern>
  <pattern id="NotesSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.65:2016-11-01-->
    <rule id="NotesSection-warnings-entry-note.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.65' and @extension='2016-11-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NumberofPressureUlcersObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.76:2024-05-01-->
    <rule id="NumberofPressureUlcersObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="NumberofPressureUlcersObservation-warnings-entryRelationship-stage.observation.value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.76' and @extension='2024-05-01']]/cda:entryRelationship[(@typeCode = 'SUBJ') and (cda:observation)]/cda:observation/cda:value">
      <assert test="@nullFlavor or contains($PressureUlcerStage, @code)">SHOULD be selected from ValueSet PressureUlcerStage</assert>
    </rule>
  </pattern>
  <pattern id="NutritionAssessment-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.138-->
    <rule id="NutritionAssessment-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionAssessment-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)]]/cda:value">
      <assert test="not(@codeSystem) or @codeSystem = '2.16.840.1.113883.6.96'">If coded, **SHOULD** contain a code from SNOMED CT (CodeSystem: 2.16.840.1.113883.6.96) (CONF:1098-32925).</assert>
    </rule>
  </pattern>
  <pattern id="NutritionRecommendation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.130-->
    <rule id="NutritionRecommendation-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedEncounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:supply) and not(cda:procedure)]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedMedActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply) and not(cda:procedure)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedProc.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and not(cda:supply) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="NutritionRecommendation-warnings-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)]]/cda:entryRelationship[not(cda:act) and not(cda:encounter) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and not(cda:procedure)]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="NutritionSection-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.2.57-->
    <rule id="NutritionSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="NutritionSection-warnings-entry-nutritionalStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="NutritionalStatusObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.124-->
    <rule id="NutritionalStatusObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="NutritionalStatusObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($NutritionalStatus, @code)">SHOULD be selected from ValueSet NutritionalStatus</assert>
    </rule>
    <rule id="NutritionalStatusObservation-warnings-entryRelationship-nutritionAssessment.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="OperativeNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.7:2024-05-01-->
    <rule id="OperativeNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-primary.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-secondary.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="OperativeNote-warnings-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="OperativeNote-warnings-component.structuredBody.component-preopDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]]">SHOULD contain Preoperative Diagnosis</assert>
    </rule>
  </pattern>
  <pattern id="OutcomeObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.144-->
    <rule id="OutcomeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-entryRelationship-goal-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'GEVL') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-entryRelationship-progressTowardGoalObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'SPRT') and not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-entryRelationship-intervention-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:entryRelationship[(@typeCode = 'RSON') and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="OutcomeObservation-warnings-reference.externalDocument" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.144' and not(@extension)]]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="PastMedicalHistory-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.20:2015-08-01-->
    <rule id="PastMedicalHistory-warnings-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PastMedicalHistory-warnings-entry-problem.observation.effectiveTime" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.20' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation/cda:effectiveTime">
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
  </pattern>
  <pattern id="PatientReferralAct-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.140-->
    <rule id="PatientReferralAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:priorityCode">SHOULD contain priorityCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-entryRelationship1.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation">
      <assert test="cda:priorityCode">SHOULD contain priorityCode</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-entryRelationship1.observation.priorityCode" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:priorityCode">
      <assert test="@nullFlavor or contains($ActPriority, @code)">SHOULD be selected from ValueSet ActPriority</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-entryRelationship1.observation.value" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[not(cda:observation)]/cda:observation/cda:value">
      <assert test="@nullFlavor or contains($CareModel, @code)">SHOULD be selected from ValueSet CareModel</assert>
    </rule>
    <rule id="PatientReferralAct-warnings-entryRelationship-indication.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="PayersSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.18:2015-08-01-->
    <rule id="PayersSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
    <rule id="PayersSection-warnings-entry-coverage.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="PhysicalExamSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.2.10:2015-08-01-->
    <rule id="PhysicalExamSection-warnings-entry-longCareWound.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PhysicalExamSection-warnings-component.section.code" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.2.10' and @extension='2015-08-01']]/cda:component/cda:section/cda:code">
      <assert test="@nullFlavor or contains($PhysicalExamType, @code)">SHOULD be selected from ValueSet PhysicalExamType</assert>
    </rule>
  </pattern>
  <pattern id="PlannedCoverage-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.129:2024-05-01-->
    <rule id="PlannedCoverage-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedEncounter-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.40:2014-06-09-->
    <rule id="PlannedEncounter-warnings-root" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-code" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:code">
      <assert test="@nullFlavor or contains($EncounterPlanned, @code)">SHOULD be selected from ValueSet EncounterPlanned</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-participant-location.participantRole" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-entryRelationship-priorityPreference.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedEncounter-warnings-entryRelationship-indication.observation" context="cda:encounter[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="PlannedImmunizationActivity-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.120-->
    <rule id="PlannedImmunizationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-consumable.manufacturedProduct" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:consumable/cda:manufacturedProduct">
      <assert test="cda:manufacturerOrganization">SHOULD contain manufacturerOrganization</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-entryRelationship-priorityPreference.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedImmunizationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)]]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedInterventionAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.146:2015-08-01-->
    <rule id="PlannedInterventionAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-reason.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'RSON')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-immunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.52' and @extension='2015-08-01'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:doseQuantity">SHOULD contain doseQuantity</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-medicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-instruction.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-nonMedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:quantity">SHOULD contain quantity</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedEncounter.encounter" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:supply) and (@typeCode = 'REFR')]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedProcedure.procedure" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedMedicationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedSupply.supply" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and not(cda:act) and not(cda:procedure) and not(cda:encounter) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])] and (@typeCode = 'REFR')]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-nutritionRecommendation.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.130' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-entryReference.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and not(cda:substanceAdministration) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-entryRelationship-plannedImmunizationActivity.substanceAdministration" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:entryRelationship[not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:act) and not(cda:procedure) and not(cda:encounter) and not(cda:supply) and (@typeCode = 'REFR')]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedInterventionAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="PlannedMedicationActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.42:2014-06-09-->
    <rule id="PlannedMedicationActivity-warnings-root" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-effectiveTime-duration" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:effectiveTime[@xsi:type='IVL_TS' or cda:low or cda:high or @value]">
      <assert test="@value">SHOULD contain @value</assert>
      <assert test="cda:low">SHOULD contain low</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-routeCode" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:routeCode">
      <assert test="cda:translation">SHOULD contain translation</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-routeCode.translation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:routeCode/cda:translation">
      <assert test="@nullFlavor or contains($MedicationRoute, @code)">SHOULD be selected from ValueSet MedicationRoute</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-doseQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:doseQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-rateQuantity" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:rateQuantity">
      <assert test="@nullFlavor or @unit">SHOULD contain @unit</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-entryRelationship-priorityPreference.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-entryRelationship-indication.observation" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedMedicationActivity-warnings-entryRelationship-instruction.act" context="cda:substanceAdministration[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedure-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.41:2022-06-01-->
    <rule id="PlannedProcedure-warnings-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-priorityPreference.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-instruction.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-coverage.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-assessmentScale.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedProcedure-warnings-entryRelationship-entryReference.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlannedProcedureSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.30:2014-06-09-->
    <rule id="PlannedProcedureSection-warnings-entry-plannedProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.30' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PlannedSupply-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.43:2024-05-01-->
    <rule id="PlannedSupply-warnings-root" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-priorityPreference.observation" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-indication.observation" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-instruction.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlannedSupply-warnings-entryRelationship-plannedCoverage.act" context="cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.129' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PlanofTreatmentSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.10:2014-06-09-->
    <rule id="PlanofTreatmentSection-warnings-entry-plannedEnc.encounter" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and cda:encounter[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.40' and @extension='2014-06-09'])] and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:encounter">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedProc.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.41' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:supply)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedMed.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.42' and @extension='2014-06-09'])] and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedSupply.supply" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and cda:supply[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.43' and @extension='2024-05-01'])]]/cda:supply">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-nutrition.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-plannedImmunization.substanceAdministration" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[not(cda:observation) and not(cda:encounter) and not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.120' and not(@extension)])] and not(cda:supply)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PlanofTreatmentSection-warnings-entry-goal.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.121' and @extension='2022-06-01'])] and not(cda:encounter) and not(cda:procedure) and not(cda:substanceAdministration) and not(cda:supply)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PolicyActivity-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.61:2024-05-01-->
    <rule id="PolicyActivity-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PolicyActivity-warnings-code.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:code/@code">
      <assert test="contains($PayerType, .)">SHOULD be selected from ValueSet PayerType</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:representedOrganization">SHOULD contain representedOrganization</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity.code.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:code/@code">
      <assert test="contains($FinanciallyResponsiblePartyTypeValueSet, .)">SHOULD be selected from ValueSet FinanciallyResponsiblePartyTypeValueSet</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-payer.assignedEntity.representedOrganization" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:representedOrganization">
      <assert test="cda:name">SHOULD contain name</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-guarantor" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]">
      <assert test="cda:time">SHOULD contain time</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-guarantor.assignedEntity" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity">
      <assert test="cda:assignedPerson/cda:name or cda:representedOrganization/cda:name">**SHOULD** include assignedEntity/assignedPerson/name AND/OR assignedEntity/representedOrganization/name (CONF:4537-8967).</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="PolicyActivity-warnings-performer-guarantor.assignedEntity.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]">
      <assert test="cda:time">SHOULD contain time</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.time" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:time">
      <assert test="cda:low">SHOULD contain low</assert>
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:playingEntity">SHOULD contain playingEntity</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:code">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole.code.code" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:code/@code">
      <assert test="contains($CoverageRoleTypeValueSet, .)">SHOULD be selected from ValueSet CoverageRoleTypeValueSet</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-coverage-target.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-subscriber.participantRole" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="PolicyActivity-warnings-participant-subscriber.participantRole.addr" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="PolicyActivity-warnings-entryRelationship-authorization.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:entryRelationship[(cda:act/@moodCode = 'EVN')]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.51:2015-08-01-->
    <rule id="PostprocedureDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PostprocedureDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PostprocedureDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.36:2015-08-01-->
    <rule id="PostprocedureDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]]">SHOULD contain Postprocedure Diagnosis</assert>
    </rule>
    <rule id="PostprocedureDiagnosisSection-warnings-entry-postopDiagnosis.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyIntentionInNextYear-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.281:2023-05-01-->
    <rule id="PregnancyIntentionInNextYear-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.281' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PregnancyObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.15.3.8-->
    <rule id="PregnancyObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="PregnancyObservation-warnings-entryRelationship-estimatedDateofDelivery.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.1' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosis-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.65:2015-08-01-->
    <rule id="PreoperativeDiagnosis-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="PreoperativeDiagnosis-warnings-entryRelationship-problemObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="PreoperativeDiagnosisSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.34:2015-08-01-->
    <rule id="PreoperativeDiagnosisSection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01']]]">SHOULD contain Preoperative Diagnosis</assert>
    </rule>
    <rule id="PreoperativeDiagnosisSection-warnings-entry-preopDiagnosis.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.34' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="PriorityPreference-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.143-->
    <rule id="PriorityPreference-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProblemConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.3:2024-05-01-->
    <rule id="ProblemConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemConcernAct-warnings-entryRelationship-problem.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemConcernAct-warnings-entryRelationship-priority.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProblemObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.4:2024-05-01-->
    <rule id="ProblemObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:code">
      <assert test="@nullFlavor or contains($ProblemType, @code)">SHOULD be selected from ValueSet ProblemType</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-age.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.31' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-prognosis.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-priority.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-status.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-reference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-assessment.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProblemObservation-warnings-entryRelationship-dateOfDiagnosis.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.502' and @extension='2022-06-01'])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProblemSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.5.1:2015-08-01-->
    <rule id="ProblemSection-warnings-entry-act.act" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProblemSection-warnings-entry-observation.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.5.1' and @extension='2015-08-01']]/cda:entry[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.5' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProblemStatus-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.6:2019-06-20-->
    <rule id="ProblemStatus-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.6' and @extension='2019-06-20']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureActivityProcedure-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.14:2024-05-01-->
    <rule id="ProcedureActivityProcedure-warnings-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-code" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:code">
      <assert test="cda:originalText/cda:reference/@value">SHOULD contain originalText/reference/@value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-effectiveTime" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
      <assert test="@value">SHOULD contain value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-effectiveTime.low" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-effectiveTime.high" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-specimen.specimenRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:specimen/cda:specimenRole">
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity">
      <assert test="cda:assignedPerson">SHOULD contain assignedPerson</assert>
      <assert test="cda:representedOrganization">SHOULD contain representedOrganization</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity.representedOrganization" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization">
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-performer.assignedEntity.representedOrganization.addr" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-participant-serviceDeliveryLocation.participantRole" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-instruction.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.20' and @extension='2014-06-09'])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-indication.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-medication.substanceAdministration" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and not(cda:observation) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:encounter)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-reaction.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-assessmentScaleObs.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:substanceAdministration) and not(cda:encounter)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="ProcedureActivityProcedure-warnings-entryRelationship-entryReference.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation) and not(cda:substanceAdministration) and not(cda:encounter)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureFindingsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.28:2015-08-01-->
    <rule id="ProcedureFindingsSection-warnings-entry-problem.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.28' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureIndicationsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.29:2014-06-09-->
    <rule id="ProcedureIndicationsSection-warnings-entry-indication.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.29' and @extension='2014-06-09']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.19' and @extension='2023-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
  </pattern>
  <pattern id="ProcedureNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.6:2024-05-01-->
    <rule id="ProcedureNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:componentOf">SHOULD contain componentOf</assert>
    </rule>
    <rule id="ProcedureNote-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ProcedureNote-warnings-participant-participant1" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND') and (cda:functionCode/@code = 'PCP')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.effectiveTime.high" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:high">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.performer-primary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ProcedureNote-warnings-documentationOf.serviceEvent.performer-secondary.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'SPRF')]/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ProcedureNote-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="ProcedureNote-warnings-componentOf.encompassingEncounter.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:code">
      <assert test="@nullFlavor or contains($ActEncounterCodes, @code)">SHOULD be selected from ValueSet ActEncounterCodes</assert>
    </rule>
    <rule id="ProcedureNote-warnings-component.structuredBody.component-postProcedureDx.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.36' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01']]]">SHOULD contain Postprocedure Diagnosis</assert>
    </rule>
    <rule id="ProcedureNote-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
  </pattern>
  <pattern id="ProceduresSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.7.1:2014-06-09-->
    <rule id="ProceduresSection-warnings-entry-entryProcedure.procedure" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]/cda:entry[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ProductInstance-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.37-->
    <rule id="ProductInstance-warnings-playingDevice" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.37' and not(@extension)]]/cda:playingDevice">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
  </pattern>
  <pattern id="PrognosisObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.113-->
    <rule id="PrognosisObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.113' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProgressNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.9:2024-05-01-->
    <rule id="ProgressNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:documentationOf">SHOULD contain documentationOf</assert>
    </rule>
    <rule id="ProgressNote-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="ProgressNote-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ProgressNote-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="ProgressNote-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="ProgressNote-warnings-componentOf.encompassingEncounter.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="ProgressNote-warnings-component.structuredBody.component-activities.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.21.2.3' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.131' and @extension='2015-08-01']]]">SHOULD contain Intervention Act</assert>
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.146' and @extension='2015-08-01']]]">SHOULD contain Planned Intervention Act</assert>
    </rule>
    <rule id="ProgressNote-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
  </pattern>
  <pattern id="ProgressTowardGoalObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.110-->
    <rule id="ProgressTowardGoalObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.110' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAssemblerParticipation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.7:2020-05-19-->
    <rule id="ProvenanceAssemblerParticipation-warnings-associatedEntity.scopingOrganization" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization">
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="ProvenanceAssemblerParticipation-warnings-associatedEntity.scopingOrganization.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="ProvenanceAuthorParticipation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.6:2019-10-01-->
    <rule id="ProvenanceAuthorParticipation-warnings-assignedAuthor" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-warnings-assignedAuthor.addr" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ProvenanceAuthorParticipation-warnings-assignedAuthor.assignedPerson.name" context="cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:assignedPerson/cda:name">
      <assert test="cda:given">SHOULD contain given</assert>
    </rule>
  </pattern>
  <pattern id="ReactionObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.9:2014-06-09-->
    <rule id="ReactionObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="ReactionObservation-warnings-effectiveTime" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:effectiveTime">
      <assert test="cda:low">SHOULD contain low</assert>
      <assert test="cda:high">SHOULD contain high</assert>
    </rule>
    <rule id="ReactionObservation-warnings-entryRelationship-procedure.procedure" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01'])] and not(cda:substanceAdministration) and not(cda:observation)]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ReactionObservation-warnings-entryRelationship-medication.substanceAdministration" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and cda:substanceAdministration[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.16' and @extension='2014-06-09'])] and not(cda:observation)]/cda:substanceAdministration">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime[@xsi:type='PIVL_TS'] or cda:effectiveTime[@xsi:type='EIVL_TS']">SHOULD contain zero or one [0..1] effectiveTime (CONF:1098-7513) such that it **SHALL** contain exactly one [1..1] @xsi:type="PIVL_TS" or "EIVL_TS" (CONF:1098-28499).</assert>
      <assert test="cda:routeCode">SHOULD contain routeCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ReactionObservation-warnings-entryRelationship-severity.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09']]/cda:entryRelationship[not(cda:procedure) and not(cda:substanceAdministration) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="Reason-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.88:2023-05-01-->
    <rule id="Reason-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.88' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ReasonforReferralSection-warnings">
    <!--urn:hl7ii:1.3.6.1.4.1.19376.1.5.3.1.3.1:2014-06-09-->
    <rule id="ReasonforReferralSection-warnings-entry-patientReferral.act" context="cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.1' and @extension='2014-06-09']]/cda:entry[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.140' and not(@extension)])]]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:priorityCode">SHOULD contain priorityCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="ReferralNote-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.14:2024-05-01-->
    <rule id="ReferralNote-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:participant[@typeCode = 'IND']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="IND" Indirect (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
      <assert test="cda:participant[@typeCode = 'CALLBCK']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="CALLBCK" call back contact (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
    </rule>
    <rule id="ReferralNote-warnings-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="ReferralNote-warnings-informationRecipient.intendedRecipient.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="ReferralNote-warnings-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.10' and @extension='2014-06-09']]]">SHOULD contain a Plan of Treatment Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]]">SHOULD contain a Results Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]]">SHOULD contain a Functional Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]]">SHOULD contain a Mental Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]]">SHOULD contain a Nutrition Section</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-medicalEquip.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="ReferralNote-warnings-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
  </pattern>
  <pattern id="RelatedPersonRelationshipAndNameParticipant-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.5.8:2023-05-01-->
    <rule id="RelatedPersonRelationshipAndNameParticipant-warnings-associatedEntity" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="RelatedPersonRelationshipAndNameParticipant-warnings-associatedEntity.addr" context="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="ResultObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.2:2023-05-01-->
    <rule id="ResultObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:interpretationCode">SHOULD contain interpretationCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:referenceRange">SHOULD contain referenceRange</assert>
    </rule>
    <rule id="ResultObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1'">This code **SHOULD** be a code from the LOINC that identifies the result observation. If an appropriate LOINC code does not exist, then the local code for this result **SHALL** be sent (CONF:4537-19212).</assert>
    </rule>
    <rule id="ResultObservation-warnings-value-coded" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01']]/cda:value[@xsi:type='CD']">
      <assert test="@codeSystem = '2.16.840.1.113883.6.96' or @codeSystem = '2.16.840.1.113883.6.1'">If Observation/value is a CD (**xsi:type="CD"**) the value **SHOULD** be SNOMED-CT or LOINC (CONF:4537-32610).</assert>
    </rule>
  </pattern>
  <pattern id="ResultOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.1:2023-05-01-->
    <rule id="ResultOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="ResultOrganizer-warnings-code" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or @codeSystem = '2.16.840.1.113883.6.96'">**SHOULD** be selected from LOINC (codeSystem 2.16.840.1.113883.6.1) **OR** SNOMED CT (codeSystem 2.16.840.1.113883.6.96), and **MAY** be selected from CPT (codeSystem 2.16.840.1.113883.6.12) (CONF:4537-19218).</assert>
    </rule>
    <rule id="ResultOrganizer-warnings-component-resultObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:procedure)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:interpretationCode">SHOULD contain interpretationCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:referenceRange">SHOULD contain referenceRange</assert>
    </rule>
    <rule id="ResultOrganizer-warnings-component-specimenProc.procedure" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01']]/cda:component[not(cda:observation) and cda:procedure[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01'])]]/cda:procedure">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
    </rule>
  </pattern>
  <pattern id="ResultsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.3.1:2015-08-01-->
    <rule id="ResultsSection-warnings-entry-organizer.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.3.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="RiskConcernAct-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.136:2015-08-01-->
    <rule id="RiskConcernAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-problemObservation1.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-allergy-IntoleranceObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.7' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-entryReferenceRefr.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-entryReferenceComp.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'COMP') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-assessmentScaleObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-mentalStatusObservation2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.74' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-self-CareActivitiesADLandIADL.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-smokingStatus.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-encounterDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.80' and @extension='2024-05-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-entryRelationship11.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.45' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-functionalStatusObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.67' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-hospitalAdmissionDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.34' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-nutritionAssessment.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.138' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-postprocedureDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.51' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-pregnancyObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-preoperativeDiagnosis.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.65' and @extension='2015-08-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-reactionObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-resultObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.2' and @extension='2023-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:interpretationCode">SHOULD contain interpretationCode</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="cda:referenceRange">SHOULD contain referenceRange</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-sensoryStatus.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-socialHistoryObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-substanceorDeviceAllergy-IntoleranceObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-vitalSignObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not((contains((('2708-6 3150-0 59408-5 8289-1 59575-1 59576-9')), cda:code/@code))) or cda:value/@unit = '%'">Percentage codes (PulseOx, O2 Concentration, Percentiles) should be represented with %</assert>
      <assert test="not((contains((('8287-5 8302-2 8306-3 9843-4')), cda:code/@code))) or cda:value/@unit = 'cm'">Height &amp; Head Circumference should be represented in cm</assert>
      <assert test="not((cda:code/@code = '29463-7')) or cda:value/@unit = 'kg'">Weight should be represented in kg</assert>
      <assert test="not((cda:code/@code = '8310-5')) or cda:value/@unit = 'Cel'">Temperature should be represented in Celcius (Cel)</assert>
      <assert test="not((contains((('8480-6 8462-4 8478-0 96608-5 96609-3')), cda:code/@code))) or cda:value/@unit = 'mm[Hg]'">Blood pressure should be represented in mm[Hg]</assert>
      <assert test="not((contains((('8867-4 9279-1')), cda:code/@code))) or cda:value/@unit = '/min'">Rates should be represented in /min</assert>
      <assert test="not((cda:code/@code = '39156-5')) or cda:value/@unit = 'kg/m2'">BMI should be represented in kg/m2</assert>
      <assert test="not((cda:code/@code = '3140-1')) or cda:value/@unit = 'm2'">BSA should be represented in m2</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-longitudinalCareWoundObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.114' and @extension='2015-08-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-problemObservation2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'SPRT') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.4' and @extension='2024-05-01'])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-caregiverCharacteristics.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-culturalandReligiousObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-characteristicsofHomeEnvironment.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-nutritionalStatusObservation.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-resultOrganizer.organizer" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and not(cda:act) and cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.1' and @extension='2023-05-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-priorityPreference2.observation" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.143' and not(@extension)])] and not(cda:act) and not(cda:organizer)]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-entryRelationship-problemConcernAct.act" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:entryRelationship[(@typeCode = 'REFR') and not(cda:observation) and cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.3' and @extension='2024-05-01'])] and not(cda:organizer)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="RiskConcernAct-warnings-reference.externalDocument" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.136' and @extension='2015-08-01']]/cda:reference/cda:externalDocument">
      <assert test="cda:setId">SHOULD contain setId</assert>
      <assert test="cda:versionNumber">SHOULD contain versionNumber</assert>
    </rule>
  </pattern>
  <pattern id="SectionTimeRangeObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.201:2016-06-01-->
    <rule id="SectionTimeRangeObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.201' and @extension='2016-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SelfCareActivitiesADLandIADL-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.128-->
    <rule id="SelfCareActivitiesADLandIADL-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($ADLResultType, @code)">SHOULD be selected from ValueSet ADLResultType</assert>
    </rule>
    <rule id="SelfCareActivitiesADLandIADL-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.128' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($Ability, @code)">SHOULD be selected from ValueSet Ability</assert>
    </rule>
  </pattern>
  <pattern id="SensoryStatus-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.127-->
    <rule id="SensoryStatus-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SensoryStatus-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:code">
      <assert test="@nullFlavor or contains($SensoryStatusProblemType, @code)">SHOULD be selected from ValueSet SensoryStatusProblemType</assert>
    </rule>
    <rule id="SensoryStatus-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:value">
      <assert test="@nullFlavor or contains($MentalAndFunctionalStatusResponse, @code)">SHOULD be selected from ValueSet MentalAndFunctionalStatusResponse</assert>
    </rule>
    <rule id="SensoryStatus-warnings-entryRelationship-assessmentScaleObservation.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.127' and not(@extension)]]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SerialNumberObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.319:2019-06-21-->
    <rule id="SerialNumberObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="ServiceDeliveryLocation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.32-->
    <rule id="ServiceDeliveryLocation-warnings-root" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]">
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="ServiceDeliveryLocation-warnings-addr" context="cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="SeverityObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.8:2014-06-09-->
    <rule id="SeverityObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SeverityObservation-warnings-value" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09']]/cda:value">
      <assert test="@nullFlavor or contains($Severity, @code)">SHOULD be selected from ValueSet Severity</assert>
    </rule>
  </pattern>
  <pattern id="SexObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.507:2023-07-01-->
    <rule id="SexObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SexObservation-warnings-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.507' and @extension='2023-07-01']]/cda:value/@code">
      <assert test="contains($Sex, .)">SHOULD be selected from ValueSet Sex</assert>
    </rule>
  </pattern>
  <pattern id="SexualOrientationObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.501:2023-05-01-->
    <rule id="SexualOrientationObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SexualOrientationObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.501' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatus-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.511:2024-05-01-->
    <rule id="SmokingStatus-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SmokingStatusMeaningfulUse-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.78:2024-05-01-->
    <rule id="SmokingStatusMeaningfulUse-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SmokingStatusMeaningfulUse-warnings-value.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.78' and @extension='2024-05-01']]/cda:value/@code">
      <assert test="contains($SmokingStatus, .)">SHOULD be selected from ValueSet SmokingStatus</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistoryObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.38:2022-06-01-->
    <rule id="SocialHistoryObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SocialHistoryObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
    <rule id="SocialHistoryObservation-warnings-entryRelationship-supportingObs.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.69' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistoryObservation-warnings-entryRelationship-entryReference.act" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SocialHistorySection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.17:2015-08-01-->
    <rule id="SocialHistorySection-warnings-root" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-socialHistory.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.38' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-pregnancyPregnancy.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.15.3.8' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-smokingStatus.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-caregiver.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.72' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-culteralReligious.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.111' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SocialHistorySection-warnings-entry-homeCharacteristics.observation" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]/cda:entry[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.109' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenCollectionProcedure-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.415:2018-09-01-->
    <rule id="SpecimenCollectionProcedure-warnings-root" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
      <assert test="cda:targetSiteCode">SHOULD contain targetSiteCode</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-warnings-entryRelationship-specimenRef.act" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[cda:act[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.122' and not(@extension)])] and not(cda:observation)]/cda:act">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SpecimenCollectionProcedure-warnings-entryRelationship-condition.observation" context="cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.415' and @extension='2018-09-01']]/cda:entryRelationship[not(cda:act) and cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SpecimenConditionObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.421:2018-06-12-->
    <rule id="SpecimenConditionObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.421' and @extension='2018-06-12']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceAdministeredAct-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.118-->
    <rule id="SubstanceAdministeredAct-warnings-root" context="cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.118' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.24.3.90:2014-06-09-->
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not(cda:entryRelationship/cda:observation[cda:code/@code = 'SEV' and cda:code/@codeSystem = '2.16.840.1.113883.5.4'])">Allergy SHOULD NOT include severity. Severity belongs at reaction level, while Criticality is used at the allergy level.</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-status.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.28' and @extension='2019-06-20'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-reaction.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.9' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:effectiveTime">SHOULD contain effectiveTime</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-severity.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.8' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="SubstanceOrDeviceAllergyIntoleranceObservation-warnings-entryRelationship-criticality.observation" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.24.3.90' and @extension='2014-06-09']]/cda:entryRelationship[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.145' and not(@extension)])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="TobaccoUse-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.85:2014-06-09-->
    <rule id="TobaccoUse-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.85' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="TransferSummary-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.13:2024-05-01-->
    <rule id="TransferSummary-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
      <assert test="cda:participant[@typeCode = 'IND']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="IND" Indirect (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
      <assert test="cda:participant[@typeCode = 'CALLBCK']">SHOULD contain zero or more [0..*] participant such that it SHALL contain exactly one [1..1] @typeCode="CALLBCK" call back contact (CodeSystem: HL7ParticipationType urn:oid:2.16.840.1.113883.5.90 DYNAMIC)</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-indirect" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'IND')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-callback" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-callback.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity">
      <assert test="cda:addr">SHOULD contain addr</assert>
    </rule>
    <rule id="TransferSummary-warnings-participant-callback.associatedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="TransferSummary-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="TransferSummary-warnings-documentationOf.serviceEvent.performer-performer1.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer[(@typeCode = 'PRF')]/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody">
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.21.1' and @extension='2022-02-14']]]">SHOULD contain am Advamce Directives Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.14' and @extension='2014-06-09']]]">SHOULD contain a Functional Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01']]]">SHOULD contain a Discharge Diagnosis Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.7.1' and @extension='2014-06-09']]]">SHOULD contain a Procedures Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01']]]">SHOULD contain a Social History Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.56' and @extension='2015-08-01']]]">SHOULD contain a Mental Status Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)]]]">SHOULD contain a Nutrition Section</assert>
      <assert test="cda:component[cda:section[cda:templateId[@root='1.3.6.1.4.1.19376.1.5.3.1.3.4' and not(@extension)]]]">SHOULD contain a History of Present Illness Section</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-dischargeDiagnosis.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.24' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-medicalEquip.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.23' and @extension='2014-06-09'])]]/cda:section">
      <assert test="cda:entry[cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.50' and @extension='2014-06-09']]]">SHOULD contain Non-Medicinal Supply Activity</assert>
      <assert test="cda:entry[cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]]">SHOULD contain Procedure Activity Procedure</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-payers.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.18' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.60' and @extension='2024-05-01']]]">SHOULD contain Coverage Activity</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-socialHistory.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.17' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.511' and @extension='2024-05-01']]]">SHOULD contain Smoking Status</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-nutrition.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.57' and not(@extension)])]]/cda:section">
      <assert test="cda:entry[cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.124' and not(@extension)]]]">SHOULD contain Nutritional Status Observation</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-admissionMedications.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.44' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry[cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.36' and @extension='2014-06-09']]]">SHOULD contain Admission Medication</assert>
    </rule>
    <rule id="TransferSummary-warnings-component.structuredBody.component-admissionDiagnosis.section" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:component/cda:structuredBody/cda:component[cda:section[(cda:templateId[@root='2.16.840.1.113883.10.20.22.2.43' and @extension='2015-08-01'])]]/cda:section">
      <assert test="cda:entry">SHOULD contain entry</assert>
    </rule>
  </pattern>
  <pattern id="TreatmentInterventionPreference-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.510:2024-05-01-->
    <rule id="TreatmentInterventionPreference-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="sdtcPrecondition2">SHOULD contain sdtc:Precondition2</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-warnings-sdtcPrecondition2" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/sdtc:precondition2">
      <assert test="sdtc:criterion">SHOULD contain criterion</assert>
    </rule>
    <rule id="TreatmentInterventionPreference-warnings-sdtcPrecondition2.criterion.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.510' and @extension='2024-05-01']]/sdtc:precondition2/sdtc:criterion/cda:code">
      <assert test="@nullFlavor or contains($ADConditionsAndPrognosisScenarios, @code)">SHOULD be selected from ValueSet ADConditionsAndPrognosisScenarios</assert>
    </rule>
  </pattern>
  <pattern id="TribalAffiliationObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.506:2023-05-01-->
    <rule id="TribalAffiliationObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:value">SHOULD contain value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="TribalAffiliationObservation-warnings-code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.506' and @extension='2023-05-01']]/cda:code">
      <assert test="@codeSystem = '2.16.840.1.113883.6.1' or cda:translation[@codeSystem = '2.16.840.1.113883.6.1']">If @codeSystem is not LOINC, then this code **SHALL** contain at least one [1..*] translation, which **SHOULD** be selected from CodeSystem LOINC (urn:oid:2.16.840.1.113883.6.1) (CONF:4515-32956).</assert>
      <assert test="@nullFlavor or contains($SocialHistoryType, @code)">SHOULD be selected from ValueSet SocialHistoryType</assert>
    </rule>
  </pattern>
  <pattern id="UDIOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.311:2019-06-21-->
    <rule id="UDIOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="UDIOrganizer-warnings-component-deviceObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.304' and @extension='2022-06-01'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
    <rule id="UDIOrganizer-warnings-component-otherObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.311' and @extension='2019-06-21']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.315' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.319' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.316' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.309' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.308' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.301' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.317' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.303' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.302' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.314' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.318' and @extension='2019-06-21']) or (cda:templateId[@root='2.16.840.1.113883.10.20.22.4.305' and @extension='2019-06-21'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeader-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.1:2024-05-01-->
    <rule id="USRealmHeader-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="USRealmHeader-warnings-effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-confidentialityCode.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:confidentialityCode/@code">
      <assert test="contains($HL7BasicConfidentialityKind, .)">SHOULD be selected from ValueSet HL7BasicConfidentialityKind</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="cda:maritalStatusCode">SHOULD contain maritalStatusCode</assert>
      <assert test="cda:languageCommunication">SHOULD contain languageCommunication</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.birthTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime">
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHOULD** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.sdtcDeceasedTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/sdtc:deceasedTime">
      <assert test="@value">SHOULD contain @value</assert>
      <assert test="@nullFlavor or string-length(@value) &gt;= 8">**SHOULD** be precise to at least the day</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.guardian.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.guardian.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.birthplace.place.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:birthplace/cda:place/cda:addr">
      <assert test="@nullFlavor or (cda:country and cda:country/text()[normalize-space()] != 'US' and cda:country/text()[normalize-space()] != 'USA') or not(cda:postalCode) or cda:postalCode[@nullFlavor or text()[normalize-space()][(string-length(normalize-space()) = 5 and translate(., '0123456789', '0000000000') = '00000') or (string-length(normalize-space()) = 10 and translate(., '0123456789', '0000000000') = '00000-0000')]]">If country is US, this addr **MAY** contain zero or one [0..1] postalCode, which **SHALL** be selected from ValueSet PostalCode urn:oid:2.16.840.1.113883.3.88.12.80.2 *DYNAMIC* (CONF:4537-5403).</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.patient.languageCommunication" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:languageCommunication">
      <assert test="cda:proficiencyLevelCode">SHOULD contain proficiencyLevelCode</assert>
      <assert test="cda:preferenceInd">SHOULD contain preferenceInd</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.providerOrganization.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.providerOrganization.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-recordTarget.patientRole.providerOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="cda:id[@root = '2.16.840.1.113883.4.6']">SHOULD contain an id with root='2.16.840.1.113883.4.6' (NPI)</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor.id-npi" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:id[(@root = '2.16.840.1.113883.4.6')]">
      <assert test="@extension">SHOULD contain extension</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-author.assignedAuthor.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.assignedEntity.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-dataEnterer.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-informant-provider.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-custodian.assignedCustodian.representedCustodianOrganization.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-custodian.assignedCustodian.representedCustodianOrganization.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-custodian.assignedCustodian.representedCustodianOrganization.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:signatureCode">
      <assert test="not(@code) or @code != 'X'">CDA Release One represented either an intended ('X') or actual ('S') authenticator. CDA Release Two only represents an actual authenticator, so has deprecated the value of 'X'.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-legalAuthenticator.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.signatureCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:signatureCode">
      <assert test="not(@code) or @code != 'X'">CDA Release One represented either an intended ('X') or actual ('S') authenticator. CDA Release Two only represents an actual authenticator, so has deprecated the value of 'X'.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.assignedEntity.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.assignedEntity.addr" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
    <rule id="USRealmHeader-warnings-authenticator.assignedEntity.telecom" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:telecom">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
    </rule>
    <rule id="USRealmHeader-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="USRealmHeader-warnings-participant.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.effectiveTime.low" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime/cda:low">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.time" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeader-warnings-documentationOf.serviceEvent.performer.assignedEntity.id.root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:id/@root">
      <assert test="self::node() = '2.16.840.1.113883.4.6'">SHOULD be NPI</assert>
    </rule>
    <rule id="USRealmHeader-warnings-componentOf.encompassingEncounter" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter">
      <assert test="cda:responsibleParty">SHOULD contain responsibleParty</assert>
    </rule>
    <rule id="USRealmHeader-warnings-componentOf.encompassingEncounter.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:code">
      <assert test="@nullFlavor or contains($ActEncounterCodes, @code)">SHOULD be selected from ValueSet ActEncounterCodes</assert>
    </rule>
    <rule id="USRealmHeader-warnings-componentOf.encompassingEncounter.effectiveTime" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
  </pattern>
  <pattern id="USRealmHeaderforPatientGeneratedDocument-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.29.1:2024-05-01-->
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-recordTarget.patientRole.patient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient">
      <assert test="cda:maritalStatusCode">SHOULD contain maritalStatusCode</assert>
      <assert test="cda:languageCommunication">SHOULD contain languageCommunication</assert>
      <assert test="cda:languageCommunication">SHOULD contain languageCommunication</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-recordTarget.patientRole.patient.guardian" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian">
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:addr">SHOULD contain addr</assert>
      <assert test="cda:telecom">SHOULD contain telecom</assert>
      <assert test="cda:id">SHOULD contain id</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-author.assignedAuthor" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor">
      <assert test="cda:id[@root = '2.16.840.1.113883.4.6']">SHOULD contain an id with root='2.16.840.1.113883.4.6' (NPI)</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-author.assignedAuthor.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-dataEnterer.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informant-non-provider.relatedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]/cda:relatedEntity/cda:code">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informant-non-provider.relatedEntity.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informant[(cda:relatedEntity) and not(cda:assignedEntity)]/cda:relatedEntity/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informationRecipient.intendedRecipient" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient">
      <assert test="cda:id">SHOULD contain id</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-informationRecipient.intendedRecipient.id" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:id">
      <assert test="@root">SHOULD contain @root</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-legalAuthenticator.assignedEntity.code.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:code/@code">
      <assert test="contains($PersonalAndLegalRelationshipRoleType, .)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-authenticator.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-authenticator.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-participant" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant">
      <assert test="not(@typeCode = 'IND') or cda:associatedEntity/@classCode[contains($INDRoleclassCodes, .)]">When participant/@typeCode is *IND*, associatedEntity/@classCode **SHOULD** be selected from ValueSet 2.16.840.1.113883.11.20.9.33 INDRoleclassCodes *DYNAMIC* (CONF:4537-10007).</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-participant.associatedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-participant.associatedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:participant/cda:associatedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent">
      <assert test="cda:performer">SHOULD contain performer</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:performer">SHOULD contain performer</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent.performer.functionCode" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:functionCode">
      <assert test="@code">SHOULD contain @code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent.performer.assignedEntity" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity">
      <assert test="cda:code">SHOULD contain code</assert>
    </rule>
    <rule id="USRealmHeaderforPatientGeneratedDocument-warnings-documentationOf.serviceEvent.performer.assignedEntity.code" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.29.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:code">
      <assert test="@nullFlavor or contains($PersonalAndLegalRelationshipRoleType, @code)">SHOULD be selected from ValueSet PersonalAndLegalRelationshipRoleType</assert>
    </rule>
  </pattern>
  <pattern id="UnstructuredDocument-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.1.10:2024-05-01-->
    <rule id="UnstructuredDocument-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.10' and @extension='2024-05-01']]">
      <assert test="cda:legalAuthenticator">SHOULD contain legalAuthenticator</assert>
      <assert test="cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]">Documents SHOULD contain a RelatedPerson participant</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignObservation-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.27:2014-06-09-->
    <rule id="VitalSignObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not((contains((('2708-6 3150-0 59408-5 8289-1 59575-1 59576-9')), cda:code/@code))) or cda:value/@unit = '%'">Percentage codes (PulseOx, O2 Concentration, Percentiles) should be represented with %</assert>
      <assert test="not((contains((('8287-5 8302-2 8306-3 9843-4')), cda:code/@code))) or cda:value/@unit = 'cm'">Height &amp; Head Circumference should be represented in cm</assert>
      <assert test="not((cda:code/@code = '29463-7')) or cda:value/@unit = 'kg'">Weight should be represented in kg</assert>
      <assert test="not((cda:code/@code = '8310-5')) or cda:value/@unit = 'Cel'">Temperature should be represented in Celcius (Cel)</assert>
      <assert test="not((contains((('8480-6 8462-4 8478-0 96608-5 96609-3')), cda:code/@code))) or cda:value/@unit = 'mm[Hg]'">Blood pressure should be represented in mm[Hg]</assert>
      <assert test="not((contains((('8867-4 9279-1')), cda:code/@code))) or cda:value/@unit = '/min'">Rates should be represented in /min</assert>
      <assert test="not((cda:code/@code = '39156-5')) or cda:value/@unit = 'kg/m2'">BMI should be represented in kg/m2</assert>
      <assert test="not((cda:code/@code = '3140-1')) or cda:value/@unit = 'm2'">BSA should be represented in m2</assert>
    </rule>
    <rule id="VitalSignObservation-warnings-code.code" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09']]/cda:code/@code">
      <assert test="contains($VitalSignResultType, .)">SHOULD be selected from ValueSet VitalSignResultType</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsOrganizer-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.4.26:2015-08-01-->
    <rule id="VitalSignsOrganizer-warnings-root" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="VitalSignsOrganizer-warnings-component-vitalSignObs.observation" context="cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01']]/cda:component[cda:observation[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.27' and @extension='2014-06-09'])]]/cda:observation">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:code">SHOULD contain code</assert>
      <assert test="cda:author">SHOULD contain author</assert>
      <assert test="not((contains((('2708-6 3150-0 59408-5 8289-1 59575-1 59576-9')), cda:code/@code))) or cda:value/@unit = '%'">Percentage codes (PulseOx, O2 Concentration, Percentiles) should be represented with %</assert>
      <assert test="not((contains((('8287-5 8302-2 8306-3 9843-4')), cda:code/@code))) or cda:value/@unit = 'cm'">Height &amp; Head Circumference should be represented in cm</assert>
      <assert test="not((cda:code/@code = '29463-7')) or cda:value/@unit = 'kg'">Weight should be represented in kg</assert>
      <assert test="not((cda:code/@code = '8310-5')) or cda:value/@unit = 'Cel'">Temperature should be represented in Celcius (Cel)</assert>
      <assert test="not((contains((('8480-6 8462-4 8478-0 96608-5 96609-3')), cda:code/@code))) or cda:value/@unit = 'mm[Hg]'">Blood pressure should be represented in mm[Hg]</assert>
      <assert test="not((contains((('8867-4 9279-1')), cda:code/@code))) or cda:value/@unit = '/min'">Rates should be represented in /min</assert>
      <assert test="not((cda:code/@code = '39156-5')) or cda:value/@unit = 'kg/m2'">BMI should be represented in kg/m2</assert>
      <assert test="not((cda:code/@code = '3140-1')) or cda:value/@unit = 'm2'">BSA should be represented in m2</assert>
    </rule>
  </pattern>
  <pattern id="VitalSignsSection-warnings">
    <!--urn:hl7ii:2.16.840.1.113883.10.20.22.2.4.1:2015-08-01-->
    <rule id="VitalSignsSection-warnings-entry-vitalsOrg.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.26' and @extension='2015-08-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
    <rule id="VitalSignsSection-warnings-entry-averageBPOrg.organizer" context="cda:section[cda:templateId[@root='2.16.840.1.113883.10.20.22.2.4.1' and @extension='2015-08-01']]/cda:entry[cda:organizer[(cda:templateId[@root='2.16.840.1.113883.10.20.22.4.512' and @extension='2024-05-01'])]]/cda:organizer">
      <assert test="sdtc:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
      <assert test="cda:author">SHOULD contain author</assert>
    </rule>
  </pattern>
  <pattern id="WoundCharacteristic-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.134-->
    <rule id="WoundCharacteristic-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.134' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="WoundMeasurementObservation-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.4.133-->
    <rule id="WoundMeasurementObservation-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.133' and not(@extension)]]">
      <assert test="cda:text/cda:reference/@value">SHOULD contain text/reference/@value</assert>
    </rule>
  </pattern>
  <pattern id="USRealmAddress-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.2-->
    <rule id="USRealmAddress-warnings-root" context="cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'VRF')]/cda:participantRole/cda:addr | cda:observation[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.48' and @extension='2022-02-14']]/cda:participant[(@typeCode = 'CST')]/cda:participantRole/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.119' and not(@extension)]]/cda:assignedAuthor/cda:representedOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500.1' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:organizer[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.500' and @extension='2022-06-01']]/cda:participant[(@typeCode = 'LOC')]/cda:participantRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.141' and not(@extension)]]/cda:participant[(@typeCode = 'IRCP')]/cda:participantRole/cda:addr | cda:supply[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.18' and @extension='2023-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.87')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:performer[(cda:templateId/@root = '2.16.840.1.113883.10.20.22.4.88')]/cda:assignedEntity/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'COV')]/cda:participantRole/cda:addr | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.61' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'HLD')]/cda:participantRole/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:addr | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:performer/cda:assignedEntity/cda:representedOrganization/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.7' and @extension='2020-05-19']]/cda:associatedEntity/cda:scopingOrganization/cda:addr | cda:author[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.6' and @extension='2019-10-01']]/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:informationRecipient/cda:intendedRecipient/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.14' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:participant[cda:templateId[@root='2.16.840.1.113883.10.20.22.5.8' and @extension='2023-05-01']]/cda:associatedEntity/cda:addr | cda:participantRole[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.32' and not(@extension)]]/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.13' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'CALLBCK')]/cda:associatedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:patient/cda:guardian/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:recordTarget/cda:patientRole/cda:providerOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:assignedAuthor/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:informant[not(cda:relatedEntity) and (cda:assignedEntity)]/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:custodian/cda:assignedCustodian/cda:representedCustodianOrganization/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:assignedEntity/cda:addr | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:assignedEntity/cda:addr">
      <assert test="@nullFlavor or @use">SHOULD contain @use</assert>
      <assert test="@nullFlavor or cda:country">SHOULD contain country</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTime-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.4-->
    <rule id="USRealmDateTime-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:authenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:author/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:dataEnterer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:legalAuthenticator/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:authenticator/cda:time">
      <assert test="@nullFlavor or string-length(@value) &gt; 8">**SHOULD** be precise to at least the minute</assert>
    </rule>
  </pattern>
  <pattern id="USRealmDateTimeInterval-warnings">
    <!--urn:oid:2.16.840.1.113883.10.20.22.5.3-->
    <rule id="USRealmDateTimeInterval-warnings-root" context="cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:participant[(@typeCode = 'VRF')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:documentationOf[(cda:serviceEvent/@classCode = 'PCPR')]/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.15' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.4' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.2' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.8' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.3' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:act[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.202' and @extension='2016-11-01']]/cda:participant[(@typeCode = 'LA')]/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.7' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:procedure[cda:templateId[@root='2.16.840.1.113883.10.20.22.4.14' and @extension='2024-05-01']]/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.6' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.9' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:participant/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:effectiveTime | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:documentationOf/cda:serviceEvent/cda:performer/cda:time | cda:ClinicalDocument[cda:templateId[@root='2.16.840.1.113883.10.20.22.1.1' and @extension='2024-05-01']]/cda:componentOf/cda:encompassingEncounter/cda:effectiveTime">
      <assert test="not(@value) or string-length(@value) &gt; 8">If a time interval contains @value, then it SHOULD contain a time component.</assert>
    </rule>
  </pattern>
  <let name="XActClassDocumentEntryAct" value="'ACCM ACSN ACT AEXPOS CONS CONTREG CTTEVENT DISPACT EXPOS INC INFRM LIST MPROT PCPR REG REV SPCTRT STORE TEXPOS TRFR TRNS'"/>
  <let name="XDocumentActMood" value="'APT ARQ DEF EVN INT PRMS PRP RQO RSK'"/>
  <let name="XActRelationshipEntryRelationship" value="'CAUS COMP GEVL MFST REFR RSON SAS SPRT SUBJ XCRPT'"/>
  <let name="XActMoodDocumentObservation" value="'APT ARQ DEF EVN GOL INT PRMS PRP RQO RSK'"/>
  <let name="AdvanceDirectivesCategories" value="'100821-8 42348-3 64298-3 81334-5 84095-9 86533-7 92664-2 93037-0'"/>
  <let name="ActStatus" value="'normal aborted active cancelled completed held new suspended nullified obsolete'"/>
  <let name="AdvanceDirectivesContentType" value="'103735009 108259003 225365006 229912004 25156005 271298009 281789004 281800008 363259005 385741000 385763009 386367000 405083000 52765003 61420007 71388002 75776-5 75779-9 75780-7 75781-5 75787-2 75788-0 75789-8 75790-6 75791-4 75792-2 75793-0 77352-3 78823007 81329-5 81330-3 81331-1 81332-9 81333-7 81349-3 81350-1 81353-5 81376-6 89666000'"/>
  <let name="UspsTwoLetterAlphabeticCodes" value="'AL AK AS AZ AR CA CO CT DE DC FM FL GA GU HI ID IL IN IA KS KY LA ME MH MD MA MI MN MS MO MT NE NV NH NJ NM NY NC ND MP OH OK OR PW PA PR RI SC SD TN TX UT VT VI VA WA WV WI WY AE AP AA'"/>
  <let name="HealthcareAgentOrProxyChoices" value="'75783-1 75784-9 75785-6 81335-2 81343-6'"/>
  <let name="PersonalAndLegalRelationshipRoleType" value="'ADOPTF ADOPTM ADOPTP AUNT BRO BROINLAW CHILD CHLDADOPT CHLDFOST CHLDINLAW COUSN DAU DAUADOPT DAUC DAUFOST DAUINLAW DOMPART DPOWATT EXCEST EXT FAMMEMB FMRSPS FRND FTH FTHFOST FTHINLAW FTWIN FTWINBRO FTWINSIS GESTM GGRFTH GGRMTH GGRPRN GRFTH GRMTH GRNDCHILD GRNDDAU GRNDSON GRPRN GUADLTM GUARD HBRO HPOWATT HSIB HSIS HUSB INLAW ITWIN ITWINBRO ITWINSIS MAUNT MCOUSN MGGRFTH MGGRMTH MGGRPRN MGRFTH MGRMTH MGRPRN MTH MTHFOST MTHINLAW MUNCLE NBOR NBRO NCHILD NEPHEW NFTH NFTHF NIECE NIENEPH NMTH NMTHF NPRN NSIB NSIS ONESELF PAUNT PCOUSN PGGRFTH PGGRMTH PGGRPRN PGRFTH PGRMTH PGRPRN POWATT PRN PRNFOST PRNINLAW PUNCLE ROOM SIB SIBINLAW SIGOTHR SIS SISINLAW SON SONADOPT SONC SONFOST SONINLAW SPOWATT SPS STPBRO STPCHLD STPDAU STPFTH STPMTH STPPRN STPSIB STPSIS STPSON TWIN TWINBRO TWINSIS UNCLE WIFE'"/>
  <let name="XActRelationshipExternalReference" value="'ELNK REFR RPLC SPRT SUBJ XCRPT'"/>
  <let name="XActClassDocumentEntryOrganizer" value="'BATTERY CLUSTER'"/>
  <let name="AgePQ_UCUM" value="'a d h min mo wk'"/>
  <let name="ProblemActStatusCode" value="'aborted active completed suspended'"/>
  <let name="AllergyClinicalStatus" value="'413322009 55561003 73425007'"/>
  <let name="SocialHistoryType" value="'102487004 105421008 160476009 228272008 229819007 256235009 302160007 363908000 364393001 364703007 423514004 424483007 425400000 442133001 446996006 897148007'"/>
  <let name="BirthSex" value="'ASKU F M OTH UNK'"/>
  <let name="CarePlanDocumentType" value="'18776-5 64295-9 74156-1 77442-2 77443-0 77444-8 77445-5 77446-3 80739-6 80740-4 80741-2 80742-0 80743-8 80744-6 80745-3 80746-1 80747-9 80748-7 80749-5 80750-3 80751-1 80752-9 80753-7 80754-5 80755-2 80756-0 80757-8 80758-6 80759-4 80760-2 80761-0 80762-8 80763-6 80764-4 80765-1 80766-9 80767-7 80768-5 80769-3 80770-1 80771-9 80772-7 80773-5 80774-3 80775-0 80776-8 80777-6 80778-4 80779-2 80780-0 80781-8 80782-6 80783-4 80784-2 80785-9 80786-7 80787-5 80788-3 80789-1 80790-9 80791-7 80796-6 80797-4 80804-8 80818-8 81200-8 81957-3 82364-1 83635-3 83734-4 83895-3 84011-6 84034-8 84070-2 84094-2 84117-1 84124-7 84135-3 84136-1 84151-0 84164-3 84165-0 84172-6 84183-3 84185-8 84187-4 84197-3 84203-9 84210-4 84217-9 84244-3 84295-5 84306-0 84314-4 84337-5 85182-4 85186-5 85228-5 85254-1 87237-4 87253-1 87265-5 87629-2 89239-8 89240-6 90769-1 93023-0 93024-8 93902-5 94244-1 94318-3 95752-2 95759-7'"/>
  <let name="INDRoleclassCodes" value="'AGNT CAREGIVER ECON GUAR NOK PRS'"/>
  <let name="X_ActRelationshipDocument" value="'APND RPLC XFRM'"/>
  <let name="ActStatus_1" value="'aborted active cancelled completed held new normal nullified obsolete suspended'"/>
  <let name="EntityClassRoot" value="'ENT HCE LIV NLIV ANM MIC PLNT PSN MAT CHEM FOOD MMAT CONT HOLD DEV CER MODDV ORG PUB STATE NAT PLC CITY COUNTRY COUNTY PROVINCE RGRP'"/>
  <let name="CareTeamCategory" value="'LA27975-4 LA27976-2 LA27977-0 LA27978-8 LA27980-4 LA28865-6 LA28866-4 LA28867-2'"/>
  <let name="X_ServiceEventPerformer" value="'PPRF PRF SPRF'"/>
  <let name="CriticalityObservation" value="'CRITH CRITL CRITU'"/>
  <let name="DischargeSummaryDocumentTypeCode" value="'11490-0 18842-5 28655-9 29761-4 34105-7 34106-5 34745-0 59258-4 59259-2 68558-6 68572-7 68578-4 68591-7 68612-1 68626-1 68642-8 68653-5 68663-4 68674-1 68688-1 68697-2 68709-5 68719-4 68733-5 68738-4 68749-1 68768-1 68773-1 68779-8 68795-4 68805-1 68815-0 68823-4 68831-7 68841-6 68856-4 77409-1 77417-4 78263-1 78264-9 78418-1 78419-9 78420-7 78421-5 78585-7 80811-3 83523-1 83551-2 83712-0 83810-2 83898-7 83921-7 83932-4 83956-3 83961-3 83968-8 83993-6 84013-2 84017-3 84018-1 84024-9 84040-5 84132-0 84139-5 84179-1 84248-4 84254-2 84257-5 84262-5 84278-1 84310-2 84321-9 84328-4 84331-8 84367-2 84393-8 85154-3 85176-6 85192-3 85200-4 85223-6 85240-0 85243-4 85433-1 85434-9 85440-6 85442-2 85514-8 85520-5 85849-8 85875-3 85878-7 87235-8 87256-4 88641-6 88645-7 88693-7 89214-1 89218-2 93903-3 94464-5 94465-2 94515-4 94516-2 94517-0 94519-6 94520-4 94521-2 94522-0 94523-8 94524-6 94525-3 94526-1 94527-9 94529-5 94530-3 95133-5 96378-5 97663-9 97690-2 97700-9 97701-7 97702-5 97703-3 97704-1 97714-0 97719-9 97725-6 99483-0 99488-9 99489-7 99490-5'"/>
  <let name="XDocumentEncounterMood" value="'APT ARQ DEF EVN INT PRMS PRP RQO'"/>
  <let name="EncounterTypeCode" value="'1013649 1013652 1013757 1013760 1013766 1013771 1013796 1020434 1036687 98966 98967 98968 99091 99202 99203 99204 99205 99211 99212 99213 99214 99215 99221 99222 99223 99231 99232 99233 99234 99235 99236 99238 99239 99242 99243 99244 99245 99252 99253 99254 99255 99281 99282 99283 99284 99285 99288 99291 99292 99304 99305 99306 99307 99308 99309 99310 99315 99316 99341 99342 99344 99345 99347 99348 99349 99350 99358 99359 99360 99366 99367 99368 99374 99375 99377 99378 99379 99380 99381 99382 99383 99384 99385 99386 99387 99391 99392 99393 99394 99395 99396 99397 99401 99402 99403 99404 99406 99407 99408 99409 99411 99412 99415 99416 99417 99418 99421 99422 99423 99424 99425 99426 99427 99429 99437 99439 99441 99442 99443 99446 99447 99448 99449 99450 99451 99452 99453 99454 99455 99456 99457 99458 99459 99460 99461 99462 99463 99464 99465 99466 99467 99468 99469 99471 99472 99473 99474 99475 99476 99477 99478 99479 99480 99483 99484 99485 99486 99487 99489 99490 99491 99492 99493 99494 99495 99496 99497 99498 99499 99500 99501 99502 99503 99504 99505 99506 99507 99509 99510 99511 99512 99600 99601 99602 99605 99606 99607'"/>
  <let name="ActClassDocument" value="'DOC DOCCLIN CDALVLONE'"/>
  <let name="ProblemType" value="'248536006 282291009 29308-4 373930000 404684003 418799008 55607006 64572001 75275-8 75312-9 75313-7 75314-5 75315-2 75316-0 75317-8 75318-6 75319-4 75321-0 75322-8 75323-6 75325-1 75326-9'"/>
  <let name="FamilyMemberValue" value="'AUNT BRO BROINLAW CHILD CHLDADOPT CHLDFOST CHLDINLAW COUSN DAU DAUADOPT DAUFOST DAUINLAW DOMPART FAMMEMB FTH FTHINLAW GGRFTH GGRMTH GGRPRN GRFTH GRMTH GRNDCHILD GRNDDAU GRNDSON GRPRN HBRO HSIB HSIS HUSB MAUNT MCOUSN MGGRFTH MGGRMTH MGGRPRN MGRFTH MGRMTH MGRPRN MTH MTHINLAW MUNCLE NBRO NCHILD NEPHEW NFTH NIECE NIENEPH NMTH NPRN NSIB NSIS PAUNT PCOUSN PGGRFTH PGGRMTH PGGRPRN PGRFTH PGRMTH PGRPRN PRN PRNINLAW PUNCLE ROOM SIB SIBINLAW SIGOTHR SIS SISINLAW SON SONADOPT SONFOST SONINLAW SPS STPBRO STPCHLD STPDAU STPFTH STPMTH STPPRN STPSIB STPSIS STPSON UNCLE WIFE'"/>
  <let name="AdministrativeGenderHL7V3" value="'F M UN'"/>
  <let name="GenderIdentity" value="'407376001 407377005 446131000124102 446141000124107 446151000124109 ASKU OTH'"/>
  <let name="HealthStatus" value="'135815002 135818000 161045001 162467007 21134002 271593001 27624003 419099009 765205004 81323004'"/>
  <let name="HPDocumentType" value="'11492-6 28626-0 34094-3 34095-0 34096-8 34115-6 34116-4 34117-2 34138-8 34763-3 34774-0 47039-3 51849-8 57056-4 67856-5 68560-2 68573-5 68580-0 68592-5 68599-0 68614-7 68622-0 68628-7 68637-8 68644-4 68655-0 68665-9 68676-6 68683-2 68690-7 68699-8 68711-1 68721-0 68731-9 68735-0 68740-0 68751-7 68760-8 68770-7 68775-6 68781-4 68791-3 68797-0 68807-7 68817-6 68825-9 68833-3 68843-2 68849-9 68858-0 77401-8 77412-5 77415-8 77420-8 78246-6 78247-4 78248-2 78249-0 78306-8 78307-6 78308-4 78386-0 78387-8 78388-6 78389-4 78390-2 78391-0 78392-8 78463-7 78464-5 78465-2 78497-5 78507-1 78508-9 78509-7 78510-5 78511-3 78538-6 78643-4 78713-5 78718-4 78724-2 78727-5 78731-7 78733-3 80574-7 80733-9 80799-0 80809-7 80813-9 83552-0 83715-3 83786-4 83812-8 83819-3 83830-0 83858-1 83886-2 83901-9 83959-7 83995-1 84019-9 84041-3 84048-8 84077-7 84097-5 84104-9 84366-4 85179-0 85196-4 85201-2 85203-8 85245-9 85850-6 85860-5 85867-0 87259-8 88353-8 89213-3 89215-8 89221-6 89443-6 96379-3 97659-7 97666-2 97672-0 97673-8 97674-6 97675-3 97676-1 97677-9 97678-7 97679-5 97680-3 97681-1 97682-9 97683-7 97684-5 97685-2 97686-0 97715-7 97720-7 97723-1 97726-4 97728-0 97729-8 97730-6 99480-6 99481-4 99482-2 99485-5 99486-3 99487-1'"/>
  <let name="MoodCodeEvnInt" value="'EVN INT'"/>
  <let name="SPLDrugRouteOfAdministrationTerminology" value="'C132737 C28161 C38192 C38193 C38194 C38197 C38198 C38200 C38203 C38205 C38206 C38207 C38208 C38209 C38210 C38211 C38212 C38215 C38216 C38217 C38218 C38219 C38220 C38221 C38222 C38223 C38224 C38225 C38226 C38227 C38228 C38229 C38230 C38231 C38232 C38233 C38234 C38235 C38236 C38238 C38239 C38240 C38241 C38242 C38243 C38245 C38246 C38247 C38248 C38249 C38250 C38251 C38252 C38253 C38254 C38255 C38256 C38257 C38258 C38259 C38260 C38261 C38262 C38263 C38264 C38265 C38266 C38267 C38268 C38269 C38270 C38271 C38272 C38273 C38274 C38276 C38277 C38278 C38279 C38280 C38281 C38282 C38283 C38284 C38285 C38286 C38287 C38288 C38289 C38290 C38291 C38292 C38293 C38294 C38295 C38296 C38297 C38298 C38299 C38300 C38301 C38304 C38305 C38307 C38308 C38309 C38310 C38311 C38312 C38313 C38633 C38675 C38676 C38677 C48623 C65103 C79137 C79138 C79139 C79141 C79142 C79143 C79144 C79145'"/>
  <let name="MedicationRoute" value="'10547007 1078280005 12130007 1254769004 1259221004 127490009 127491008 127492001 1611000175109 16857009 26643006 34206005 37161004 372449004 372450004 372451000 372452007 372453002 372454008 372457001 372458006 372459003 372460008 372461007 372462000 372463005 372464004 372465003 372466002 372467006 372468001 372469009 372470005 372471009 372472002 372473007 372474001 372475000 372476004 37737002 37839007 38239002 404815008 404818005 404819002 404820008 416174007 417070009 417255000 417950001 417985001 417989007 418091004 418114005 418133000 418136008 418162004 418204005 418287000 418321004 418331006 418401004 418418000 418441008 418511008 418586008 418608002 418664002 418722009 418730005 418743005 418813001 418821007 418851001 418877009 418887008 418892005 418947002 418987007 419021003 419165009 419231003 419243002 419320008 419396008 419601003 419631009 419684008 419762003 419778001 419810008 419874009 419894000 419954003 419993007 420047004 420163009 420168000 420185003 420201002 420204005 420218003 420254004 420287000 420719007 428191002 429817007 432671000124106 445752009 445754005 445755006 445756007 445767008 445768003 445771006 445913005 445941009 446105004 446407004 446435000 446442000 446540005 447026006 447052000 447080003 447081004 447121004 447122006 447227007 447229005 447694001 447964005 448077001 448491004 448492006 448598008 45890007 46713006 47625008 54471007 54485002 58100008 58731000052100 58751000052109 58761000052107 58771000052103 58811000052103 58821000052106 58831000052108 60213007 6064005 62226000 66621000052103 697971008 711360002 711378007 714743009 718329006 72607000 764723001 766790006 78421000 876824003 90028008'"/>
  <let name="AdministrationUnitDoseForm" value="'C102405 C122629 C122631 C25397 C44278 C48491 C48501 C48536 C48537 C65060 C71204'"/>
  <let name="RoleClassManufacturedProduct" value="'MANU THER'"/>
  <let name="NoImmunizationReason" value="'IMMUNE MEDPREC OSTOCK PATOBJ PHILISOP RELIG VACEFF VACSAF'"/>
  <let name="ImplantableDeviceStatus" value="'C114146 C118639 C122711 C154407 C45329'"/>
  <let name="DeviceLatexSafety" value="'C101673 C106038 C106043'"/>
  <let name="WoundType" value="'1163215007 1163217004 1163220007 1163222004 1163224003 1163226001 1237116009 125667009 128045006 129902007 13954005 238792006 247444006 271761007 271767006 271807003 274165007 279420009 283545005 283682007 284196006 312609001 3644009 400012003 402275006 403601003 425322008 428220001 429349001 444827008 723071003 7231009 95321009'"/>
  <let name="TargetSiteQualifiers" value="'24028007 255549009 255551008 255561001 7771000'"/>
  <let name="DeviceMagneticResonanceMRSafety" value="'C106045 C106046 C106047 C113844'"/>
  <let name="ResultStatus" value="'aborted active cancelled completed held suspended'"/>
  <let name="MedicationStatus" value="'aborted active completed nullified suspended'"/>
  <let name="MedicationAdherence" value="'1156699004 275927006 275928001 457831000124109 702565001 asked-declined asked-unknown not-asked'"/>
  <let name="ActClassSupply" value="'SPLY DIET'"/>
  <let name="XDocumentSubstanceMood" value="'DEF EVN INT PRMS PRP RQO'"/>
  <let name="SupportedFileFormats" value="'application/msword application/pdf audio audio/basic audio/k32adpcm audio/mpeg image/gif image/jpeg image/png image/tiff text/html text/plain text/rtf video video/mp4 video/mpeg video/quicktime video/webm video/x-avi video/x-ms-wmv'"/>
  <let name="PressureUlcerStage" value="'1163215007 1163217004 1163220007 1163222004 1163224003 1163226001 723071003'"/>
  <let name="PlannedMoodCodeActEncounterProcedure" value="'APT ARQ INT PRMS PRP RQO'"/>
  <let name="NutritionalStatus" value="'105726004 107647005 1149197005 129689002 129845004 162020001 206568009 248324001 284670008 288939007 414915002 435691000124100 440301000124106 440331000124103 440341000124108 441361000124104 441951000124102 441961000124100 441971000124107 444862003 448765001 61578001 64379006 704358009 72405004 95907004'"/>
  <let name="SurgicalOperationNoteDocumentTypeCode" value="'11504-8 28573-4 28583-3 28624-5 34137-0 34818-5 34868-0 34870-6 34874-8 34877-1 78240-9 78241-7 78242-5 78243-3 78244-1 78380-3 78381-1 78487-6 78678-0 78679-8 78714-3 78719-2 78725-9 80579-6 80668-7 80807-1 82824-4 83535-5 83614-8 83673-4 83692-4 83815-1 84020-7 84079-3 84175-9 84264-1 84268-2 89457-6 89472-5 96375-1 96376-9 96377-7 97693-6 97705-8 97717-3 97721-5'"/>
  <let name="ActRelationshipAuthorizedBy" value="'AUTH'"/>
  <let name="PatientReferralActMoodCode" value="'INT RQO'"/>
  <let name="ActPriority" value="'A CR CS CSP CSR EL EM P PRN R RR S T UD UR'"/>
  <let name="CareModel" value="'170935008 170936009 170937000 170939002 170940000 170941001 268528005 268529002 370985002'"/>
  <let name="PhysicalExamType" value="'10190-7 10191-5 10192-3 10193-1 10194-9 10195-6 10196-4 10197-2 10198-0 10199-8 10200-4 10201-2 10202-0 10203-8 10204-6 10205-3 10206-1 10207-9 10208-7 10209-5 10210-3 10211-1 10212-9 11384-5 11385-2 11386-0 11387-8 11388-6 11389-4 11390-2 11391-0 11392-8 11393-6 11394-4 11397-7 11398-5 11399-3 11400-9 11401-7 11402-5 11403-3 11404-1 11406-6 11407-4 11410-8 11411-6 11413-2 11414-0 11415-7 11447-0 47420-5 51850-6 8716-3'"/>
  <let name="PayerType" value="'1 11 111 1111 1112 112 113 119 12 121 122 123 129 13 14 141 142 19 191 2 21 211 212 213 219 22 23 25 26 29 291 299 3 31 311 3111 3112 3113 3114 3115 3116 3119 312 3121 3122 3123 313 32 321 3211 3212 32121 32122 32123 32124 32125 32126 32127 32128 322 3221 3222 3223 3229 33 331 332 333 334 34 341 342 343 344 349 35 36 361 362 369 37 371 3711 3712 3713 372 379 38 381 3811 3812 3813 3819 382 389 39 391 4 41 42 43 44 5 51 511 512 513 514 515 516 517 519 52 521 522 523 524 529 53 54 55 56 561 562 59 6 61 611 612 613 614 619 62 621 622 623 629 7 71 72 73 79 8 81 82 821 822 823 83 84 85 89 9 91 92 93 94 95 951 953 954 959 96 97 98 99 9999'"/>
  <let name="EncounterPlanned" value="'108219001 108220007 108221006 1237136005 1258986006 1269515004 12843005 14736009 18170008 185321005 185345009 185346005 185347001 185348006 185349003 185387006 185462000 185463005 185464004 185465003 185466002 185467006 185468001 185469009 185470005 19681004 207195004 209099002 210098006 225929007 270424005 270427003 270430005 288836004 310587004 310588009 314849005 315205008 3391000175108 401267002 401271004 408482001 408483006 408487007 4141000175103 416520008 423215004 439058005 439708006 439887005 440068009 440085006 440146002 440168007 440568002 440611006 440696002 441244001 444971000124105 448337001 452081000124104 4525004 453701000124103 456201000124103 461231000124109 50357006 6051000124107 6061000124109 68341005 69399002 698704008 704126008 711458003 83362003 86013001 86181006 866149003 90526000'"/>
  <let name="PlannedMoodCodeSubstanceAdministrationSupply" value="'INT PRMS PRP RQO'"/>
  <let name="PlannedInterventionMoodCode" value="'APT ARQ INT PRMS PRP RQO'"/>
  <let name="ActClassProcedure" value="'PROC SBADM SBEXT SPECCOLLECT'"/>
  <let name="ParticipationPhysicalPerformer" value="'PRF DIST PPRF SPRF'"/>
  <let name="FinanciallyResponsiblePartyTypeValueSet" value="'AFFL AGNT ASSIGNED CASEBJ CIT CLAIM COMPAR CON COVPTY CRINV CRSPNSR DEPEN ECON EMP GUAR GUARD INDIV INVSBJ LIC MIL NAMED NOK NOT PAT PAYEE PAYOR POLHOLD PROG PROV QUAL RESBJ SGNOFF SPNSR STD SUBSCR UNDWRT'"/>
  <let name="CoverageRoleTypeValueSet" value="'FAMDEP FSTUD HANDIC INJ PSTUD SELF SPON STUD'"/>
  <let name="PregnancyIntention" value="'454381000124105 454391000124108 454401000124105 454411000124108'"/>
  <let name="ExtendedPregnancyStatus" value="'146799005 60001007 77386006'"/>
  <let name="PriorityLevel" value="'394848005 394849002 441808003'"/>
  <let name="ProblemStatus" value="'246455001 263855007 277022003 413322009 55561003 73425007'"/>
  <let name="XDocumentProcedureMood" value="'APT ARQ DEF EVN INT PRMS PRP RQO'"/>
  <let name="ProcedureActStatusCode" value="'aborted active cancelled completed'"/>
  <let name="ProcedureNoteDocumentTypeCodes" value="'11505-5 18744-3 18745-0 18746-8 18751-8 18753-4 18836-7 28570-0 28577-5 28625-2 29757-2 33721-2 34121-4 34122-2 34896-1 34899-5 47048-4 48807-2 68563-6 68630-3 68658-4 68667-5 68692-3 68702-0 68714-5 68724-4 68729-3 68743-4 68754-1 68784-8 68799-6 68809-3 68820-0 68829-1 68836-6 68851-5 68861-4 68868-9 68872-1 68877-0 68890-3 68895-2 75238-6 75426-7 75455-6 77422-4 77425-7 78314-2 78315-9 78316-7 78317-5 78318-3 78319-1 78320-9 78321-7 78322-5 78472-8 78473-6 78474-4 78475-1 78476-9 78477-7 78478-5 78494-2 78654-1 78655-8 78656-6 78657-4 78658-2 78659-0 78660-8 78661-6 78662-4 79267-1 80669-5 80670-3 80798-2 82355-9 82357-5 82366-6 83525-6 83533-0 83577-7 83599-1 83616-3 83617-1 83640-3 83651-0 83728-6 83789-8 83854-0 83891-2 83938-1 84006-6 84015-7 84021-5 84044-7 84053-8 84062-9 84074-4 84081-9 84147-8 84158-5 84374-8 84375-5 84379-7 84391-2 84408-4 85230-1 85236-8 85242-6 85260-8 85261-6 85854-8 85857-1 88347-0 89223-2 89232-3 89796-7 89803-1 89812-2 89814-8 89817-1 89822-1 89826-2 89951-8 90010-0 90350-0 90353-4 90877-2 93086-7 93150-1 94320-9 94810-9 95750-6 95756-3 96333-0 96351-2 96353-8 96736-4 97668-8 97692-8 97706-6 97707-4 97712-4 97716-5 97727-2 99484-8 99491-3'"/>
  <let name="ActEncounterCodes" value="'ACUTE AMB EMER FLD HH IMP NONAC OBSENC PRENC SS VR'"/>
  <let name="XEncounterParticipant" value="'ADM ATND CON DIS REF'"/>
  <let name="ProgressNoteDocumentTypeCode" value="'11506-3 11507-1 11508-9 11509-7 11510-5 11512-1 15507-7 18733-6 28569-2 28575-9 28580-9 28617-9 28623-7 28627-8 28656-7 34124-8 34125-5 34126-3 34127-1 34128-9 34129-7 34130-5 34131-3 34132-1 34900-1 34901-9 34904-3 64055-7 64057-3 64059-9 64061-5 64063-1 64067-2 64071-4 64075-5 64079-7 68472-0 68473-8 68475-3 68478-7 68479-5 68480-3 68481-1 68484-5 68485-2 68554-5 68564-4 68574-3 68582-6 68595-8 68617-0 68631-1 68646-9 68659-2 68668-3 68679-0 68693-1 68703-8 68725-1 68744-2 68755-8 68763-2 68785-5 68800-2 68810-1 68830-9 68840-8 68862-2 68873-9 68878-8 68891-1 68896-0 70238-1 72556-4 75220-4 75221-2 75497-8 77426-5 78323-3 78324-1 78325-8 78326-6 78327-4 78328-2 78479-3 78480-1 78481-9 78482-7 78663-2 78664-0 78665-7 78666-5 78667-3 78668-1 78669-9 78705-1 78710-1 80569-7 80665-3 80667-9 80671-1 80815-4 80819-6 82365-8 85441-4 85515-5 89030-1 89224-0 89233-1 89795-9 89802-3 89807-2 89811-4 89813-0 89816-3 89821-3 90007-6 90011-8 90014-2 90772-5 90876-4 93892-8 93897-7 93900-9 94245-8 94466-0 94467-8 94468-6 94518-8 94749-9 94809-1 95041-0 95134-3 95746-4 95757-1 95802-5 96338-9 96342-1 96350-4 97570-6 97571-4 97572-2 97573-0 97574-8 97575-5 97576-3 97577-1 97578-9 97579-7 97580-5 97669-6 97691-0'"/>
  <let name="GoalAchievement" value="'390801001 390802008 706905005 706906006'"/>
  <let name="ReferralDocumentType" value="'57133-1 57134-9 57135-6 57136-4 57137-2 57138-0 57139-8 57141-4 57142-2 57143-0 57144-8 57145-5 57146-3 57147-1 57148-9 57149-7 57150-5 57151-3 57152-1 57153-9 57154-7 57155-4 57156-2 57157-0 57158-8 57159-6 57160-4 57162-0 57163-8 57164-6 57165-3 57166-1 57167-9 57168-7 57169-5 57170-3 57171-1 57172-9 57173-7 57174-5 57175-2 57176-0 57177-8 57178-6 57179-4 69438-0 77405-9 77427-3 77432-3 78329-0 78330-8 78331-6 78332-4 78483-5 78484-3 78501-4 78670-7 78671-5 78672-3 78673-1 78674-9 78675-6 78676-4 78677-2 78700-2 80419-5 80577-0 80806-3 82358-3 83797-1 83964-7 83971-2 84031-4 84259-1 84271-6 84287-2 85199-8 85205-3 85226-9 86664-0 87250-7 89225-7 89234-9 95747-2 95754-8'"/>
  <let name="ADLResultType" value="'28408-3 28409-1 28413-3 46008-9 46482-6 46484-2'"/>
  <let name="Ability" value="'1091000175109 371150009 371151008 371152001 371153006 371154000 371155004 371157007 385640009 444661000124105 444671000124103 444681000124100 445141000124103 445481000124102 450461000124104 717896003'"/>
  <let name="SensoryStatusProblemType" value="'10625003 128542002 13191003 16476001 22382001 247297002 247310003 247311004 247312006 247313001 247314007 247315008 285567008 286204007 286253007 286300001 286325005 304290007 364019009 373713005 397611008 397624008 397627001 397677003 397686008 397701006 405183003 43410000 47078008 66824009 69744008 9077000'"/>
  <let name="MentalAndFunctionalStatusResponse" value="'11163003 1250004 18043004 18307000 20572008 260379002 272520006 30714006 35105006 41277001'"/>
  <let name="Severity" value="'24484000 255604002 6736007'"/>
  <let name="Sex" value="'184115007 248152002 248153007 asked-declined'"/>
  <let name="SexualOrientationIncludingNullsAndDataAbsentReason" value="'20430005 38628009 42035005 765288000 OTH UNK asked-declined'"/>
  <let name="CompletedOrNullifiedActStatus" value="'completed nullified'"/>
  <let name="SmokingStatus" value="'266919005 266927001 428041000124106 428061000124105 428071000124103 449868002 77176002 8517006'"/>
  <let name="AllergyAndIntoleranceType" value="'235719002 414285001 416098002 418471000 419511003 420134006 59037007'"/>
  <let name="TobaccoUse" value="'10761391000119102 110483000 134406006 160603005 160604004 160605003 160606002 160612007 160613002 160614008 160616005 160619003 169940006 228494002 228499007 228504007 228509002 228514003 228515002 228516001 228517005 228518000 228523000 228524006 228525007 230059006 230060001 230062009 230063004 230064005 230065006 266920004 266927001 266929003 308438006 365981007 365982000 365983005 394871007 394872000 394873005 427189007 428041000124106 428061000124105 428071000124103 43381005 446172000 449345000 449867007 449868002 449869005 450811000124104 450821000124107 451381000124107 451881000124101 451891000124103 56578002 56771006 59978006 65568007 713914004 77176002 81703003 82302008'"/>
  <let name="TransferDocumentType" value="'18761-7 28616-1 28651-8 34755-9 34770-8 68482-9 68565-1 68569-3 68583-4 68596-6 68618-8 68632-9 68647-7 68660-0 68669-1 68680-8 68704-6 68715-2 68726-9 68737-6 68745-9 68756-6 68764-0 68772-3 68777-2 68786-3 68793-9 68801-0 68811-9 68863-0 68883-8 68884-6 68887-9 77406-7 77414-1 78340-7 78341-5 78488-4 78489-2 78490-0 78491-8 78492-6 78493-4 78502-2 78680-6 78681-4 78682-2 78683-0 78684-8 78729-1 78736-6 80580-4 80735-4 80808-9 80816-2 83526-4 83865-6 83914-2 83950-6 83981-1 84016-5 84083-5 84221-1 84228-6 85181-6 85184-0 85187-3 85219-4 85253-3 88348-8 89226-5 89235-6 97670-4'"/>
  <let name="ADConditionsAndPrognosisScenarios" value="'75777-3 75778-1'"/>
  <let name="HL7BasicConfidentialityKind" value="'N R V'"/>
  <let name="TelecomUseUSRealmHeader" value="'AS EC HP HV MC PG WP'"/>
  <let name="MaritalStatus" value="'A C D I L M P S T U W'"/>
  <let name="ReligiousAffiliation" value="'1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078 1079 1080 1081 1082'"/>
  <let name="RaceCategoryExcludingNulls" value="'1002-5 2028-9 2054-5 2076-8 2106-3'"/>
  <let name="Ethnicity" value="'2135-2 2186-5'"/>
  <let name="DetailedEthnicity" value="'2137-8 2138-6 2139-4 2140-2 2141-0 2142-8 2143-6 2144-4 2145-1 2146-9 2148-5 2149-3 2150-1 2151-9 2152-7 2153-5 2155-0 2156-8 2157-6 2158-4 2159-2 2160-0 2161-8 2162-6 2163-4 2165-9 2166-7 2167-5 2168-3 2169-1 2170-9 2171-7 2172-5 2173-3 2174-1 2175-8 2176-6 2178-2 2180-8 2182-4 2184-0'"/>
  <let name="LanguageAbilityMode" value="'ESGN ESP EWR RSGN RSP RWR'"/>
  <let name="LanguageAbilityProficiency" value="'E F G P'"/>
  <let name="ParticipationFunction" value="'ADMPHYS ANEST ANRS ASSEMBLER ATTPHYS AUCG AUCOV AUEMROV AULR AUTM AUWA CLMADJ COMPOSER DISPHYS ENROLL FASST FFSMGT FULINRD GRDCON MCMGT MDWF NASST PAYORCNTR PCP POACON PRCON PRISURG PROMSK PROVMGT REINS RETROCES REVIEWER RNDPHYS SASST SELFINRD SNRS SUBCON SUBCTRT TASST UMGT UNDERWRTNG _AuthorizedParticipationFunction _AuthorizedReceiverParticipationFunction _ConsenterParticipationFunction _CoverageParticipationFunction _OverriderParticipationFunction _PayorParticipationFunction _SponsorParticipationFunction _UnderwriterParticipationFunction'"/>
  <let name="VitalSignResultType" value="'2708-6 29463-7 3140-1 3150-0 3151-8 39156-5 59408-5 59575-1 59576-9 77606-2 8287-5 8289-1 8302-2 8306-3 8310-5 8462-4 8478-0 8480-6 8867-4 9279-1 96608-5 96609-3 9843-4'"/>
  <let name="ObservationInterpretationHL7" value="'&lt; &gt; A AA AC B CAR Carrier D DET E EX EXP H H&gt; HH HM HU HX I IE IND L L&lt; LL LU LX MS N NCL ND NEG NR NS OBX ObservationInterpretationDetection ObservationInterpretationExpectation POS QCF R RR ReactivityObservationInterpretation S SDD SYN-R SYN-S TOX U UNE VS W WR'"/>
  <let name="WoundCharacteristic" value="'1137684004 15923071000119108 171000161100 201000161104 21000161105 211000161102 221000161109 225540005 225550006 225551005 225917003 225944008 239157004 239159001 239160006 239161005 239164002 239165001 239166000 239189008 239193002 271618001 286613000 298006005 298008006 298010008 298012000 304287001 304288006 307229009 31000161107 310639000 341000161109 371000161102 401000161100 409590008 418115006 418291005 418422005 418780004 419635000 419877002 431231000124104 445916002 447112000 447547000 448194002 448749002 449741007 449743005 449744004 449745003 449746002 449747006 449748001 449749009 449750009 449751008 449752001 449756003 449757007 449760000 449761001 449762008 449891003 531000161108 541000161103 551000161100 561000161102 591000161109 61000161101 651000161101 71000161109 781184005 781185006 781186007 781187003 781188008 781193006 781195004 789507005 827031005 830130002 833287004 866166001 91000161108'"/>
  <let name="WoundMeasurements" value="'39125-0 39126-8 39127-6 72293-4 72296-7'"/>
  <let name="EntityPersonNamePartQualifier" value="'AC AD BR CL IN NB PR SP TITLE VV'"/>
</schema>